<!doctype html><html lang=en class=no-js> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:48:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Module providing the base functions and classes for portfolio optimization"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.pro/api/portfolio/pfopt/base/ rel=canonical><link href=../index.html rel=prev><link href=../nb/index.html rel=next><link rel=icon href=../../../../assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.6.21+insiders-4.53.17"><title>base - VectorBT® PRO</title><link rel=stylesheet href=../../../../assets/stylesheets/main.010a373c.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=../../../../../../fonts.gstatic.com/index.html crossorigin><link rel=stylesheet href="../../../../../../fonts.googleapis.com/cssbe43.css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/stylesheets/extra.css><link rel=stylesheet href=../../../../assets/stylesheets/custom-light.css><link rel=stylesheet href=../../../../assets/stylesheets/custom-dark.css><link rel=stylesheet href=../../../../assets/stylesheets/pygments-light.css><link rel=stylesheet href=../../../../assets/stylesheets/pygments-dark.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-0C5VNYCFHL"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-0C5VNYCFHL",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="../../../../../../www.googletagmanager.com/gtag/jsc6c8?id=G-0C5VNYCFHL",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><meta name=robots content="noindex, nofollow"><meta property=og:title content=base><meta property=og:type content=website><meta content=https://vectorbt.pro/api/portfolio/pfopt/base/ property=og:url><meta property=og:image:url content=https://vectorbt.pro/pvt_41531c19/assets/logo/social-new.png><meta property=og:image:type content=image/png><meta property=og:description content="Module providing the base functions and classes for portfolio optimization"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=https://vectorbt.pro/pvt_41531c19/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-16x16.png><link rel=manifest href=https://vectorbt.pro/pvt_41531c19/assets/logo/site.webmanifest><link rel=mask-icon href=https://vectorbt.pro/pvt_41531c19/assets/logo/safari-pinned-tab.svg color=#1e1f22><link rel="shortcut icon" href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e1f22><meta name=msapplication-config content=https://vectorbt.pro/pvt_41531c19/assets/logo/browserconfig.xml><meta name=theme-color content=#1e1f22><link href=https://unpkg.com/aos@2.3.4/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.4/dist/aos.js></script><link href=http://fonts.cdnfonts.com/css/uni-neue rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js integrity="sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><link rel=preconnect href=https://fonts.googleapis.com/><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin></head> <body dir=ltr data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#vectorbtpro.portfolio.pfopt.base class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> <i>What's new</i>: New LLM providers, reasoning steps, function calling, YAML & TOML support, and <a href=https://vectorbt.pro/pvt_41531c19/getting-started/release-notes><strong>more</strong></a> <span class="twemoji announce-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m153.6 29.9 16-21.3c4-5.4 10.4-8.6 17.1-8.6C198.4 0 208 9.6 208 21.3v22.1c0 13.1 5.4 25.7 14.9 34.7l84.7 80.9c48.8 46.6 76.4 111.2 76.4 178.7C384 434 306 512 209.7 512H192C86 512 0 426 0 320v-3.8c0-48.8 19.4-95.6 53.9-130.1l3.5-3.5c4.2-4.2 10-6.6 16-6.6 12.5 0 22.6 10.1 22.6 22.6V288c0 35.3 28.7 64 64 64s64-28.7 64-64v-3.9c0-18-7.2-35.3-19.9-48l-38.6-38.6c-24-24-37.5-56.7-37.5-90.7 0-27.7 9-54.8 25.6-76.9"/></svg></span> </div> <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script> </aside> </div> <!-- Determine class according to configuration --> <!-- Header --> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <!-- Link to home --> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-header__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> VectorBT® PRO <span class=md-version> v2025.10.15 </span> <span class=unlock-icon><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M192 32c-35.3 0-64 28.7-64 64v64h192c35.3 0 64 28.7 64 64v224c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64V96c0-70.7 57.3-128 128-128 63.5 0 116.1 46.1 126.2 106.7 2.9 17.4-8.8 33.9-26.3 36.9S258 102.8 255 85.3C250 55.1 223.7 32 192 32m40 328c13.3 0 24-10.7 24-24s-10.7-24-24-24h-80c-13.3 0-24 10.7-24 24s10.7 24 24 24z"/></svg></span> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> base </span> </div> </div> </div> <!-- Color palette --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=custom-light data-md-color-primary=custom-light data-md-color-accent=custom-light aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <!-- Site language selector --> <!-- Button to open search modal --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-tabs__link> Cookbook </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-nav__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> VectorBT® PRO </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-nav__link> <span class=md-ellipsis> Getting started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-nav__link> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-nav__link> <span class=md-ellipsis> Cookbook </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"/></svg> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/_dtypes/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h6v-2H6V4h7v5h5v3h2V8l-6-6m4 12a.26.26 0 0 0-.26.21l-.19 1.32c-.3.13-.59.29-.85.47l-1.24-.5c-.11 0-.24 0-.31.13l-1 1.73c-.06.11-.04.24.06.32l1.06.82a4.2 4.2 0 0 0 0 1l-1.06.82a.26.26 0 0 0-.06.32l1 1.73c.06.13.19.13.31.13l1.24-.5c.26.18.54.35.85.47l.19 1.32c.02.12.12.21.26.21h2c.11 0 .22-.09.24-.21l.19-1.32c.3-.13.57-.29.84-.47l1.23.5c.13 0 .26 0 .33-.13l1-1.73a.26.26 0 0 0-.06-.32l-1.07-.82c.02-.17.04-.33.04-.5s-.01-.33-.04-.5l1.06-.82a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.13-.19-.13-.32-.13l-1.23.5c-.27-.18-.54-.35-.85-.47l-.19-1.32A.236.236 0 0 0 20 14m-1 3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5c-.84 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5"/></svg> <span class=md-ellipsis> _dtypes </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/_opt_deps/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h6v-2H6V4h7v5h5v3h2V8l-6-6m4 12a.26.26 0 0 0-.26.21l-.19 1.32c-.3.13-.59.29-.85.47l-1.24-.5c-.11 0-.24 0-.31.13l-1 1.73c-.06.11-.04.24.06.32l1.06.82a4.2 4.2 0 0 0 0 1l-1.06.82a.26.26 0 0 0-.06.32l1 1.73c.06.13.19.13.31.13l1.24-.5c.26.18.54.35.85.47l.19 1.32c.02.12.12.21.26.21h2c.11 0 .22-.09.24-.21l.19-1.32c.3-.13.57-.29.84-.47l1.23.5c.13 0 .26 0 .33-.13l1-1.73a.26.26 0 0 0-.06-.32l-1.07-.82c.02-.17.04-.33.04-.5s-.01-.33-.04-.5l1.06-.82a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.13-.19-.13-.32-.13l-1.23.5c-.27-.18-.54-.35-.85-.47l-.19-1.32A.236.236 0 0 0 20 14m-1 3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5c-.84 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5"/></svg> <span class=md-ellipsis> _opt_deps </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h6v-2H6V4h7v5h5v3h2V8l-6-6m4 12a.26.26 0 0 0-.26.21l-.19 1.32c-.3.13-.59.29-.85.47l-1.24-.5c-.11 0-.24 0-.31.13l-1 1.73c-.06.11-.04.24.06.32l1.06.82a4.2 4.2 0 0 0 0 1l-1.06.82a.26.26 0 0 0-.06.32l1 1.73c.06.13.19.13.31.13l1.24-.5c.26.18.54.35.85.47l.19 1.32c.02.12.12.21.26.21h2c.11 0 .22-.09.24-.21l.19-1.32c.3-.13.57-.29.84-.47l1.23.5c.13 0 .26 0 .33-.13l1-1.73a.26.26 0 0 0-.06-.32l-1.07-.82c.02-.17.04-.33.04-.5s-.01-.33-.04-.5l1.06-.82a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.13-.19-.13-.32-.13l-1.23.5c-.27-.18-.54-.35-.85-.47l-.19-1.32A.236.236 0 0 0 20 14m-1 3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5c-.84 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5"/></svg> <span class=md-ellipsis> _settings </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/accessors/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M11 5H8l4-4 4 4h-3v4.43c-.75.46-1.42 1.03-2 1.69zm11 6-4-4v3a6.747 6.747 0 0 0-7 6.17A3.006 3.006 0 0 0 9.17 20 3.006 3.006 0 0 0 13 21.83 3.01 3.01 0 0 0 14.83 18c-.3-.86-.98-1.53-1.83-1.83.47-4 4.47-4.2 4.95-4.2v3zm-11.37.59A7.63 7.63 0 0 0 6 10V7l-4 4 4 4v-3c1.34.03 2.63.5 3.64 1.4.25-.64.58-1.25.99-1.81"/></svg> <span class=md-ellipsis> accessors </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/mcp_server/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"/></svg> <span class=md-ellipsis> mcp_server </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/base/ class=md-nav__link> <span class=md-ellipsis> base </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/data/ class=md-nav__link> <span class=md-ellipsis> data </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/generic/ class=md-nav__link> <span class=md-ellipsis> generic </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/indicators/ class=md-nav__link> <span class=md-ellipsis> indicators </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/ class=md-nav__link> <span class=md-ellipsis> knowledge </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/labels/ class=md-nav__link> <span class=md-ellipsis> labels </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/ohlcv/ class=md-nav__link> <span class=md-ellipsis> ohlcv </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14 checked> <label class=md-nav__link for=__nav_6_14 id=__nav_6_14_label tabindex=0> <span class=md-ellipsis> portfolio </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_14_label aria-expanded=true> <label class=md-nav__title for=__nav_6_14> <span class="md-nav__icon md-icon"></span> portfolio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17.45 15.18 22 7.31V21H2V3h2v12.54L9.5 6 16 9.78l4.24-7.33 1.73 1-5.23 9.05-6.51-3.75L4.31 19h2.26l4.39-7.56z"/></svg> <span class=md-ellipsis> portfolio </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 3v6h2.95l2 6H6v6h6v-4.59L17.41 11H22V5h-6v4.57L10.59 15H9.06l-2-6H8V3M4 5h2v2H4m14 0h2v2h-2M8 17h2v2H8Z"/></svg> <span class=md-ellipsis> base </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/call_seq/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26zm7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26z"/></svg> <span class=md-ellipsis> call_seq </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/chunking/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16v-3h-3v9h-2V2h2v9h3V8l4 4zM2 12l4 4v-3h3v9h2V2H9v9H6V8z"/></svg> <span class=md-ellipsis> chunking </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/decorators/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 3v6h2.95l2 6H6v6h6v-4.59L17.41 11H22V5h-6v4.57L10.59 15H9.06l-2-6H8V3zm2 2h2v2H4zm14 2h2v2h-2zm0 8v3h-3v2h3v3h2v-3h3v-2h-3v-3zM8 17h2v2H8z"/></svg> <span class=md-ellipsis> decorators </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/enums/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 3h2v2H5v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5h2v2H5c-1.07-.27-2-.9-2-2v-4a2 2 0 0 0-2-2H0v-2h1a2 2 0 0 0 2-2V5a2 2 0 0 1 2-2m14 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2 2 2 0 0 1-2-2V5h-2V3zm-7 12a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m-4 0a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1m8 0a1 1 0 0 1 1 1 1 1 0 0 1-1 1 1 1 0 0 1-1-1 1 1 0 0 1 1-1"/></svg> <span class=md-ellipsis> enums </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/logs/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 2h8a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 8v4h8v-4zm0 6v4h8v-4zM8 4v4h8V4z"/></svg> <span class=md-ellipsis> logs </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/orders/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 2h8a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 8v4h8v-4zm0 6v4h8v-4zM8 4v4h8V4z"/></svg> <span class=md-ellipsis> orders </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/preparing/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 4V3a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6h1v4H9v11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-9h8V4z"/></svg> <span class=md-ellipsis> preparing </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/trades/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 2h8a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 8v4h8v-4zm0 6v4h8v-4zM8 4v4h8V4z"/></svg> <span class=md-ellipsis> trades </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/nb/ class=md-nav__link> <span class=md-ellipsis> nb </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_14_12 checked> <label class=md-nav__link for=__nav_6_14_12 id=__nav_6_14_12_label tabindex=0> <span class=md-ellipsis> pfopt </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_14_12_label aria-expanded=true> <label class=md-nav__title for=__nav_6_14_12> <span class="md-nav__icon md-icon"></span> pfopt </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M22 21H2V3h2v16h2v-2h4v2h2v-3h4v3h2v-2h4zm-4-7h4v2h-4zm-6-8h4v3h-4zm4 9h-4v-5h4zM6 10h4v2H6zm4 6H6v-3h4z"/></svg> <span class=md-ellipsis> pfopt </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 3v6h2.95l2 6H6v6h6v-4.59L17.41 11H22V5h-6v4.57L10.59 15H9.06l-2-6H8V3M4 5h2v2H4m14 0h2v2h-2M8 17h2v2H8Z"/></svg> <span class=md-ellipsis> base </span> <span class="md-nav__icon md-icon"></span> </label> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/ class="md-nav__link md-nav__link--active"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 3v6h2.95l2 6H6v6h6v-4.59L17.41 11H22V5h-6v4.57L10.59 15H9.06l-2-6H8V3M4 5h2v2H4m14 0h2v2h-2M8 17h2v2H8Z"/></svg> <span class=md-ellipsis> base </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.prepare_returns class=md-nav__link> <span class=md-ellipsis> prepare_returns </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.pypfopt_optimize class=md-nav__link> <span class=md-ellipsis> pypfopt_optimize </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_asset_classes class=md-nav__link> <span class=md-ellipsis> resolve_asset_classes </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_assets_constraints class=md-nav__link> <span class=md-ellipsis> resolve_assets_constraints </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_assets_views class=md-nav__link> <span class=md-ellipsis> resolve_assets_views </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_factors_constraints class=md-nav__link> <span class=md-ellipsis> resolve_factors_constraints </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_factors_views class=md-nav__link> <span class=md-ellipsis> resolve_factors_views </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_hrp_constraints class=md-nav__link> <span class=md-ellipsis> resolve_hrp_constraints </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_cov_matrix class=md-nav__link> <span class=md-ellipsis> resolve_pypfopt_cov_matrix </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_expected_returns class=md-nav__link> <span class=md-ellipsis> resolve_pypfopt_expected_returns </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call class=md-nav__link> <span class=md-ellipsis> resolve_pypfopt_func_call </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs class=md-nav__link> <span class=md-ellipsis> resolve_pypfopt_func_kwargs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer class=md-nav__link> <span class=md-ellipsis> resolve_pypfopt_optimizer </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.resolve_riskfolio_func_kwargs class=md-nav__link> <span class=md-ellipsis> resolve_riskfolio_func_kwargs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.riskfolio_optimize class=md-nav__link> <span class=md-ellipsis> riskfolio_optimize </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.select_pfopt_func_kwargs class=md-nav__link> <span class=md-ellipsis> select_pfopt_func_kwargs </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer class=md-nav__link> <span class=md-ellipsis> PortfolioOptimizer </span> </a> <nav class=md-nav aria-label=PortfolioOptimizer> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.alloc_records class=md-nav__link> <span class=md-ellipsis> alloc_records </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.allocations class=md-nav__link> <span class=md-ellipsis> allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.column_stack class=md-nav__link> <span class=md-ellipsis> column_stack </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations class=md-nav__link> <span class=md-ellipsis> fill_allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.filled_allocations class=md-nav__link> <span class=md-ellipsis> filled_allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func class=md-nav__link> <span class=md-ellipsis> from_allocate_func </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations class=md-nav__link> <span class=md-ellipsis> from_allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_filled_allocations class=md-nav__link> <span class=md-ellipsis> from_filled_allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_initial class=md-nav__link> <span class=md-ellipsis> from_initial </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func class=md-nav__link> <span class=md-ellipsis> from_optimize_func </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_pypfopt class=md-nav__link> <span class=md-ellipsis> from_pypfopt </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_random class=md-nav__link> <span class=md-ellipsis> from_random </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_riskfolio class=md-nav__link> <span class=md-ellipsis> from_riskfolio </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_uniform class=md-nav__link> <span class=md-ellipsis> from_uniform </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_universal_algo class=md-nav__link> <span class=md-ellipsis> from_universal_algo </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.get_allocations class=md-nav__link> <span class=md-ellipsis> get_allocations </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.indexing_func class=md-nav__link> <span class=md-ellipsis> indexing_func </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.mean_allocation class=md-nav__link> <span class=md-ellipsis> mean_allocation </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.metrics class=md-nav__link> <span class=md-ellipsis> metrics </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plot class=md-nav__link> <span class=md-ellipsis> plot </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plots_defaults class=md-nav__link> <span class=md-ellipsis> plots_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resample class=md-nav__link> <span class=md-ellipsis> resample </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.row_stack class=md-nav__link> <span class=md-ellipsis> row_stack </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_allocation_group class=md-nav__link> <span class=md-ellipsis> run_allocation_group </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_optimization_group class=md-nav__link> <span class=md-ellipsis> run_optimization_group </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.simulate class=md-nav__link> <span class=md-ellipsis> simulate </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.stats_defaults class=md-nav__link> <span class=md-ellipsis> stats_defaults </span> </a> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.subplots class=md-nav__link> <span class=md-ellipsis> subplots </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vectorbtpro.portfolio.pfopt.base.pfopt_func_dict class=md-nav__link> <span class=md-ellipsis> pfopt_func_dict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m6 20 4.16-12.09L9.34 6H8V4h2c.42 0 .78.26.93.63L16.66 18H18v2h-2c-.43 0-.79-.27-.93-.64l-3.74-8.71L8.12 20z"/></svg> <span class=md-ellipsis> nb </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/records/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 2h8a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 8v4h8v-4zm0 6v4h8v-4zM8 4v4h8V4z"/></svg> <span class=md-ellipsis> records </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/px/ class=md-nav__link> <span class=md-ellipsis> px </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/records/ class=md-nav__link> <span class=md-ellipsis> records </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/registries/ class=md-nav__link> <span class=md-ellipsis> registries </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/returns/ class=md-nav__link> <span class=md-ellipsis> returns </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/signals/ class=md-nav__link> <span class=md-ellipsis> signals </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/utils/ class=md-nav__link> <span class=md-ellipsis> utils </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-nav__link> <span class=md-ellipsis> Terms </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-path__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-path__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/ class=md-path__link> <span class=md-ellipsis> portfolio </span> </a> </li> <li class=md-path__item> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/ class=md-path__link> <span class=md-ellipsis> pfopt </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <nav class=md-tags> <span class=md-tag>base</span> <span class=md-tag>pfopt</span> </nav> <h1 id=vectorbtpro.portfolio.pfopt.base><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 3v6h2.95l2 6H6v6h6v-4.59L17.41 11H22V5h-6v4.57L10.59 15H9.06l-2-6H8V3M4 5h2v2H4m14 0h2v2h-2M8 17h2v2H8Z"/></svg></span> base <span class=dobjtype>module</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base title="Permanent link">&para;</a></h1> <p>Module providing the base functions and classes for portfolio optimization.</p> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.prepare_returns>prepare_returns <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L877-L926 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.prepare_returns title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>prepare_returns</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>nan_to_zero</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>dropna_rows</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>dropna_cols</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=n>dropna_any</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=p>)</span>
</span></code></pre></div> <p>Prepare and clean return data.</p> <p>Converts the input returns to a Pandas DataFrame and processes missing and infinite values based on specified flags.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>returns</code></strong> :&ensp;<code>AnyArray2d</code></dt> <dd> <p>Two-dimensional array containing return data.</p> <p>Expected to be convertible to a Pandas DataFrame.</p> </dd> <dt><strong><code>nan_to_zero</code></strong> :&ensp;<code>bool</code></dt> <dd>Replace NaN values with 0.</dd> <dt><strong><code>dropna_rows</code></strong> :&ensp;<code>bool</code></dt> <dd>Remove rows that have missing or, if NaN values are replaced, zero values.</dd> <dt><strong><code>dropna_cols</code></strong> :&ensp;<code>bool</code></dt> <dd>Remove columns that have missing or, if NaN values are replaced, zero values.</dd> <dt><strong><code>dropna_any</code></strong> :&ensp;<code>bool</code></dt> <dd>Drop rows where any entry is missing if NaN values are not replaced.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>Processed DataFrame of return values.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.pypfopt_optimize>pypfopt_optimize <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L595-L871 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.pypfopt_optimize title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=n>target</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=n>target_is_convex</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    <span class=n>weights_sum_to_one</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=n>target_constraints</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=n>target_solver</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=n>target_initial_guess</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>    <span class=n>objectives</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>    <span class=n>constraints</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=n>sector_mapper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>    <span class=n>sector_lower</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=n>sector_upper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>    <span class=n>discrete_allocation</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>    <span class=n>allocation_method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>    <span class=n>ignore_opt_errors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>    <span class=n>ignore_errors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=p>)</span>
</span></code></pre></div> <p>Return allocation using PyPortfolioOpt.</p> <p>Resolves the optimizer using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer>resolve_pypfopt_optimizer</a> with the provided settings and additional parameters. Depending on the inputs, it may further resolve expected returns, covariance matrix, objectives, constraints, and sector constraints. It then applies the target optimization—adding the target as a convex or non-convex objective, extracts the weights, and, if requested, converts them to a discrete allocation using the specified method.</p> <p>To specify the optimizer, use <code>optimizer</code> (see <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer>resolve_pypfopt_optimizer</a>). To specify the expected returns, use <code>expected_returns</code> (see <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_expected_returns title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_expected_returns>resolve_pypfopt_expected_returns</a>). To specify the covariance matrix, use <code>cov_matrix</code> (see <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_cov_matrix title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_cov_matrix>resolve_pypfopt_cov_matrix</a>). All other keyword arguments in <code>**kwargs</code> are forwarded to <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</p> <p>Each objective can be a function, an attribute of <code>pypfopt.objective_functions</code>, or an iterable of such. Each constraint can be a function or an iterable of such. The target can be an attribute of the optimizer or a stand-alone function. If <code>target_is_convex</code> is True, the target is added as a convex objective; otherwise, it is added as a non-convex objective. The keyword arguments <code>weights_sum_to_one</code> and those starting with <code>target</code> are passed to <code>pypfopt.base_optimizer.BaseConvexOptimizer.convex_objective</code> and <code>pypfopt.base_optimizer.BaseConvexOptimizer.nonconvex_objective</code> respectively.</p> <p>Set <code>ignore_opt_errors</code> to True to bypass errors specific to target optimization. Set <code>ignore_errors</code> to True to bypass all errors, including those raised by user inputs.</p> <p>If <code>discrete_allocation</code> is True, the function resolves <code>pypfopt.discrete_allocation.DiscreteAllocation</code> and invokes the specified attribute <code>allocation_method</code> on the resulting allocation object.</p> <p>All functions in this process are resolved using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>target</code></strong> :&ensp;<code>Optional[Union[Callable, str]]</code></dt> <dd>Optimization target function or attribute.</dd> <dt><strong><code>target_is_convex</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Indicates whether the target should be treated as convex.</dd> <dt><strong><code>weights_sum_to_one</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Enforce that portfolio weights sum to one.</dd> <dt><strong><code>target_constraints</code></strong> :&ensp;<code>Optional[List[Kwargs]]</code></dt> <dd>Additional constraints passed to the target function.</dd> <dt><strong><code>target_solver</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd>Solver to be used for target optimization.</dd> <dt><strong><code>target_initial_guess</code></strong> :&ensp;<code>Optional[Array]</code></dt> <dd>Initial guess for the target optimization.</dd> <dt><strong><code>objectives</code></strong> :&ensp;<code>Optional[MaybeIterable[Union[Callable, str]]]</code></dt> <dd> <p>Objectives for the optimizer.</p> <p>Functions or string references to objectives in <code>pypfopt.objective_functions</code>.</p> </dd> <dt><strong><code>constraints</code></strong> :&ensp;<code>Optional[MaybeIterable[Callable]]</code></dt> <dd>Constraints to be applied to the optimizer.</dd> <dt><strong><code>sector_mapper</code></strong> :&ensp;<code>Optional[dict]</code></dt> <dd>Mapping of assets to sectors for applying sector constraints.</dd> <dt><strong><code>sector_lower</code></strong> :&ensp;<code>Optional[dict]</code></dt> <dd>Lower bounds for sector allocations.</dd> <dt><strong><code>sector_upper</code></strong> :&ensp;<code>Optional[dict]</code></dt> <dd>Upper bounds for sector allocations.</dd> <dt><strong><code>discrete_allocation</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>If True, perform discrete allocation using <code>pypfopt.discrete_allocation.DiscreteAllocation</code>.</dd> <dt><strong><code>allocation_method</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd>Method name used to compute discrete allocation.</dd> <dt><strong><code>silence_warnings</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Flag to suppress warning messages.</dd> <dt><strong><code>ignore_opt_errors</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Ignore errors related to target optimization if True.</dd> <dt><strong><code>ignore_errors</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to ignore errors and return an empty dictionary.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for PyPortfolioOpt functions through <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs>resolve_pypfopt_func_kwargs</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Dict[str, float]</code></dt> <dd>Dictionary mapping asset symbols to their allocated weights.</dd> </dl> <div class="admonition info"> <p class=admonition-title>Info</p> <p>For default settings, see <code>pypfopt</code> in <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.pfopt title=vectorbtpro._settings.pfopt>pfopt</a>.</p> </div> <p><strong>Examples</strong></p> <p>Using mean historical returns, Ledoit-Wolf covariance matrix with constant variance, and efficient frontier:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>([</span><span class=s2>&quot;MSFT&quot;</span><span class=p>,</span> <span class=s2>&quot;AMZN&quot;</span><span class=p>,</span> <span class=s2>&quot;KO&quot;</span><span class=p>,</span> <span class=s2>&quot;MA&quot;</span><span class=p>])</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>100%</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pypfopt_optimize</span><span class=p>(</span><span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>))</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=go>{&#39;MSFT&#39;: 0.13324, &#39;AMZN&#39;: 0.10016, &#39;KO&#39;: 0.03229, &#39;MA&#39;: 0.73431}</span>
</span></code></pre></div> <p>EMA historical returns and sample covariance:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=gp>... </span>    <span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>),</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=gp>... </span>    <span class=n>expected_returns</span><span class=o>=</span><span class=s2>&quot;ema_historical_return&quot;</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=gp>... </span>    <span class=n>cov_matrix</span><span class=o>=</span><span class=s2>&quot;sample_cov&quot;</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=go>{&#39;MSFT&#39;: 0.08984, &#39;AMZN&#39;: 0.0, &#39;KO&#39;: 0.91016, &#39;MA&#39;: 0.0}</span>
</span></code></pre></div> <p>EMA historical returns, efficient Conditional Value at Risk, and other parameters automatically passed to their respective functions. Optimized towards lowest CVaR:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=gp>... </span>    <span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>),</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=gp>... </span>    <span class=n>expected_returns</span><span class=o>=</span><span class=s2>&quot;ema_historical_return&quot;</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=gp>... </span>    <span class=n>optimizer</span><span class=o>=</span><span class=s2>&quot;efficient_cvar&quot;</span><span class=p>,</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=gp>... </span>    <span class=n>beta</span><span class=o>=</span><span class=mf>0.9</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=gp>... </span>    <span class=n>weight_bounds</span><span class=o>=</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=gp>... </span>    <span class=n>target</span><span class=o>=</span><span class=s2>&quot;min_cvar&quot;</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=go>{&#39;MSFT&#39;: 0.14779, &#39;AMZN&#39;: 0.07224, &#39;KO&#39;: 0.77552, &#39;MA&#39;: 0.00445}</span>
</span></code></pre></div> <p>Adding custom objectives:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=gp>... </span>    <span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>),</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=gp>... </span>    <span class=n>objectives</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;L2_reg&quot;</span><span class=p>],</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=gp>... </span>    <span class=n>gamma</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=gp>... </span>    <span class=n>target</span><span class=o>=</span><span class=s2>&quot;min_volatility&quot;</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=go>{&#39;MSFT&#39;: 0.22228, &#39;AMZN&#39;: 0.15685, &#39;KO&#39;: 0.28712, &#39;MA&#39;: 0.33375}</span>
</span></code></pre></div> <p>Adding custom constraints:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=gp>... </span>    <span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>),</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=gp>... </span>    <span class=n>constraints</span><span class=o>=</span><span class=p>[</span><span class=k>lambda</span> <span class=n>w</span><span class=p>:</span> <span class=n>w</span><span class=p>[</span><span class=n>data</span><span class=o>.</span><span class=n>symbols</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=s2>&quot;MSFT&quot;</span><span class=p>)]</span> <span class=o>&lt;=</span> <span class=mf>0.1</span><span class=p>]</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=go>{&#39;MSFT&#39;: 0.1, &#39;AMZN&#39;: 0.10676, &#39;KO&#39;: 0.04341, &#39;MA&#39;: 0.74982}</span>
</span></code></pre></div> <p>Optimizing towards a custom convex objective (to add a non-convex objective, set <code>target_is_convex</code> to False):</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span><span class=w> </span><span class=nn>cvxpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>cp</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>logarithmic_barrier_objective</span><span class=p>(</span><span class=n>w</span><span class=p>,</span> <span class=n>cov_matrix</span><span class=p>,</span> <span class=n>k</span><span class=o>=</span><span class=mf>0.1</span><span class=p>):</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=gp>... </span>    <span class=n>log_sum</span> <span class=o>=</span> <span class=n>cp</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=n>cp</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>w</span><span class=p>))</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=gp>... </span>    <span class=n>var</span> <span class=o>=</span> <span class=n>cp</span><span class=o>.</span><span class=n>quad_form</span><span class=p>(</span><span class=n>w</span><span class=p>,</span> <span class=n>cov_matrix</span><span class=p>)</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>var</span> <span class=o>-</span> <span class=n>k</span> <span class=o>*</span> <span class=n>log_sum</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pypfopt_optimize</span><span class=p>(</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=gp>... </span>    <span class=n>prices</span><span class=o>=</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>),</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=gp>... </span>    <span class=n>target</span><span class=o>=</span><span class=n>logarithmic_barrier_objective</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=go>{&#39;MSFT&#39;: 0.24595, &#39;AMZN&#39;: 0.23047, &#39;KO&#39;: 0.25862, &#39;MA&#39;: 0.26496}</span>
</span></code></pre></div> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_asset_classes>resolve_asset_classes <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L967-L1024 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_asset_classes title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>resolve_asset_classes</span><span class=p>(</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>    <span class=n>asset_classes</span><span class=p>,</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    <span class=n>columns</span><span class=p>,</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>    <span class=n>col_indices</span><span class=o>=</span><span class=kc>None</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve asset classes for Riskfolio-Lib.</p> <p>Converts various asset class specifications into a DataFrame accepted by Riskfolio-Lib.</p> <p>Supported formats:</p> <ul> <li>None: Uses the bottom-most level of <code>columns</code> as assets.</li> <li>Index: Each level in the index is treated as a different asset class set.</li> <li>Nested dict: Each sub-dict represents a different asset class set.</li> <li>Sequence of strings or ints: Matches items against level names in <code>columns</code>. If the columns have a single level or names are not found, the sequence is used directly as one asset class set named "Class".</li> <li>Sequence of dicts: Each dictionary becomes a row in the resulting DataFrame.</li> <li>DataFrame: First column contains assets and subsequent columns represent asset class sets (the target format accepted by Riskfolio-Lib).</li> </ul> <p><strong>Args</strong></p> <dl> <dt><strong><code>asset_classes</code></strong> :&ensp;<code>Union[None, Frame, Sequence]</code></dt> <dd>Asset class information in various supported formats.</dd> <dt><strong><code>columns</code></strong> :&ensp;<code>Index</code></dt> <dd>Index of columns from which asset classes are derived.</dd> <dt><strong><code>col_indices</code></strong> :&ensp;<code>Optional[Sequence[int]]</code></dt> <dd>Specific indices to select from the asset class data.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame formatted for Riskfolio-Lib containing asset classes.</dd> </dl> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If <code>asset_classes</code> is neither None nor a DataFrame, the bottom-most level in <code>columns</code> is renamed to "Assets" and becomes the first column of the new DataFrame.</p> </div> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_assets_constraints>resolve_assets_constraints <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1027-L1069 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_assets_constraints title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>resolve_assets_constraints</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>    <span class=n>constraints</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve asset constraints for Riskfolio-Lib.</p> <p>Converts the input constraints into a DataFrame matching the target format for asset constraints as required by Riskfolio-Lib. In addition to the <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.assets_constraints>target format</a>, a sequence of dictionaries is also accepted, with each dictionary representing a row in the DataFrame. Missing column names are automatically filled.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>constraints</code></strong> :&ensp;<code>Union[Frame, Sequence]</code></dt> <dd>Asset constraints provided as a DataFrame, dictionary, or list of dictionaries.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame structured for asset constraints in Riskfolio-Lib.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_assets_views>resolve_assets_views <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1112-L1154 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_assets_views title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>resolve_assets_views</span><span class=p>(</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>    <span class=n>views</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve asset views for Riskfolio-Lib.</p> <p>Converts the input asset views into a DataFrame that complies with the target format for asset views as required by Riskfolio-Lib. In addition to the <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.assets_views>target format</a>, a sequence of dictionaries is also accepted, with each dictionary representing a row in the DataFrame. Missing column names are automatically filled.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>views</code></strong> :&ensp;<code>Union[Frame, Sequence]</code></dt> <dd> <p>Asset views provided as a DataFrame, dictionary, or list of dictionaries.</p> <p>Each dictionary is converted to a row in a new DataFrame. Missing columns are auto-filled.</p> </dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame structured for asset views in Riskfolio-Lib.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_factors_constraints>resolve_factors_constraints <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1072-L1109 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_factors_constraints title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>resolve_factors_constraints</span><span class=p>(</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>    <span class=n>constraints</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve factors constraints for Riskfolio-Lib.</p> <p>Converts the input factor constraints into a DataFrame matching the target format for factors constraints as required by Riskfolio-Lib. In addition to the <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.factors_constraints>target format</a>, a sequence of dictionaries is also accepted, with each dictionary representing a row in the DataFrame. Missing column names are automatically filled.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>constraints</code></strong> :&ensp;<code>Union[Frame, Sequence]</code></dt> <dd>Factor constraints provided as a DataFrame, dictionary, or list of dictionaries.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame structured for factor constraints in Riskfolio-Lib.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_factors_views>resolve_factors_views <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1157-L1193 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_factors_views title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>resolve_factors_views</span><span class=p>(</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>    <span class=n>views</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve factors views for Riskfolio-Lib.</p> <p>Apart from the <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.factors_views>target format</a>, the input can also be provided as a sequence of dictionaries.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>views</code></strong> :&ensp;<code>Union[Frame, Sequence]</code></dt> <dd> <p>Factor views provided as a DataFrame, dictionary, or list of dictionaries.</p> <p>Each dictionary is converted to a row in a new DataFrame. Missing columns are auto-filled.</p> </dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>Resolved DataFrame formatted for Riskfolio-Lib.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_hrp_constraints>resolve_hrp_constraints <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1196-L1234 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_hrp_constraints title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>resolve_hrp_constraints</span><span class=p>(</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>    <span class=n>constraints</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve HRP constraints for Riskfolio-Lib.</p> <p>Apart from the <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.hrp_constraints>target format</a>, the input can also be provided as a sequence of dictionaries.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>constraints</code></strong> :&ensp;<code>Union[Frame, Sequence]</code></dt> <dd> <p>HRP constraints provided as a DataFrame, dictionary, or list of dictionaries.</p> <p>Each dictionary is converted to a row in a new DataFrame. Missing columns are auto-filled.</p> </dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>Resolved DataFrame formatted for Riskfolio-Lib.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_cov_matrix>resolve_pypfopt_cov_matrix <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L436-L512 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_cov_matrix title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>resolve_pypfopt_cov_matrix</span><span class=p>(</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>    <span class=n>cov_matrix</span><span class=o>=</span><span class=s1>&#39;ledoit_wolf&#39;</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve the covariance matrix.</p> <p>This function resolves the covariance matrix for portfolio optimization using pypfopt.</p> <p>Any provided function is invoked using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>cov_matrix</code></strong> :&ensp;<code>Union[Callable, AnyArray, str]</code></dt> <dd> <p>Covariance matrix indicator, function, or array.</p> <ul> <li>If an array, it is returned unchanged.</li> <li>If a callable, it is executed via <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</li> <li>If a string, it selects one of the following risk models:<ul> <li><code>sample_cov</code>: resolved from <code>pypfopt.risk_models.sample_cov</code></li> <li><code>semicovariance</code> or <code>semivariance</code>: resolved from <code>pypfopt.risk_models.semicovariance</code></li> <li><code>exp_cov</code>: resolved from <code>pypfopt.risk_models.exp_cov</code></li> <li><code>ledoit_wolf</code> or <code>ledoit_wolf_constant_variance</code>: resolved from <code>pypfopt.risk_models.CovarianceShrinkage.ledoit_wolf</code> with constant variance shrinkage</li> <li><code>ledoit_wolf_single_factor</code>: resolved from <code>pypfopt.risk_models.CovarianceShrinkage.ledoit_wolf</code> with single factor shrinkage</li> <li><code>ledoit_wolf_constant_correlation</code>: resolved from <code>pypfopt.risk_models.CovarianceShrinkage.ledoit_wolf</code> with constant correlation shrinkage</li> <li><code>oracle_approximating</code>: resolved from <code>pypfopt.risk_models.CovarianceShrinkage.ledoit_wolf</code> with oracle approximating shrinkage</li> </ul> </li> </ul> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for the covariance model function.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>AnyArray</code></dt> <dd>Computed covariance matrix.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_expected_returns>resolve_pypfopt_expected_returns <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L376-L433 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_expected_returns title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=n>resolve_pypfopt_expected_returns</span><span class=p>(</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>    <span class=n>expected_returns</span><span class=o>=</span><span class=s1>&#39;mean_historical_return&#39;</span><span class=p>,</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve the expected returns.</p> <p>This function resolves the expected returns for portfolio optimization using pypfopt.</p> <p>Any provided function is invoked using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>expected_returns</code></strong> :&ensp;<code>Union[Callable, AnyArray, str]</code></dt> <dd> <p>Expected returns indicator, function, or array.</p> <ul> <li>If an array, it is returned unchanged.</li> <li>If a callable, it is executed via <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</li> <li>If a string, it selects one of the following models:<ul> <li><code>mean_historical_return</code>: resolved from <code>pypfopt.expected_returns.mean_historical_return</code></li> <li><code>ema_historical_return</code>: resolved from <code>pypfopt.expected_returns.ema_historical_return</code></li> <li><code>capm_return</code>: resolved from <code>pypfopt.expected_returns.capm_return</code></li> <li><code>bl_returns</code>: resolved from <code>pypfopt.black_litterman.BlackLittermanModel.bl_returns</code></li> </ul> </li> </ul> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for the expected returns function.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>AnyArray</code></dt> <dd>Computed expected returns.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L360-L373 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=n>resolve_pypfopt_func_call</span><span class=p>(</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>    <span class=n>pypfopt_func</span><span class=p>,</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve keyword arguments and invoke a PyPortfolioOpt function.</p> <p>This function resolves parameters by using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs>resolve_pypfopt_func_kwargs</a> with the supplied <code>kwargs</code> and then calls <code>pypfopt_func</code> with the resolved arguments.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>pypfopt_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>PyPortfolioOpt function to be called.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs>resolve_pypfopt_func_kwargs</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Any</code></dt> <dd>Result of calling <code>pypfopt_func</code> with the resolved keyword arguments.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs>resolve_pypfopt_func_kwargs <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L139-L357 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_kwargs title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>resolve_pypfopt_func_kwargs</span><span class=p>(</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>    <span class=n>pypfopt_func</span><span class=p>,</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    <span class=n>cache</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>    <span class=n>var_kwarg_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>    <span class=n>used_arg_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve keyword arguments for a PyPortfolioOpt optimization function.</p> <p>Parses the signature of <code>pypfopt_func</code> and, for each accepted parameter, checks for a matching name in <code>kwargs</code>. If a corresponding argument is not provided, the function attempts to resolve it using other inputs or by invoking additional optimization functions.</p> <p>The <code>frequency</code> parameter is resolved using the global <code>freq</code> and <code>year_freq</code> values via <code>ReturnsAccessor.get_ann_factor</code>.</p> <p>Any argument in <code>kwargs</code> may be wrapped with <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.pfopt_func_dict title=vectorbtpro.portfolio.pfopt.base.pfopt_func_dict>pfopt_func_dict</a> to specify function-specific values.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>pypfopt_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>PyPortfolioOpt optimization function whose signature is parsed.</dd> <dt><strong><code>cache</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Cache dictionary for storing resolved arguments.</dd> <dt><strong><code>var_kwarg_names</code></strong> :&ensp;<code>Optional[Iterable[str]]</code></dt> <dd>Names of variable keyword arguments to process.</dd> <dt><strong><code>used_arg_names</code></strong> :&ensp;<code>Optional[Set[str]]</code></dt> <dd>Set accumulating the names of arguments that have been resolved.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for parameter resolution.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Kwargs</code></dt> <dd>Dictionary of resolved keyword arguments for use with <code>pypfopt_func</code>.</dd> </dl> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When using custom functions, ensure that their parameters are explicitly defined (i.e., avoid variable arguments) and adhere to PyPortfolioOpt's naming conventions.</p> <p>Functions <code>market_implied_prior_returns</code> and <code>BlackLittermanModel.bl_weights</code> require <code>risk_aversion</code>, which differs from similarly named parameters in other functions. To configure it, pass <code>delta</code>.</p> </div> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer>resolve_pypfopt_optimizer <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L515-L592 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_optimizer title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=n>resolve_pypfopt_optimizer</span><span class=p>(</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>    <span class=n>optimizer</span><span class=o>=</span><span class=s1>&#39;efficient_frontier&#39;</span><span class=p>,</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=p>)</span>
</span></code></pre></div> <p>Resolve the PyPortfolioOpt optimizer.</p> <p>Resolves the given optimizer to a <code>pypfopt.base_optimizer.BaseOptimizer</code> instance based on the provided input. The optimizer can be specified as an instance, callable, subclass, or a recognized string identifier.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>optimizer</code></strong> :&ensp;<code>Union[Callable, BaseOptimizerT, str]</code></dt> <dd> <p>Either an instance, callable, or subclass of <code>pypfopt.base_optimizer.BaseOptimizer</code>.</p> <p>Alternatively, one of the following string identifiers is supported:</p> <ul> <li>'efficient_frontier': <code>pypfopt.efficient_frontier.EfficientFrontier</code></li> <li>'efficient_cdar': <code>pypfopt.efficient_frontier.EfficientCDaR</code></li> <li>'efficient_cvar': <code>pypfopt.efficient_frontier.EfficientCVaR</code></li> <li>'efficient_semivariance': <code>pypfopt.efficient_frontier.EfficientSemivariance</code></li> <li>'black_litterman' or 'bl': <code>pypfopt.black_litterman.BlackLittermanModel</code></li> <li>'hierarchical_portfolio', 'hrpopt', or 'hrp': <code>pypfopt.hierarchical_portfolio.HRPOpt</code></li> <li>'cla': <code>pypfopt.cla.CLA</code></li> </ul> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for the optimization function.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>BaseOptimizer</code></dt> <dd>Instance of <code>pypfopt.base_optimizer.BaseOptimizer</code>.</dd> </dl> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Resolution is delegated to <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call title=vectorbtpro.portfolio.pfopt.base.resolve_pypfopt_func_call>resolve_pypfopt_func_call</a>.</p> </div> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.resolve_riskfolio_func_kwargs>resolve_riskfolio_func_kwargs <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L929-L964 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.resolve_riskfolio_func_kwargs title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=n>resolve_riskfolio_func_kwargs</span><span class=p>(</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>    <span class=n>riskfolio_func</span><span class=p>,</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>    <span class=n>unused_arg_names</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>    <span class=n>func_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=p>)</span>
</span></code></pre></div> <p>Select keyword arguments for a given riskfolio function.</p> <p>Extracts keyword arguments from the provided input that match the parameters of <code>riskfolio_func</code>. If additional function-specific keyword arguments are provided via <code>func_kwargs</code>, they are merged.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>riskfolio_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>Riskfolio function to filter keyword arguments for.</dd> <dt><strong><code>unused_arg_names</code></strong> :&ensp;<code>Optional[Set[str]]</code></dt> <dd> <p>Set of argument names to be excluded.</p> <p>Matching keys found in kwargs will be removed.</p> </dd> <dt><strong><code>func_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Keyword arguments specific to the riskfolio function.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments to be filtered.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Kwargs</code></dt> <dd>Dictionary containing the keyword arguments relevant to <code>riskfolio_func</code>.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.riskfolio_optimize>riskfolio_optimize <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1237-L1833 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.riskfolio_optimize title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>    <span class=n>nan_to_zero</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>    <span class=n>dropna_rows</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>    <span class=n>dropna_cols</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>    <span class=n>dropna_any</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>    <span class=n>factors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>    <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>    <span class=n>port_cls</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>    <span class=n>opt_method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>    <span class=n>stats_methods</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>    <span class=n>model</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a>    <span class=n>asset_classes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a>    <span class=n>constraints_method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a>    <span class=n>constraints</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a>    <span class=n>views_method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a>    <span class=n>views</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a>    <span class=n>solvers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a>    <span class=n>sol_params</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a>    <span class=n>freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a>    <span class=n>year_freq</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a>    <span class=n>pre_opt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23 href=#__codelineno-21-23></a>    <span class=n>pre_opt_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24 href=#__codelineno-21-24></a>    <span class=n>pre_opt_as_w</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-25><a id=__codelineno-21-25 name=__codelineno-21-25 href=#__codelineno-21-25></a>    <span class=n>func_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-26><a id=__codelineno-21-26 name=__codelineno-21-26 href=#__codelineno-21-26></a>    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-27><a id=__codelineno-21-27 name=__codelineno-21-27 href=#__codelineno-21-27></a>    <span class=n>return_port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-28><a id=__codelineno-21-28 name=__codelineno-21-28 href=#__codelineno-21-28></a>    <span class=n>ignore_errors</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-21-29><a id=__codelineno-21-29 name=__codelineno-21-29 href=#__codelineno-21-29></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-21-30><a id=__codelineno-21-30 name=__codelineno-21-30 href=#__codelineno-21-30></a><span class=p>)</span>
</span></code></pre></div> <p>Get allocation using Riskfolio-Lib.</p> <p>Compute asset allocation weights using the Riskfolio-Lib library. This function resolves default settings, prepares asset returns, optionally pre-optimizes the portfolio, builds the portfolio, applies constraints and views, runs statistics, and finally performs the optimization.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>returns</code></strong> :&ensp;<code>AnyArray2d</code></dt> <dd>2D array or DataFrame containing asset returns.</dd> <dt><strong><code>nan_to_zero</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to convert NaN values to zero.</dd> <dt><strong><code>dropna_rows</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd> <p>Whether to drop rows with all NaN/zero values.</p> <p>Applied only if <code>nan_to_zero</code> is True or <code>dropna_any</code> is False.</p> </dd> <dt><strong><code>dropna_cols</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to drop columns with all NaN/zero values.</dd> <dt><strong><code>dropna_any</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd> <p>Whether to drop any NaN values.</p> <p>Applied only if <code>nan_to_zero</code> is False.</p> </dd> <dt><strong><code>factors</code></strong> :&ensp;<code>Optional[AnyArray2d]</code></dt> <dd>2D array or DataFrame containing factor values.</dd> <dt><strong><code>port</code></strong> :&ensp;<code>Optional[Union[RPortfolio, RHCPortfolio]]</code></dt> <dd>Already initialized portfolio.</dd> <dt><strong><code>port_cls</code></strong> :&ensp;<code>Optional[Union[None, str, Type]]</code></dt> <dd> <p>Portfolio class.</p> <p>Supported values:</p> <ul> <li>None: Uses <code>Portfolio</code></li> <li>"hc" or "hcportfolio" (case-insensitive): Uses <code>HCPortfolio</code></li> <li>Other string: Uses attribute of <code>riskfolio</code></li> <li>Class: Uses a custom class</li> </ul> </dd> <dt><strong><code>opt_method</code></strong> :&ensp;<code>Optional[Union[None, str, Callable]]</code></dt> <dd> <p>Optimization method.</p> <p>Supported values:</p> <ul> <li>None or "optimization": Uses <code>port.optimization</code></li> <li>"wc" or "wc_optimization": Uses <code>port.wc_optimization</code></li> <li>"rp" or "rp_optimization": Uses <code>port.rp_optimization</code></li> <li>"rrp" or "rrp_optimization": Uses <code>port.rrp_optimization</code></li> <li>"owa" or "owa_optimization": Uses <code>port.owa_optimization</code></li> <li>String: Uses the corresponding attribute of <code>port</code></li> <li>Callable: Custom optimization function</li> </ul> </dd> <dt><strong><code>stats_methods</code></strong> :&ensp;<code>Optional[Sequence[str]]</code></dt> <dd> <p>Sequence of stats methods to call before optimization.</p> <p>If not provided, the sequence is automatically populated based on <code>opt_method</code> and <code>model</code>. Additionally, functions with names ending in "_stats" from <code>func_kwargs</code> may be added.</p> </dd> <dt><strong><code>model</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd>Model used to optimize the portfolio.</dd> <dt><strong><code>asset_classes</code></strong> :&ensp;<code>Optional[Union[None, Frame, Sequence]]</code></dt> <dd> <p>Asset classes matrix.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_asset_classes title=vectorbtpro.portfolio.pfopt.base.resolve_asset_classes>resolve_asset_classes</a> for possible formats.</p> </dd> <dt><strong><code>constraints_method</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd> <p>Constraints method.</p> <p>Supported values:</p> <ul> <li>"assets" or "assets_constraints": Uses <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.assets_constraints>assets constraints</a></li> <li>"factors" or "factors_constraints": Uses <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.factors_constraints>factors constraints</a></li> <li>"hrp" or "hrp_constraints": Uses <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.hrp_constraints>HRP constraints</a></li> </ul> <p>If None and a <code>Portfolio</code> is used, factors constraints are applied if <code>factors_stats</code> is used; otherwise, assets constraints are applied. For <code>HCPortfolio</code>, HRP constraints are used.</p> </dd> <dt><strong><code>constraints</code></strong> :&ensp;<code>Union[None, Frame, Sequence]</code></dt> <dd> <p>Constraints matrix.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_assets_constraints title=vectorbtpro.portfolio.pfopt.base.resolve_assets_constraints>resolve_assets_constraints</a> for assets constraints formats, <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_factors_constraints title=vectorbtpro.portfolio.pfopt.base.resolve_factors_constraints>resolve_factors_constraints</a> for factors constraints formats, and <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_hrp_constraints title=vectorbtpro.portfolio.pfopt.base.resolve_hrp_constraints>resolve_hrp_constraints</a> for HRP constraints formats.</p> </dd> <dt><strong><code>views_method</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd> <p>Views method.</p> <p>Supported values:</p> <ul> <li>"assets" or "assets_views": Uses <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.assets_views>assets views</a></li> <li>"factors" or "factors_views": Uses <a href=https://riskfolio-lib.readthedocs.io/en/latest/constraints.html#ConstraintsFunctions.factors_views>factors views</a></li> </ul> <p>If None, defaults to factors views if "blfactors_stats" is present; otherwise, assets views.</p> </dd> <dt><strong><code>views</code></strong> :&ensp;<code>Union[None, Frame, Sequence]</code></dt> <dd> <p>Views matrix.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_assets_views title=vectorbtpro.portfolio.pfopt.base.resolve_assets_views>resolve_assets_views</a> for assets views formats and <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_factors_views title=vectorbtpro.portfolio.pfopt.base.resolve_factors_views>resolve_factors_views</a> for factors views formats.</p> </dd> <dt><strong><code>solvers</code></strong> :&ensp;<code>Optional[Sequence[str]]</code></dt> <dd>Solvers.</dd> <dt><strong><code>sol_params</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Solver parameters.</dd> <dt><strong><code>freq</code></strong> :&ensp;<code>Optional[FrequencyLike]</code></dt> <dd> <p>Frequency of the index (e.g., "daily", "15 min", "index_mean").</p> <p>Required when using views. See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/datetime_/#vectorbtpro.utils.datetime_.infer_index_freq title=vectorbtpro.utils.datetime_.infer_index_freq>infer_index_freq</a>.</p> </dd> <dt><strong><code>year_freq</code></strong> :&ensp;<code>Optional[FrequencyLike]</code></dt> <dd> <p>Year frequency for annualization (e.g., "252 days", "auto").</p> <p>Required when using views.</p> </dd> <dt><strong><code>pre_opt</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to pre-optimize the portfolio using <code>pre_opt_kwargs</code>.</dd> <dt><strong><code>pre_opt_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for pre-optimization.</p> <p>Passed to a recursive call of <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.riskfolio_optimize title=vectorbtpro.portfolio.pfopt.base.riskfolio_optimize>riskfolio_optimize</a>.</p> </dd> <dt><strong><code>pre_opt_as_w</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to use the weights from pre-optimization in subsequent optimization.</dd> <dt><strong><code>func_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for function calls.</p> <p>Wrapped with <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.pfopt_func_dict title=vectorbtpro.portfolio.pfopt.base.pfopt_func_dict>pfopt_func_dict</a> and used to override or add parameters.</p> </dd> <dt><strong><code>silence_warnings</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Flag to suppress warning messages.</dd> <dt><strong><code>return_port</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to return the portfolio along with the allocation weights.</dd> <dt><strong><code>ignore_errors</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd>Whether to ignore errors and return an empty dictionary.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for Riskfolio-Lib functions through <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.resolve_riskfolio_func_kwargs title=vectorbtpro.portfolio.pfopt.base.resolve_riskfolio_func_kwargs>resolve_riskfolio_func_kwargs</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Union[Dict[str, float], Tuple[Dict[str, float], Union[RPortfolio, RHCPortfolio]]]</code></dt> <dd> <p>Allocation weights as a dictionary mapping asset names to weights, or a tuple of the weights and the portfolio if <code>return_port</code> is True.</p> </dd> </dl> <div class="admonition info"> <p class=admonition-title>Info</p> <p>For default settings, see <code>riskfolio</code> in <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.pfopt title=vectorbtpro._settings.pfopt>pfopt</a>.</p> </div> <p><strong>Examples</strong></p> <p>Classic Mean Risk Optimization:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>([</span><span class=s2>&quot;MSFT&quot;</span><span class=p>,</span> <span class=s2>&quot;AMZN&quot;</span><span class=p>,</span> <span class=s2>&quot;KO&quot;</span><span class=p>,</span> <span class=s2>&quot;MA&quot;</span><span class=p>])</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=gp>&gt;&gt;&gt; </span><span class=n>returns</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>to_returns</span><span class=p>()</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>100%</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=gp>... </span>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=gp>... </span>    <span class=n>method_mu</span><span class=o>=</span><span class=s1>&#39;hist&#39;</span><span class=p>,</span> <span class=n>method_cov</span><span class=o>=</span><span class=s1>&#39;hist&#39;</span><span class=p>,</span> <span class=n>d</span><span class=o>=</span><span class=mf>0.94</span><span class=p>,</span>  <span class=c1># assets_stats</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=gp>... </span>    <span class=n>model</span><span class=o>=</span><span class=s1>&#39;Classic&#39;</span><span class=p>,</span> <span class=n>rm</span><span class=o>=</span><span class=s1>&#39;MV&#39;</span><span class=p>,</span> <span class=n>obj</span><span class=o>=</span><span class=s1>&#39;Sharpe&#39;</span><span class=p>,</span> <span class=n>hist</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>rf</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>l</span><span class=o>=</span><span class=mi>0</span>  <span class=c1># optimization</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=go>{&#39;MSFT&#39;: 0.26297126323056036,</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=go> &#39;AMZN&#39;: 0.13984467450137006,</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=go> &#39;KO&#39;: 0.35870315943426767,</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=go> &#39;MA&#39;: 0.238480902833802}</span>
</span></code></pre></div> <p>The same by splitting arguments:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=gp>... </span>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=gp>... </span>    <span class=n>func_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=gp>... </span>        <span class=n>assets_stats</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>method_mu</span><span class=o>=</span><span class=s1>&#39;hist&#39;</span><span class=p>,</span> <span class=n>method_cov</span><span class=o>=</span><span class=s1>&#39;hist&#39;</span><span class=p>,</span> <span class=n>d</span><span class=o>=</span><span class=mf>0.94</span><span class=p>),</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=gp>... </span>        <span class=n>optimization</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s1>&#39;Classic&#39;</span><span class=p>,</span> <span class=n>rm</span><span class=o>=</span><span class=s1>&#39;MV&#39;</span><span class=p>,</span> <span class=n>obj</span><span class=o>=</span><span class=s1>&#39;Sharpe&#39;</span><span class=p>,</span> <span class=n>hist</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>rf</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>l</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=gp>... </span>    <span class=p>)</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=go>{&#39;MSFT&#39;: 0.26297126323056036,</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=go> &#39;AMZN&#39;: 0.13984467450137006,</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=go> &#39;KO&#39;: 0.35870315943426767,</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=go> &#39;MA&#39;: 0.238480902833802}</span>
</span></code></pre></div> <p>Asset constraints:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=gp>... </span>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=gp>... </span>    <span class=n>constraints</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=gp>... </span>        <span class=p>{</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=gp>... </span>            <span class=s2>&quot;Type&quot;</span><span class=p>:</span> <span class=s2>&quot;Assets&quot;</span><span class=p>,</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=gp>... </span>            <span class=s2>&quot;Position&quot;</span><span class=p>:</span> <span class=s2>&quot;MSFT&quot;</span><span class=p>,</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=gp>... </span>            <span class=s2>&quot;Sign&quot;</span><span class=p>:</span> <span class=s2>&quot;&lt;=&quot;</span><span class=p>,</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=gp>... </span>            <span class=s2>&quot;Weight&quot;</span><span class=p>:</span> <span class=mf>0.01</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=gp>... </span>        <span class=p>}</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=gp>... </span>    <span class=p>]</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=go>{&#39;MSFT&#39;: 0.009999990814976588,</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a><span class=go> &#39;AMZN&#39;: 0.19788481506569947,</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a><span class=go> &#39;KO&#39;: 0.4553600308839969,</span>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=go> &#39;MA&#39;: 0.336755163235327}</span>
</span></code></pre></div> <p>Asset class constraints:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=gp>... </span>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=gp>... </span>    <span class=n>asset_classes</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;C1&quot;</span><span class=p>,</span> <span class=s2>&quot;C1&quot;</span><span class=p>,</span> <span class=s2>&quot;C2&quot;</span><span class=p>,</span> <span class=s2>&quot;C2&quot;</span><span class=p>],</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=gp>... </span>    <span class=n>constraints</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=gp>... </span>        <span class=p>{</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=gp>... </span>            <span class=s2>&quot;Type&quot;</span><span class=p>:</span> <span class=s2>&quot;Classes&quot;</span><span class=p>,</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=gp>... </span>            <span class=s2>&quot;Set&quot;</span><span class=p>:</span> <span class=s2>&quot;Class&quot;</span><span class=p>,</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=gp>... </span>            <span class=s2>&quot;Position&quot;</span><span class=p>:</span> <span class=s2>&quot;C1&quot;</span><span class=p>,</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=gp>... </span>            <span class=s2>&quot;Sign&quot;</span><span class=p>:</span> <span class=s2>&quot;&lt;=&quot;</span><span class=p>,</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=gp>... </span>            <span class=s2>&quot;Weight&quot;</span><span class=p>:</span> <span class=mf>0.1</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a><span class=gp>... </span>        <span class=p>}</span>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=gp>... </span>    <span class=p>]</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=go>{&#39;MSFT&#39;: 0.03501297245802569,</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=go> &#39;AMZN&#39;: 0.06498702655063979,</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=go> &#39;KO&#39;: 0.4756624658301967,</span>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a><span class=go> &#39;MA&#39;: 0.4243375351611379}</span>
</span></code></pre></div> <p>Hierarchical Risk Parity (HRP) Portfolio Optimization:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>riskfolio_optimize</span><span class=p>(</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=gp>... </span>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=gp>... </span>    <span class=n>port_cls</span><span class=o>=</span><span class=s2>&quot;HCPortfolio&quot;</span><span class=p>,</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=gp>... </span>    <span class=n>model</span><span class=o>=</span><span class=s1>&#39;HRP&#39;</span><span class=p>,</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=gp>... </span>    <span class=n>codependence</span><span class=o>=</span><span class=s1>&#39;pearson&#39;</span><span class=p>,</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=gp>... </span>    <span class=n>rm</span><span class=o>=</span><span class=s1>&#39;MV&#39;</span><span class=p>,</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=gp>... </span>    <span class=n>rf</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=gp>... </span>    <span class=n>linkage</span><span class=o>=</span><span class=s1>&#39;single&#39;</span><span class=p>,</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=gp>... </span>    <span class=n>max_k</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=gp>... </span>    <span class=n>leaf_order</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=go>{&#39;MSFT&#39;: 0.19091632057853536,</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=go> &#39;AMZN&#39;: 0.11069893826556164,</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a><span class=go> &#39;KO&#39;: 0.28589872132122485,</span>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=go> &#39;MA&#39;: 0.41248601983467814}</span>
</span></code></pre></div> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.select_pfopt_func_kwargs>select_pfopt_func_kwargs <span class=dobjtype>function</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L96-L136 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.select_pfopt_func_kwargs title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=n>select_pfopt_func_kwargs</span><span class=p>(</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>    <span class=n>pypfopt_func</span><span class=p>,</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>    <span class=n>kwargs</span><span class=o>=</span><span class=kc>None</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=p>)</span>
</span></code></pre></div> <p>Select keyword arguments corresponding to <code>pypfopt_func</code>.</p> <p>Determines and returns a dictionary of keyword arguments intended for the provided <code>pypfopt_func</code> based on the structure of <code>kwargs</code>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>pypfopt_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>Function for which to select keyword arguments.</dd> <dt><strong><code>kwargs</code></strong> :&ensp;<code>Union[None, Kwargs, pfopt_func_dict]</code></dt> <dd>Dictionary containing keyword arguments for one or multiple functions.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Kwargs</code></dt> <dd>Dictionary of keyword arguments for <code>pypfopt_func</code>.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1842-L4187 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=n>PortfolioOptimizer</span><span class=p>(</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>    <span class=n>alloc_records</span><span class=p>,</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>    <span class=n>allocations</span><span class=p>,</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=p>)</span>
</span></code></pre></div> <p>Class that exposes methods for generating allocations.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>alloc_records</code></strong> :&ensp;<code>Union[AllocRanges, AllocPoints]</code></dt> <dd>Allocation records associated with the portfolio.</dd> <dt><strong><code>allocations</code></strong> :&ensp;<code>Array2d</code></dt> <dd>2D array containing allocation values.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/generic/analyzable/#vectorbtpro.generic.analyzable.Analyzable title=vectorbtpro.generic.analyzable.Analyzable>Analyzable</a>.</dd> </dl> <p><strong>Superclasses</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/analyzable/#vectorbtpro.generic.analyzable.Analyzable title=vectorbtpro.generic.analyzable.Analyzable>Analyzable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin title=vectorbtpro.utils.attr_.AttrResolverMixin>AttrResolverMixin</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base title=vectorbtpro.utils.base.Base>Base</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/caching/#vectorbtpro.utils.caching.Cacheable title=vectorbtpro.utils.caching.Cacheable>Cacheable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/chaining/#vectorbtpro.utils.chaining.Chainable title=vectorbtpro.utils.chaining.Chainable>Chainable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/checks/#vectorbtpro.utils.checks.Comparable title=vectorbtpro.utils.checks.Comparable>Comparable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured title=vectorbtpro.utils.config.Configured>Configured</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.ExtPandasIndexer title=vectorbtpro.base.indexing.ExtPandasIndexer>ExtPandasIndexer</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings title=vectorbtpro.utils.config.HasSettings>HasSettings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper title=vectorbtpro.base.wrapping.HasWrapper>HasWrapper</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier title=vectorbtpro.base.indexes.IndexApplier>IndexApplier</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.IndexingBase title=vectorbtpro.base.indexing.IndexingBase>IndexingBase</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.ItemParamable title=vectorbtpro.utils.params.ItemParamable>ItemParamable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Itemable title=vectorbtpro.utils.params.Itemable>Itemable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PandasIndexer title=vectorbtpro.base.indexing.PandasIndexer>PandasIndexer</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Paramable title=vectorbtpro.utils.params.Paramable>Paramable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable title=vectorbtpro.utils.pickling.Pickleable>Pickleable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin title=vectorbtpro.generic.plots_builder.PlotsBuilderMixin>PlotsBuilderMixin</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified title=vectorbtpro.utils.formatting.Prettified>Prettified</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin title=vectorbtpro.generic.stats_builder.StatsBuilderMixin>StatsBuilderMixin</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping title=vectorbtpro.base.wrapping.Wrapping>Wrapping</a></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.cls_dir title=vectorbtpro.generic.analyzable.Analyzable.cls_dir>Analyzable.cls_dir</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.column_only_select title=vectorbtpro.generic.analyzable.Analyzable.column_only_select>Analyzable.column_only_select</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.config title=vectorbtpro.generic.analyzable.Analyzable.config>Analyzable.config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.group_select title=vectorbtpro.generic.analyzable.Analyzable.group_select>Analyzable.group_select</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PandasIndexer.iloc title=vectorbtpro.generic.analyzable.Analyzable.iloc>Analyzable.iloc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PandasIndexer.indexing_kwargs title=vectorbtpro.generic.analyzable.Analyzable.indexing_kwargs>Analyzable.indexing_kwargs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PandasIndexer.loc title=vectorbtpro.generic.analyzable.Analyzable.loc>Analyzable.loc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.range_only_select title=vectorbtpro.generic.analyzable.Analyzable.range_only_select>Analyzable.range_only_select</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.rec_state title=vectorbtpro.generic.analyzable.Analyzable.rec_state>Analyzable.rec_state</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.self_aliases title=vectorbtpro.generic.analyzable.Analyzable.self_aliases>Analyzable.self_aliases</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.unwrapped title=vectorbtpro.generic.analyzable.Analyzable.unwrapped>Analyzable.unwrapped</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.wrapper title=vectorbtpro.generic.analyzable.Analyzable.wrapper>Analyzable.wrapper</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.ExtPandasIndexer.xloc title=vectorbtpro.generic.analyzable.Analyzable.xloc>Analyzable.xloc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.deep_getattr title=vectorbtpro.generic.analyzable.Analyzable.deep_getattr>AttrResolverMixin.deep_getattr</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.post_resolve_attr title=vectorbtpro.generic.analyzable.Analyzable.post_resolve_attr>AttrResolverMixin.post_resolve_attr</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.pre_resolve_attr title=vectorbtpro.generic.analyzable.Analyzable.pre_resolve_attr>AttrResolverMixin.pre_resolve_attr</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.resolve_attr title=vectorbtpro.generic.analyzable.Analyzable.resolve_attr>AttrResolverMixin.resolve_attr</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.resolve_shortcut_attr title=vectorbtpro.generic.analyzable.Analyzable.resolve_shortcut_attr>AttrResolverMixin.resolve_shortcut_attr</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.chat title=vectorbtpro.generic.analyzable.Analyzable.chat>Base.chat</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_api title=vectorbtpro.generic.analyzable.Analyzable.find_api>Base.find_api</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_assets title=vectorbtpro.generic.analyzable.Analyzable.find_assets>Base.find_assets</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_docs title=vectorbtpro.generic.analyzable.Analyzable.find_docs>Base.find_docs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_examples title=vectorbtpro.generic.analyzable.Analyzable.find_examples>Base.find_examples</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_messages title=vectorbtpro.generic.analyzable.Analyzable.find_messages>Base.find_messages</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/caching/#vectorbtpro.utils.caching.Cacheable.get_ca_setup title=vectorbtpro.generic.analyzable.Analyzable.get_ca_setup>Cacheable.get_ca_setup</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/chaining/#vectorbtpro.utils.chaining.Chainable.chain title=vectorbtpro.generic.analyzable.Analyzable.chain>Chainable.chain</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/chaining/#vectorbtpro.utils.chaining.Chainable.pipe title=vectorbtpro.generic.analyzable.Analyzable.pipe>Chainable.pipe</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.copy title=vectorbtpro.generic.analyzable.Analyzable.copy>Configured.copy</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.equals title=vectorbtpro.generic.analyzable.Analyzable.equals>Configured.equals</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.get_init_arg_names title=vectorbtpro.generic.analyzable.Analyzable.get_init_arg_names>Configured.get_init_arg_names</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.get_writeable_attrs title=vectorbtpro.generic.analyzable.Analyzable.get_writeable_attrs>Configured.get_writeable_attrs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.prettify title=vectorbtpro.generic.analyzable.Analyzable.prettify>Configured.prettify</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.replace title=vectorbtpro.generic.analyzable.Analyzable.replace>Configured.replace</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.resolve_merge_kwargs title=vectorbtpro.generic.analyzable.Analyzable.resolve_merge_kwargs>Configured.resolve_merge_kwargs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.update_config title=vectorbtpro.generic.analyzable.Analyzable.update_config>Configured.update_config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.get_path_setting title=vectorbtpro.generic.analyzable.Analyzable.get_path_setting>HasSettings.get_path_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.get_path_settings title=vectorbtpro.generic.analyzable.Analyzable.get_path_settings>HasSettings.get_path_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.get_setting title=vectorbtpro.generic.analyzable.Analyzable.get_setting>HasSettings.get_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.get_settings title=vectorbtpro.generic.analyzable.Analyzable.get_settings>HasSettings.get_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.has_path_setting title=vectorbtpro.generic.analyzable.Analyzable.has_path_setting>HasSettings.has_path_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.has_path_settings title=vectorbtpro.generic.analyzable.Analyzable.has_path_settings>HasSettings.has_path_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.has_setting title=vectorbtpro.generic.analyzable.Analyzable.has_setting>HasSettings.has_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.has_settings title=vectorbtpro.generic.analyzable.Analyzable.has_settings>HasSettings.has_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.reset_settings title=vectorbtpro.generic.analyzable.Analyzable.reset_settings>HasSettings.reset_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.resolve_setting title=vectorbtpro.generic.analyzable.Analyzable.resolve_setting>HasSettings.resolve_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.resolve_settings_paths title=vectorbtpro.generic.analyzable.Analyzable.resolve_settings_paths>HasSettings.resolve_settings_paths</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.HasSettings.set_settings title=vectorbtpro.generic.analyzable.Analyzable.set_settings>HasSettings.set_settings</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.chunk title=vectorbtpro.generic.analyzable.Analyzable.chunk>HasWrapper.chunk</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.chunk_apply title=vectorbtpro.generic.analyzable.Analyzable.chunk_apply>HasWrapper.chunk_apply</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.get_item_keys title=vectorbtpro.generic.analyzable.Analyzable.get_item_keys>HasWrapper.get_item_keys</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.items title=vectorbtpro.generic.analyzable.Analyzable.items>HasWrapper.items</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.select_col title=vectorbtpro.generic.analyzable.Analyzable.select_col>HasWrapper.select_col</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.select_col_from_obj title=vectorbtpro.generic.analyzable.Analyzable.select_col_from_obj>HasWrapper.select_col_from_obj</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.should_wrap title=vectorbtpro.generic.analyzable.Analyzable.should_wrap>HasWrapper.should_wrap</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.split title=vectorbtpro.generic.analyzable.Analyzable.split>HasWrapper.split</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.split_apply title=vectorbtpro.generic.analyzable.Analyzable.split_apply>HasWrapper.split_apply</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.ungroup title=vectorbtpro.generic.analyzable.Analyzable.ungroup>HasWrapper.ungroup</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.add_levels title=vectorbtpro.generic.analyzable.Analyzable.add_levels>IndexApplier.add_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.drop_duplicate_levels title=vectorbtpro.generic.analyzable.Analyzable.drop_duplicate_levels>IndexApplier.drop_duplicate_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.drop_levels title=vectorbtpro.generic.analyzable.Analyzable.drop_levels>IndexApplier.drop_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.drop_redundant_levels title=vectorbtpro.generic.analyzable.Analyzable.drop_redundant_levels>IndexApplier.drop_redundant_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.rename_levels title=vectorbtpro.generic.analyzable.Analyzable.rename_levels>IndexApplier.rename_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.IndexApplier.select_levels title=vectorbtpro.generic.analyzable.Analyzable.select_levels>IndexApplier.select_levels</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.IndexingBase.indexing_setter_func title=vectorbtpro.generic.analyzable.Analyzable.indexing_setter_func>IndexingBase.indexing_setter_func</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Paramable.as_param title=vectorbtpro.generic.analyzable.Analyzable.as_param>ItemParamable.as_param</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PandasIndexer.xs title=vectorbtpro.generic.analyzable.Analyzable.xs>PandasIndexer.xs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_config title=vectorbtpro.generic.analyzable.Analyzable.decode_config>Pickleable.decode_config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_config_node title=vectorbtpro.generic.analyzable.Analyzable.decode_config_node>Pickleable.decode_config_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_toml title=vectorbtpro.generic.analyzable.Analyzable.decode_toml>Pickleable.decode_toml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_toml_node title=vectorbtpro.generic.analyzable.Analyzable.decode_toml_node>Pickleable.decode_toml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_yaml title=vectorbtpro.generic.analyzable.Analyzable.decode_yaml>Pickleable.decode_yaml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_yaml_node title=vectorbtpro.generic.analyzable.Analyzable.decode_yaml_node>Pickleable.decode_yaml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.dumps title=vectorbtpro.generic.analyzable.Analyzable.dumps>Pickleable.dumps</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_config title=vectorbtpro.generic.analyzable.Analyzable.encode_config>Pickleable.encode_config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_config_node title=vectorbtpro.generic.analyzable.Analyzable.encode_config_node>Pickleable.encode_config_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_toml title=vectorbtpro.generic.analyzable.Analyzable.encode_toml>Pickleable.encode_toml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_toml_node title=vectorbtpro.generic.analyzable.Analyzable.encode_toml_node>Pickleable.encode_toml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_yaml title=vectorbtpro.generic.analyzable.Analyzable.encode_yaml>Pickleable.encode_yaml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_yaml_node title=vectorbtpro.generic.analyzable.Analyzable.encode_yaml_node>Pickleable.encode_yaml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.file_exists title=vectorbtpro.generic.analyzable.Analyzable.file_exists>Pickleable.file_exists</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.getsize title=vectorbtpro.generic.analyzable.Analyzable.getsize>Pickleable.getsize</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.load title=vectorbtpro.generic.analyzable.Analyzable.load>Pickleable.load</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.loads title=vectorbtpro.generic.analyzable.Analyzable.loads>Pickleable.loads</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.modify_state title=vectorbtpro.generic.analyzable.Analyzable.modify_state>Pickleable.modify_state</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.resolve_file_path title=vectorbtpro.generic.analyzable.Analyzable.resolve_file_path>Pickleable.resolve_file_path</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.save title=vectorbtpro.generic.analyzable.Analyzable.save>Pickleable.save</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.build_subplots_doc title=vectorbtpro.generic.analyzable.Analyzable.build_subplots_doc>PlotsBuilderMixin.build_subplots_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.override_subplots_doc title=vectorbtpro.generic.analyzable.Analyzable.override_subplots_doc>PlotsBuilderMixin.override_subplots_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbtpro.generic.analyzable.Analyzable.plots>PlotsBuilderMixin.plots</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.resolve_plots_setting title=vectorbtpro.generic.analyzable.Analyzable.resolve_plots_setting>PlotsBuilderMixin.resolve_plots_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.pprint title=vectorbtpro.generic.analyzable.Analyzable.pprint>Prettified.pprint</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.prettify_doc title=vectorbtpro.generic.analyzable.Analyzable.prettify_doc>Prettified.prettify_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.build_metrics_doc title=vectorbtpro.generic.analyzable.Analyzable.build_metrics_doc>StatsBuilderMixin.build_metrics_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.override_metrics_doc title=vectorbtpro.generic.analyzable.Analyzable.override_metrics_doc>StatsBuilderMixin.override_metrics_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.resolve_stats_setting title=vectorbtpro.generic.analyzable.Analyzable.resolve_stats_setting>StatsBuilderMixin.resolve_stats_setting</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats title=vectorbtpro.generic.analyzable.Analyzable.stats>StatsBuilderMixin.stats</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.apply_to_index title=vectorbtpro.generic.analyzable.Analyzable.apply_to_index>Wrapping.apply_to_index</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.HasWrapper.regroup title=vectorbtpro.generic.analyzable.Analyzable.regroup>Wrapping.regroup</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_column_stack_kwargs title=vectorbtpro.generic.analyzable.Analyzable.resolve_column_stack_kwargs>Wrapping.resolve_column_stack_kwargs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_row_stack_kwargs title=vectorbtpro.generic.analyzable.Analyzable.resolve_row_stack_kwargs>Wrapping.resolve_row_stack_kwargs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/attr_/#vectorbtpro.utils.attr_.AttrResolverMixin.resolve_self title=vectorbtpro.generic.analyzable.Analyzable.resolve_self>Wrapping.resolve_self</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_stack_kwargs title=vectorbtpro.generic.analyzable.Analyzable.resolve_stack_kwargs>Wrapping.resolve_stack_kwargs</a></li> </ul> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.alloc_records>alloc_records <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3850-L3857 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.alloc_records title="Permanent link">&para;</a></h3> <p>Allocation records as ranges (<code>AllocRanges</code>) or points (<code>AllocPoints</code>).</p> <p><strong>Returns</strong></p> <dl> <dt><code>Union[AllocRanges, AllocPoints]</code></dt> <dd>Allocation records.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.allocations>allocations <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3885-L3892 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.allocations title="Permanent link">&para;</a></h3> <p>Allocation DataFrame computed using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.get_allocations title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.get_allocations>PortfolioOptimizer.get_allocations</a> with default arguments.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame of allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.column_stack>column_stack <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1938-L1999 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.column_stack title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>column_stack</span><span class=p>(</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>    <span class=o>*</span><span class=n>objs</span><span class=p>,</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=p>)</span>
</span></code></pre></div> <p>Stack multiple <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instances along columns.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.column_stack title=vectorbtpro.base.wrapping.ArrayWrapper.column_stack>ArrayWrapper.column_stack</a> to stack the wrappers.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>*objs</code></strong> :&ensp;<code>MaybeSequence[PortfolioOptimizer]</code></dt> <dd>(Additional) <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instances to stack.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for configuring the wrapper.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> through <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_column_stack_kwargs title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resolve_column_stack_kwargs>Wrapping.resolve_column_stack_kwargs</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_stack_kwargs title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resolve_stack_kwargs>Wrapping.resolve_stack_kwargs</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>New <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance with column-stacked attributes.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations>fill_allocations <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3904-L3956 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>fill_allocations</span><span class=p>(</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>    <span class=n>dropna</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>    <span class=n>fill_value</span><span class=o>=</span><span class=n>nan</span><span class=p>,</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>    <span class=n>wrap_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>    <span class=n>squeeze_groups</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=p>)</span>
</span></code></pre></div> <p>Fill an empty DataFrame with allocation values.</p> <p>If <code>dropna</code> is "all", rows with all NaN values are removed. If <code>dropna</code> is "head", rows prior to the first allocation are removed.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>dropna</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd>Strategy for handling missing allocations, either "all" or "head".</dd> <dt><strong><code>fill_value</code></strong> :&ensp;<code>Scalar</code></dt> <dd>Value used to fill empty DataFrame entries.</dd> <dt><strong><code>wrap_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for wrapping the result.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.wrap title=vectorbtpro.base.wrapping.ArrayWrapper.wrap>ArrayWrapper.wrap</a>.</p> </dd> <dt><strong><code>squeeze_groups</code></strong> :&ensp;<code>bool</code></dt> <dd>If True and the data's grouped ndim is 1, group levels are squeezed in the resulting DataFrame.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>DataFrame</code></dt> <dd>DataFrame with filled allocation values.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.filled_allocations>filled_allocations <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3958-L3966 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.filled_allocations title="Permanent link">&para;</a></h3> <p>Allocation DataFrame filled with allocation values by invoking <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations>PortfolioOptimizer.fill_allocations</a> with default parameters.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Frame</code></dt> <dd>DataFrame of filled allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>from_allocate_func <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2227-L2664 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>    <span class=n>allocate_func</span><span class=p>,</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>    <span class=n>every</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=n>normalize_every</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>    <span class=n>at_time</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>    <span class=n>start</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>    <span class=n>end</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>    <span class=n>exact_start</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>    <span class=n>on</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>    <span class=n>add_delta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>    <span class=n>kind</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>    <span class=n>indexer_method</span><span class=o>=</span><span class=s1>&#39;bfill&#39;</span><span class=p>,</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>    <span class=n>indexer_tolerance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>    <span class=n>skip_not_found</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>    <span class=n>index_points</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>    <span class=n>rescale_to</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a>    <span class=n>parameterizer</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>    <span class=n>param_search_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a>    <span class=n>name_tuple_to_str</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a>    <span class=n>group_configs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a>    <span class=n>pre_group_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a>    <span class=n>jitted_loop</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a>    <span class=n>jitted</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>    <span class=n>chunked</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-27><a id=__codelineno-32-27 name=__codelineno-32-27 href=#__codelineno-32-27></a>    <span class=n>template_context</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-28><a id=__codelineno-32-28 name=__codelineno-32-28 href=#__codelineno-32-28></a>    <span class=n>group_execute_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-29><a id=__codelineno-32-29 name=__codelineno-32-29 href=#__codelineno-32-29></a>    <span class=n>execute_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-30><a id=__codelineno-32-30 name=__codelineno-32-30 href=#__codelineno-32-30></a>    <span class=n>random_subset</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-31><a id=__codelineno-32-31 name=__codelineno-32-31 href=#__codelineno-32-31></a>    <span class=n>clean_index_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-32><a id=__codelineno-32-32 name=__codelineno-32-32 href=#__codelineno-32-32></a>    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-32-33><a id=__codelineno-32-33 name=__codelineno-32-33 href=#__codelineno-32-33></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-32-34><a id=__codelineno-32-34 name=__codelineno-32-34 href=#__codelineno-32-34></a><span class=p>)</span>
</span></code></pre></div> <p>Generate allocations from an allocation function.</p> <p>Generate allocation points based on dates and apply the allocation function at each point. This method uses <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.get_index_points title=vectorbtpro.base.wrapping.ArrayWrapper.get_index_points>ArrayWrapper.get_index_points</a> to determine allocation indices, making each point available as <code>index_point</code> in the template context. It creates allocation records of type <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/records/#vectorbtpro.portfolio.pfopt.records.AllocPoints title=vectorbtpro.portfolio.pfopt.records.AllocPoints>AllocPoints</a>, unlike <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a>.</p> <p>Templates can use the variables:</p> <ul> <li><code>i</code>: Allocation step.</li> <li><code>index_point</code>: Allocation index.</li> </ul> <p>If <code>jitted_loop</code> is True, see <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.allocate_meta_nb title=vectorbtpro.portfolio.pfopt.nb.allocate_meta_nb>allocate_meta_nb</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>cls</code></strong> :&ensp;<code>Type[PortfolioOptimizer]</code></dt> <dd>Class to instantiate.</dd> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>allocate_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>Function that computes allocations.</dd> <dt><strong><code>*args</code></strong></dt> <dd>Positional arguments for <code>allocate_func</code>.</dd> <dt><strong><code>every</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.every title=vectorbtpro.base.indexing.PointIdxr.every>PointIdxr.every</a>.</dd> <dt><strong><code>normalize_every</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.normalize_every title=vectorbtpro.base.indexing.PointIdxr.normalize_every>PointIdxr.normalize_every</a>.</dd> <dt><strong><code>at_time</code></strong> :&ensp;<code>Union[None, TimeLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.at_time title=vectorbtpro.base.indexing.PointIdxr.at_time>PointIdxr.at_time</a>.</dd> <dt><strong><code>start</code></strong> :&ensp;<code>Union[None, int, DatetimeLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.start title=vectorbtpro.base.indexing.PointIdxr.start>PointIdxr.start</a>.</dd> <dt><strong><code>end</code></strong> :&ensp;<code>Union[None, int, DatetimeLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.end title=vectorbtpro.base.indexing.PointIdxr.end>PointIdxr.end</a>.</dd> <dt><strong><code>exact_start</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.exact_start title=vectorbtpro.base.indexing.PointIdxr.exact_start>PointIdxr.exact_start</a>.</dd> <dt><strong><code>on</code></strong> :&ensp;<code>Union[None, int, DatetimeLike, IndexLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.on title=vectorbtpro.base.indexing.PointIdxr.on>PointIdxr.on</a>.</dd> <dt><strong><code>add_delta</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.add_delta title=vectorbtpro.base.indexing.PointIdxr.add_delta>PointIdxr.add_delta</a>.</dd> <dt><strong><code>kind</code></strong> :&ensp;<code>Union[None, str, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.kind title=vectorbtpro.base.indexing.PointIdxr.kind>PointIdxr.kind</a>.</dd> <dt><strong><code>indexer_method</code></strong> :&ensp;<code>Union[None, str, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.indexer_method title=vectorbtpro.base.indexing.PointIdxr.indexer_method>PointIdxr.indexer_method</a>.</dd> <dt><strong><code>indexer_tolerance</code></strong> :&ensp;<code>Union[None, str, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.indexer_tolerance title=vectorbtpro.base.indexing.PointIdxr.indexer_tolerance>PointIdxr.indexer_tolerance</a>.</dd> <dt><strong><code>skip_not_found</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.PointIdxr.skip_not_found title=vectorbtpro.base.indexing.PointIdxr.skip_not_found>PointIdxr.skip_not_found</a>.</dd> <dt><strong><code>index_points</code></strong> :&ensp;<code>Union[None, MaybeSequence[int], Param]</code></dt> <dd>Manually specified index points.</dd> <dt><strong><code>rescale_to</code></strong> :&ensp;<code>Union[None, Tuple[float, float], Param]</code></dt> <dd>Tuple specifying the rescaling range for allocations.</dd> <dt><strong><code>parameterizer</code></strong> :&ensp;<code>Optional[MaybeType[Parameterizer]]</code></dt> <dd> <p>Parameterizer class or instance for handling parameters.</p> <p>Defaults to <a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Parameterizer title=vectorbtpro.utils.params.Parameterizer>Parameterizer</a>.</p> </dd> <dt><strong><code>param_search_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for parameter search.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Parameterizer.find_params_in_obj title=vectorbtpro.utils.params.Parameterizer.find_params_in_obj>Parameterizer.find_params_in_obj</a>.</p> </dd> <dt><strong><code>name_tuple_to_str</code></strong> :&ensp;<code>Union[None, bool, Callable]</code></dt> <dd>Flag or function to convert name tuples to strings for the parameter index.</dd> <dt><strong><code>group_configs</code></strong> :&ensp;<code>Union[None, Dict[Hashable, Kwargs], Sequence[Kwargs]]</code></dt> <dd>Group configuration(s) for allocation.</dd> <dt><strong><code>pre_group_func</code></strong> :&ensp;<code>Optional[Callable]</code></dt> <dd>Function to preprocess and modify the group configuration.</dd> <dt><strong><code>jitted_loop</code></strong> :&ensp;<code>bool</code></dt> <dd>Flag indicating whether to use a JIT-compiled loop over allocation groups.</dd> <dt><strong><code>jitted</code></strong> :&ensp;<code>JittedOption</code></dt> <dd> <p>Option to control JIT compilation.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/jitting/#vectorbtpro.utils.jitting.resolve_jitted_option title=vectorbtpro.utils.jitting.resolve_jitted_option>resolve_jitted_option</a>.</p> </dd> <dt><strong><code>chunked</code></strong> :&ensp;<code>ChunkedOption</code></dt> <dd> <p>Option to control chunked processing.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/chunking/#vectorbtpro.utils.chunking.resolve_chunked_option title=vectorbtpro.utils.chunking.resolve_chunked_option>resolve_chunked_option</a>.</p> </dd> <dt><strong><code>template_context</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Additional context for template substitution.</dd> <dt><strong><code>group_execute_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for the execution handler of allocation groups.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute title=vectorbtpro.utils.execution.execute>execute</a>.</p> </dd> <dt><strong><code>execute_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for the execution handler.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute title=vectorbtpro.utils.execution.execute>execute</a>.</p> </dd> <dt><strong><code>random_subset</code></strong> :&ensp;<code>Optional[int]</code></dt> <dd> <p>Select a random subset of parameter combinations.</p> <p>Set the seed for reproducibility.</p> </dd> <dt><strong><code>clean_index_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for cleaning MultiIndex levels.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.clean_index title=vectorbtpro.base.indexes.clean_index>clean_index</a>.</p> </dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for configuring the wrapper.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <code>allocate_func</code>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of portfolio optimizer containing allocation points and allocations.</dd> </dl> <div class="admonition info"> <p class=admonition-title>Info</p> <p>For default settings, see <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.params title=vectorbtpro._settings.params>params</a>.</p> </div> <p><strong>Examples</strong></p> <p>Allocate uniformly every day:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;MSFT&quot;</span><span class=p>,</span> <span class=s2>&quot;AMZN&quot;</span><span class=p>,</span> <span class=s2>&quot;AAPL&quot;</span><span class=p>],</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2010-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>uniform_allocate_func</span><span class=p>(</span><span class=n>n_cols</span><span class=p>):</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>np</span><span class=o>.</span><span class=n>full</span><span class=p>(</span><span class=n>n_cols</span><span class=p>,</span> <span class=mi>1</span> <span class=o>/</span> <span class=n>n_cols</span><span class=p>)</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=gp>... </span>    <span class=n>uniform_allocate_func</span><span class=p>,</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=go>symbol                         MSFT      AMZN      AAPL</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a><span class=go>Date</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a><span class=go>2010-01-04 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a><span class=go>2010-01-05 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a><span class=go>2010-01-06 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-24><a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a><span class=go>2010-01-07 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-25><a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a><span class=go>2010-01-08 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-26><a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a><span class=go>...                             ...       ...       ...</span>
</span><span id=__span-33-27><a id=__codelineno-33-27 name=__codelineno-33-27 href=#__codelineno-33-27></a><span class=go>2019-12-24 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-28><a id=__codelineno-33-28 name=__codelineno-33-28 href=#__codelineno-33-28></a><span class=go>2019-12-26 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-29><a id=__codelineno-33-29 name=__codelineno-33-29 href=#__codelineno-33-29></a><span class=go>2019-12-27 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-30><a id=__codelineno-33-30 name=__codelineno-33-30 href=#__codelineno-33-30></a><span class=go>2019-12-30 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-31><a id=__codelineno-33-31 name=__codelineno-33-31 href=#__codelineno-33-31></a><span class=go>2019-12-31 00:00:00-05:00  0.333333  0.333333  0.333333</span>
</span><span id=__span-33-32><a id=__codelineno-33-32 name=__codelineno-33-32 href=#__codelineno-33-32></a>
</span><span id=__span-33-33><a id=__codelineno-33-33 name=__codelineno-33-33 href=#__codelineno-33-33></a><span class=go>[2516 rows x 3 columns]</span>
</span></code></pre></div> <p>Allocate randomly every first date of the year:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>random_allocate_func</span><span class=p>(</span><span class=n>n_cols</span><span class=p>):</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=gp>... </span>    <span class=n>weights</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=n>size</span><span class=o>=</span><span class=n>n_cols</span><span class=p>)</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>weights</span> <span class=o>/</span> <span class=n>weights</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=gp>... </span>    <span class=n>random_allocate_func</span><span class=p>,</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=gp>... </span>    <span class=n>every</span><span class=o>=</span><span class=s2>&quot;AS-JAN&quot;</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=go>symbol                         MSFT      AMZN      AAPL</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=go>Date</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=go>2011-01-03 00:00:00+00:00  0.160335  0.122434  0.717231</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=go>2012-01-03 00:00:00+00:00  0.071386  0.469564  0.459051</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=go>2013-01-02 00:00:00+00:00  0.125853  0.168480  0.705668</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=go>2014-01-02 00:00:00+00:00  0.391565  0.169205  0.439231</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=go>2015-01-02 00:00:00+00:00  0.115075  0.602844  0.282081</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a><span class=go>2016-01-04 00:00:00+00:00  0.244070  0.046547  0.709383</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=go>2017-01-03 00:00:00+00:00  0.316065  0.335000  0.348935</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a><span class=go>2018-01-02 00:00:00+00:00  0.422142  0.252154  0.325704</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=go>2019-01-02 00:00:00+00:00  0.368748  0.195147  0.436106</span>
</span></code></pre></div> <p>Specify index points manually:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=gp>... </span>    <span class=n>random_allocate_func</span><span class=p>,</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=gp>... </span>    <span class=n>index_points</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>]</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=go>symbol                         MSFT      AMZN      AAPL</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=go>Date</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=go>2010-01-04 00:00:00+00:00  0.257878  0.308287  0.433835</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=go>2010-02-17 00:00:00+00:00  0.090927  0.471980  0.437094</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=go>2010-03-31 00:00:00+00:00  0.395855  0.148516  0.455629</span>
</span></code></pre></div> <p>Specify allocations manually:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>manual_allocate_func</span><span class=p>(</span><span class=n>weights</span><span class=p>):</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>weights</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=gp>... </span>    <span class=n>manual_allocate_func</span><span class=p>,</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>RepEval</span><span class=p>(</span><span class=s2>&quot;weights[i]&quot;</span><span class=p>,</span> <span class=n>context</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>weights</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=gp>... </span>        <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=gp>... </span>        <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a><span class=gp>... </span>        <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=gp>... </span>    <span class=p>])),</span>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a><span class=gp>... </span>    <span class=n>index_points</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>]</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-36-14><a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-36-15><a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a><span class=go>symbol                     MSFT  AMZN  AAPL</span>
</span><span id=__span-36-16><a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a><span class=go>Date</span>
</span><span id=__span-36-17><a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a><span class=go>2010-01-04 00:00:00+00:00     1     0     0</span>
</span><span id=__span-36-18><a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=go>2010-02-17 00:00:00+00:00     0     1     0</span>
</span><span id=__span-36-19><a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a><span class=go>2010-03-31 00:00:00+00:00     0     0     1</span>
</span></code></pre></div> <p>Use Numba-compiled loop:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=gp>... </span><span class=k>def</span><span class=w> </span><span class=nf>random_allocate_func_nb</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>idx</span><span class=p>,</span> <span class=n>n_cols</span><span class=p>):</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=gp>... </span>    <span class=n>weights</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=n>n_cols</span><span class=p>)</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>weights</span> <span class=o>/</span> <span class=n>weights</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>(</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=gp>... </span>    <span class=n>random_allocate_func_nb</span><span class=p>,</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=gp>... </span>    <span class=n>index_points</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>],</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=gp>... </span>    <span class=n>jitted_loop</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=go>symbol                         MSFT      AMZN      AAPL</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=go>Date</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=go>2010-01-04 00:00:00+00:00  0.231925  0.351085  0.416990</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a><span class=go>2010-02-17 00:00:00+00:00  0.163050  0.070292  0.766658</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=go>2010-03-31 00:00:00+00:00  0.497465  0.500215  0.002319</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>There is little benefit to using a Numba-compiled loop unless rebalancing thousands of times. Typically, a regular Python loop with a Numba-compiled allocation function suffices.</p> </div> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations>from_allocations <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2666-L2736 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_allocations</span><span class=p>(</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>    <span class=n>allocations</span><span class=p>,</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=p>)</span>
</span></code></pre></div> <p>Pick allocations from a flexible array.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</p> <p>If <code>allocations</code> is a DataFrame, its index is used as labels. If it is a Series or dict, the allocation is applied uniformly across all indices. If the input is neither a DataFrame, Series, nor a NumPy array, an attempt is made to convert it to a NumPy array.</p> <p>If <code>allocations</code> is a NumPy array, the function uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.pick_idx_allocate_func_nb title=vectorbtpro.portfolio.pfopt.nb.pick_idx_allocate_func_nb>pick_idx_allocate_func_nb</a> with a Numba-compiled loop. Otherwise, a regular Python function is used, where a single element is applied to all rows and one-dimensional arrays are broadcast across columns.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>allocations</code></strong> :&ensp;<code>ArrayLike</code></dt> <dd>Flexible array containing allocation data.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with the specified allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_filled_allocations>from_filled_allocations <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2762-L2812 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_filled_allocations title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_filled_allocations</span><span class=p>(</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>    <span class=n>allocations</span><span class=p>,</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>    <span class=n>valid_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>    <span class=n>nonzero_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>    <span class=n>unique_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>    <span class=n>wrapper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=p>)</span>
</span></code></pre></div> <p>Pick allocations from an already filled allocation array.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a> with a Numba-compiled loop via <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.pick_point_allocate_func_nb title=vectorbtpro.portfolio.pfopt.nb.pick_point_allocate_func_nb>pick_point_allocate_func_nb</a>. Allocation points are extracted using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.get_alloc_points_nb title=vectorbtpro.portfolio.pfopt.nb.get_alloc_points_nb>get_alloc_points_nb</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>allocations</code></strong> :&ensp;<code>AnyArray2d</code></dt> <dd>Filled allocation array.</dd> <dt><strong><code>valid_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows where all values are NaN.</dd> <dt><strong><code>nonzero_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows where all values are zero.</dd> <dt><strong><code>unique_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows that are identical to the previous valid row.</dd> <dt><strong><code>wrapper</code></strong> :&ensp;<code>Optional[ArrayWrapper]</code></dt> <dd> <p>Array wrapper instance.</p> <p>Required if allocations is not a DataFrame.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with the filled allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_initial>from_initial <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2738-L2760 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_initial title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_initial</span><span class=p>(</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>    <span class=n>allocations</span><span class=p>,</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=p>)</span>
</span></code></pre></div> <p>Allocate allocations at the first index.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations>PortfolioOptimizer.from_allocations</a> with <code>on=0</code>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>allocations</code></strong> :&ensp;<code>ArrayLike</code></dt> <dd>Flexible array containing allocation data.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocations>PortfolioOptimizer.from_allocations</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with the initial allocation applied at the first index.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>from_optimize_func <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3260-L3782 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a>    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a>    <span class=n>every</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>    <span class=n>normalize_every</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>    <span class=n>split_every</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>    <span class=n>start_time</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>    <span class=n>end_time</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>    <span class=n>lookback_period</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a>    <span class=n>start</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>    <span class=n>end</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-13><a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a>    <span class=n>exact_start</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-41-14><a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>    <span class=n>fixed_start</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-41-15><a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a>    <span class=n>closed_start</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-41-16><a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>    <span class=n>closed_end</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-41-17><a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a>    <span class=n>add_start_delta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-18><a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a>    <span class=n>add_end_delta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-19><a id=__codelineno-41-19 name=__codelineno-41-19 href=#__codelineno-41-19></a>    <span class=n>kind</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-20><a id=__codelineno-41-20 name=__codelineno-41-20 href=#__codelineno-41-20></a>    <span class=n>skip_not_found</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-41-21><a id=__codelineno-41-21 name=__codelineno-41-21 href=#__codelineno-41-21></a>    <span class=n>index_ranges</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-22><a id=__codelineno-41-22 name=__codelineno-41-22 href=#__codelineno-41-22></a>    <span class=n>index_loc</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-23><a id=__codelineno-41-23 name=__codelineno-41-23 href=#__codelineno-41-23></a>    <span class=n>rescale_to</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-24><a id=__codelineno-41-24 name=__codelineno-41-24 href=#__codelineno-41-24></a>    <span class=n>alloc_wait</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-41-25><a id=__codelineno-41-25 name=__codelineno-41-25 href=#__codelineno-41-25></a>    <span class=n>parameterizer</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-26><a id=__codelineno-41-26 name=__codelineno-41-26 href=#__codelineno-41-26></a>    <span class=n>param_search_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-27><a id=__codelineno-41-27 name=__codelineno-41-27 href=#__codelineno-41-27></a>    <span class=n>name_tuple_to_str</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-28><a id=__codelineno-41-28 name=__codelineno-41-28 href=#__codelineno-41-28></a>    <span class=n>group_configs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-29><a id=__codelineno-41-29 name=__codelineno-41-29 href=#__codelineno-41-29></a>    <span class=n>pre_group_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-30><a id=__codelineno-41-30 name=__codelineno-41-30 href=#__codelineno-41-30></a>    <span class=n>splitter_cls</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-31><a id=__codelineno-41-31 name=__codelineno-41-31 href=#__codelineno-41-31></a>    <span class=n>eval_id</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-32><a id=__codelineno-41-32 name=__codelineno-41-32 href=#__codelineno-41-32></a>    <span class=n>jitted_loop</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-41-33><a id=__codelineno-41-33 name=__codelineno-41-33 href=#__codelineno-41-33></a>    <span class=n>jitted</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-34><a id=__codelineno-41-34 name=__codelineno-41-34 href=#__codelineno-41-34></a>    <span class=n>chunked</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-35><a id=__codelineno-41-35 name=__codelineno-41-35 href=#__codelineno-41-35></a>    <span class=n>template_context</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-36><a id=__codelineno-41-36 name=__codelineno-41-36 href=#__codelineno-41-36></a>    <span class=n>group_execute_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-37><a id=__codelineno-41-37 name=__codelineno-41-37 href=#__codelineno-41-37></a>    <span class=n>execute_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-38><a id=__codelineno-41-38 name=__codelineno-41-38 href=#__codelineno-41-38></a>    <span class=n>random_subset</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-39><a id=__codelineno-41-39 name=__codelineno-41-39 href=#__codelineno-41-39></a>    <span class=n>clean_index_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-40><a id=__codelineno-41-40 name=__codelineno-41-40 href=#__codelineno-41-40></a>    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-41-41><a id=__codelineno-41-41 name=__codelineno-41-41 href=#__codelineno-41-41></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-41-42><a id=__codelineno-41-42 name=__codelineno-41-42 href=#__codelineno-41-42></a><span class=p>)</span>
</span></code></pre></div> <p>Generate allocations from an optimization function.</p> <p>Generates date ranges, executes an optimization function on the data subset corresponding to each range, and allocates assets at the end of each range.</p> <p>This parameterized method supports testing multiple combinations of arguments. It first checks if any argument is wrapped with <a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Param title=vectorbtpro.utils.params.Param>Param</a> and combines their values. These parameters may then be aggregated over <code>group_configs</code> if provided. Before execution, the group configuration is further processed using <code>pre_group_func</code>.</p> <p>Date ranges are resolved either by using the provided <code>index_ranges</code> or by passing all arguments from <code>every</code> to <code>jitted</code> to <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.get_index_ranges title=vectorbtpro.base.wrapping.ArrayWrapper.get_index_ranges>ArrayWrapper.get_index_ranges</a>. The optimization function <code>optimize_func</code> is then called on each date range after substituting any templates in <code>*args</code> and <code>**kwargs</code>. To forward reserved arguments such as <code>jitted</code> to the optimization function, list their names in <code>forward_args</code> and <code>forward_kwargs</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Use vectorbtpro's templates to select the current date range (available as <code>index_slice</code> in the context mapping).</p> </div> <p>If <code>jitted_loop</code> is True, see <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.optimize_meta_nb title=vectorbtpro.portfolio.pfopt.nb.optimize_meta_nb>optimize_meta_nb</a>. Otherwise, the optimization function should accept the template-substituted <code>*args</code> and <code>**kwargs</code> and return an array or dictionary with asset allocations.</p> <p>Templates can utilize the following variables:</p> <ul> <li><code>i</code>: Optimization step</li> <li><code>index_start</code>: Optimization start index (inclusive)</li> <li><code>index_end</code>: Optimization end index (exclusive)</li> <li><code>index_slice</code>: <code>slice(index_start, index_end)</code></li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When <code>jitted_loop</code> is True and multiple groups exist, utilize templates to substitute the current group index (available as <code>group_idx</code> in the context mapping).</p> </div> <p>All allocations across groups are stacked into a 2D array where columns represent assets and rows represent allocations. Date ranges are used to create a record array of type <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/records/#vectorbtpro.portfolio.pfopt.records.AllocRanges title=vectorbtpro.portfolio.pfopt.records.AllocRanges>AllocRanges</a> that acts as an indexer for allocations. For example, the field <code>col</code> indicates the group index for each allocation. This record array has its own wrapper that holds groups instead of columns, while the wrapper of the <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance contains regular columns grouped by groups.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Wrap arrays with <a href=https://vectorbt.pro/pvt_41531c19/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Takeable title=vectorbtpro.generic.splitting.base.Takeable>Takeable</a> to split them automatically.</p> </div> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>optimize_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>Optimization function that computes asset allocations based on a given date range.</dd> <dt><strong><code>*args</code></strong></dt> <dd>Positional arguments for <code>optimize_func</code>.</dd> <dt><strong><code>every</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.every title=vectorbtpro.base.indexing.RangeIdxr.every>RangeIdxr.every</a>.</dd> <dt><strong><code>normalize_every</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.normalize_every title=vectorbtpro.base.indexing.RangeIdxr.normalize_every>RangeIdxr.normalize_every</a>.</dd> <dt><strong><code>split_every</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.split_every title=vectorbtpro.base.indexing.RangeIdxr.split_every>RangeIdxr.split_every</a>.</dd> <dt><strong><code>start_time</code></strong> :&ensp;<code>Union[None, TimeLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.start_time title=vectorbtpro.base.indexing.RangeIdxr.start_time>RangeIdxr.start_time</a>.</dd> <dt><strong><code>end_time</code></strong> :&ensp;<code>Union[None, TimeLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.end_time title=vectorbtpro.base.indexing.RangeIdxr.end_time>RangeIdxr.end_time</a>.</dd> <dt><strong><code>lookback_period</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.lookback_period title=vectorbtpro.base.indexing.RangeIdxr.lookback_period>RangeIdxr.lookback_period</a>.</dd> <dt><strong><code>start</code></strong> :&ensp;<code>Union[None, int, DatetimeLike, IndexLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.start title=vectorbtpro.base.indexing.RangeIdxr.start>RangeIdxr.start</a>.</dd> <dt><strong><code>end</code></strong> :&ensp;<code>Union[None, int, DatetimeLike, IndexLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.end title=vectorbtpro.base.indexing.RangeIdxr.end>RangeIdxr.end</a>.</dd> <dt><strong><code>exact_start</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.exact_start title=vectorbtpro.base.indexing.RangeIdxr.exact_start>RangeIdxr.exact_start</a>.</dd> <dt><strong><code>fixed_start</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.fixed_start title=vectorbtpro.base.indexing.RangeIdxr.fixed_start>RangeIdxr.fixed_start</a>.</dd> <dt><strong><code>closed_start</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.closed_start title=vectorbtpro.base.indexing.RangeIdxr.closed_start>RangeIdxr.closed_start</a>.</dd> <dt><strong><code>closed_end</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.closed_end title=vectorbtpro.base.indexing.RangeIdxr.closed_end>RangeIdxr.closed_end</a>.</dd> <dt><strong><code>add_start_delta</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.add_start_delta title=vectorbtpro.base.indexing.RangeIdxr.add_start_delta>RangeIdxr.add_start_delta</a>.</dd> <dt><strong><code>add_end_delta</code></strong> :&ensp;<code>Union[None, FrequencyLike, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.add_end_delta title=vectorbtpro.base.indexing.RangeIdxr.add_end_delta>RangeIdxr.add_end_delta</a>.</dd> <dt><strong><code>kind</code></strong> :&ensp;<code>Union[None, str, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.kind title=vectorbtpro.base.indexing.RangeIdxr.kind>RangeIdxr.kind</a>.</dd> <dt><strong><code>skip_not_found</code></strong> :&ensp;<code>Union[bool, Param]</code></dt> <dd>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexing/#vectorbtpro.base.indexing.RangeIdxr.skip_not_found title=vectorbtpro.base.indexing.RangeIdxr.skip_not_found>RangeIdxr.skip_not_found</a>.</dd> <dt><strong><code>index_ranges</code></strong> :&ensp;<code>Union[None, MaybeSequence[MaybeSequence[int]], Param]</code></dt> <dd>Manually provided index ranges.</dd> <dt><strong><code>index_loc</code></strong> :&ensp;<code>Union[None, MaybeSequence[int], Param]</code></dt> <dd>Specific index locations.</dd> <dt><strong><code>rescale_to</code></strong> :&ensp;<code>Union[None, Tuple[float, float], Param]</code></dt> <dd>Tuple specifying the rescaling range for allocations.</dd> <dt><strong><code>alloc_wait</code></strong> :&ensp;<code>Union[int, Param]</code></dt> <dd>Wait parameter used during allocation processing.</dd> <dt><strong><code>parameterizer</code></strong> :&ensp;<code>Optional[MaybeType[Parameterizer]]</code></dt> <dd> <p>Parameterizer class or instance for handling parameters.</p> <p>Defaults to <a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Parameterizer title=vectorbtpro.utils.params.Parameterizer>Parameterizer</a>.</p> </dd> <dt><strong><code>param_search_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for parameter search.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/params/#vectorbtpro.utils.params.Parameterizer.find_params_in_obj title=vectorbtpro.utils.params.Parameterizer.find_params_in_obj>Parameterizer.find_params_in_obj</a>.</p> </dd> <dt><strong><code>name_tuple_to_str</code></strong> :&ensp;<code>Union[None, bool, Callable]</code></dt> <dd>Flag or function to convert name tuples to strings for the parameter index.</dd> <dt><strong><code>group_configs</code></strong> :&ensp;<code>Union[None, Dict[Hashable, Kwargs], Sequence[Kwargs]]</code></dt> <dd>Group configuration(s) for optimization.</dd> <dt><strong><code>pre_group_func</code></strong> :&ensp;<code>Optional[Callable]</code></dt> <dd>Function to preprocess and modify the group configuration.</dd> <dt><strong><code>splitter_cls</code></strong> :&ensp;<code>Optional[Type[Splitter]]</code></dt> <dd> <p>Splitter class to use.</p> <p>Defaults to <a href=https://vectorbt.pro/pvt_41531c19/api/generic/splitting/base/#vectorbtpro.generic.splitting.base.Splitter title=vectorbtpro.generic.splitting.base.Splitter>Splitter</a>.</p> </dd> <dt><strong><code>eval_id</code></strong> :&ensp;<code>Optional[Hashable]</code></dt> <dd>Evaluation identifier.</dd> <dt><strong><code>jitted_loop</code></strong> :&ensp;<code>bool</code></dt> <dd>Flag indicating whether to use a JIT-compiled loop over optimization groups.</dd> <dt><strong><code>jitted</code></strong> :&ensp;<code>JittedOption</code></dt> <dd> <p>Option to control JIT compilation.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/jitting/#vectorbtpro.utils.jitting.resolve_jitted_option title=vectorbtpro.utils.jitting.resolve_jitted_option>resolve_jitted_option</a>.</p> </dd> <dt><strong><code>chunked</code></strong> :&ensp;<code>ChunkedOption</code></dt> <dd> <p>Option to control chunked processing.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/chunking/#vectorbtpro.utils.chunking.resolve_chunked_option title=vectorbtpro.utils.chunking.resolve_chunked_option>resolve_chunked_option</a>.</p> </dd> <dt><strong><code>template_context</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Additional context for template substitution.</dd> <dt><strong><code>group_execute_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for the execution handler of optimization groups.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute title=vectorbtpro.utils.execution.execute>execute</a>.</p> </dd> <dt><strong><code>execute_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for the execution handler.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute title=vectorbtpro.utils.execution.execute>execute</a>.</p> </dd> <dt><strong><code>random_subset</code></strong> :&ensp;<code>Optional[int]</code></dt> <dd> <p>Select a random subset of parameter combinations.</p> <p>Set the seed for reproducibility.</p> </dd> <dt><strong><code>clean_index_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for cleaning MultiIndex levels.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/indexes/#vectorbtpro.base.indexes.clean_index title=vectorbtpro.base.indexes.clean_index>clean_index</a>.</p> </dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for configuring the wrapper.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <code>optimize_func</code>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>New instance of <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> with generated allocation results.</dd> </dl> <div class="admonition info"> <p class=admonition-title>Info</p> <p>For default settings, see <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.params title=vectorbtpro._settings.params>params</a>.</p> </div> <p><strong>Examples</strong></p> <p>Allocate once:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;MSFT&quot;</span><span class=p>,</span> <span class=s2>&quot;AMZN&quot;</span><span class=p>,</span> <span class=s2>&quot;AAPL&quot;</span><span class=p>],</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2010-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>close</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>optimize_func</span><span class=p>(</span><span class=n>df</span><span class=p>):</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=gp>... </span>    <span class=n>sharpe</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span> <span class=o>/</span> <span class=n>df</span><span class=o>.</span><span class=n>std</span><span class=p>()</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>sharpe</span> <span class=o>/</span> <span class=n>sharpe</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>df_arg</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>RepEval</span><span class=p>(</span><span class=s2>&quot;close.iloc[index_slice]&quot;</span><span class=p>,</span> <span class=n>context</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>close</span><span class=o>=</span><span class=n>close</span><span class=p>))</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=gp>... </span>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a><span class=gp>... </span>    <span class=n>df_arg</span><span class=p>,</span>
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2015-01-01&quot;</span>
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-42-22><a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a><span class=go>symbol                                     MSFT      AMZN      AAPL</span>
</span><span id=__span-42-23><a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a><span class=go>alloc_group Date</span>
</span><span id=__span-42-24><a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a><span class=go>group       2015-01-02 00:00:00+00:00  0.402459  0.309351  0.288191</span>
</span></code></pre></div> <p>Allocate every first date of the year:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=gp>... </span>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=gp>... </span>    <span class=n>df_arg</span><span class=p>,</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=gp>... </span>    <span class=n>every</span><span class=o>=</span><span class=s2>&quot;AS-JAN&quot;</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=go>symbol                                     MSFT      AMZN      AAPL</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=go>alloc_group Date</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a><span class=go>group       2011-01-03 00:00:00+00:00  0.480693  0.257317  0.261990</span>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=go>            2012-01-03 00:00:00+00:00  0.489893  0.215381  0.294727</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a><span class=go>            2013-01-02 00:00:00+00:00  0.540165  0.228755  0.231080</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=go>            2014-01-02 00:00:00+00:00  0.339649  0.273996  0.386354</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a><span class=go>            2015-01-02 00:00:00+00:00  0.350406  0.418638  0.230956</span>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a><span class=go>            2016-01-04 00:00:00+00:00  0.332212  0.141090  0.526698</span>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a><span class=go>            2017-01-03 00:00:00+00:00  0.390852  0.225379  0.383769</span>
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a><span class=go>            2018-01-02 00:00:00+00:00  0.337711  0.317683  0.344606</span>
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a><span class=go>            2019-01-02 00:00:00+00:00  0.411852  0.282680  0.305468</span>
</span></code></pre></div> <p>Specify index ranges manually:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=gp>... </span>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=gp>... </span>    <span class=n>df_arg</span><span class=p>,</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=gp>... </span>    <span class=n>index_ranges</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>),</span>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>),</span>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>60</span><span class=p>,</span> <span class=mi>90</span><span class=p>)</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=gp>... </span>    <span class=p>]</span>
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-44-12><a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a><span class=go>symbol                                     MSFT      AMZN      AAPL</span>
</span><span id=__span-44-13><a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a><span class=go>alloc_group Date</span>
</span><span id=__span-44-14><a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a><span class=go>group       2010-02-16 00:00:00+00:00  0.340641  0.285897  0.373462</span>
</span><span id=__span-44-15><a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a><span class=go>            2010-03-30 00:00:00+00:00  0.596392  0.206317  0.197291</span>
</span><span id=__span-44-16><a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a><span class=go>            2010-05-12 00:00:00+00:00  0.437481  0.283160  0.279358</span>
</span></code></pre></div> <p>Test multiple combinations of one argument:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=gp>... </span>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=gp>... </span>    <span class=n>df_arg</span><span class=p>,</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=gp>... </span>    <span class=n>every</span><span class=o>=</span><span class=s2>&quot;AS-JAN&quot;</span><span class=p>,</span>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2015-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=gp>... </span>    <span class=n>lookback_period</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>Param</span><span class=p>([</span><span class=s2>&quot;3MS&quot;</span><span class=p>,</span> <span class=s2>&quot;6MS&quot;</span><span class=p>])</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a><span class=go>symbol                                         MSFT      AMZN      AAPL</span>
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a><span class=go>lookback_period Date</span>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a><span class=go>3MS             2016-01-04 00:00:00+00:00  0.282725  0.234970  0.482305</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a><span class=go>                2017-01-03 00:00:00+00:00  0.318100  0.269355  0.412545</span>
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a><span class=go>                2018-01-02 00:00:00+00:00  0.387499  0.236432  0.376068</span>
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a><span class=go>                2019-01-02 00:00:00+00:00  0.575464  0.254808  0.169728</span>
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a><span class=go>6MS             2016-01-04 00:00:00+00:00  0.265035  0.198619  0.536346</span>
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a><span class=go>                2017-01-03 00:00:00+00:00  0.314144  0.409020  0.276836</span>
</span><span id=__span-45-18><a id=__codelineno-45-18 name=__codelineno-45-18 href=#__codelineno-45-18></a><span class=go>                2018-01-02 00:00:00+00:00  0.322741  0.282639  0.394621</span>
</span><span id=__span-45-19><a id=__codelineno-45-19 name=__codelineno-45-19 href=#__codelineno-45-19></a><span class=go>                2019-01-02 00:00:00+00:00  0.565691  0.234760  0.199549</span>
</span></code></pre></div> <p>Test multiple cross-argument combinations:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=gp>... </span>    <span class=n>optimize_func</span><span class=p>,</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=gp>... </span>    <span class=n>df_arg</span><span class=p>,</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=gp>... </span>    <span class=n>every</span><span class=o>=</span><span class=s2>&quot;AS-JAN&quot;</span><span class=p>,</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=gp>... </span>    <span class=n>group_configs</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>start</span><span class=o>=</span><span class=s2>&quot;2015-01-01&quot;</span><span class=p>),</span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>start</span><span class=o>=</span><span class=s2>&quot;2019-06-01&quot;</span><span class=p>,</span> <span class=n>every</span><span class=o>=</span><span class=s2>&quot;MS&quot;</span><span class=p>),</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;2014-01-01&quot;</span><span class=p>)</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=gp>... </span>    <span class=p>]</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a><span class=go>symbol                                      MSFT      AMZN      AAPL</span>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a><span class=go>group_config Date</span>
</span><span id=__span-46-15><a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a><span class=go>0            2016-01-04 00:00:00+00:00  0.332212  0.141090  0.526698</span>
</span><span id=__span-46-16><a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a><span class=go>             2017-01-03 00:00:00+00:00  0.390852  0.225379  0.383769</span>
</span><span id=__span-46-17><a id=__codelineno-46-17 name=__codelineno-46-17 href=#__codelineno-46-17></a><span class=go>             2018-01-02 00:00:00+00:00  0.337711  0.317683  0.344606</span>
</span><span id=__span-46-18><a id=__codelineno-46-18 name=__codelineno-46-18 href=#__codelineno-46-18></a><span class=go>             2019-01-02 00:00:00+00:00  0.411852  0.282680  0.305468</span>
</span><span id=__span-46-19><a id=__codelineno-46-19 name=__codelineno-46-19 href=#__codelineno-46-19></a><span class=go>1            2019-07-01 00:00:00+00:00  0.351461  0.327334  0.321205</span>
</span><span id=__span-46-20><a id=__codelineno-46-20 name=__codelineno-46-20 href=#__codelineno-46-20></a><span class=go>             2019-08-01 00:00:00+00:00  0.418411  0.249799  0.331790</span>
</span><span id=__span-46-21><a id=__codelineno-46-21 name=__codelineno-46-21 href=#__codelineno-46-21></a><span class=go>             2019-09-03 00:00:00+00:00  0.400439  0.374044  0.225517</span>
</span><span id=__span-46-22><a id=__codelineno-46-22 name=__codelineno-46-22 href=#__codelineno-46-22></a><span class=go>             2019-10-01 00:00:00+00:00  0.509387  0.250497  0.240117</span>
</span><span id=__span-46-23><a id=__codelineno-46-23 name=__codelineno-46-23 href=#__codelineno-46-23></a><span class=go>             2019-11-01 00:00:00+00:00  0.349983  0.469181  0.180835</span>
</span><span id=__span-46-24><a id=__codelineno-46-24 name=__codelineno-46-24 href=#__codelineno-46-24></a><span class=go>             2019-12-02 00:00:00+00:00  0.260437  0.380563  0.359000</span>
</span><span id=__span-46-25><a id=__codelineno-46-25 name=__codelineno-46-25 href=#__codelineno-46-25></a><span class=go>2            2012-01-03 00:00:00+00:00  0.489892  0.215381  0.294727</span>
</span><span id=__span-46-26><a id=__codelineno-46-26 name=__codelineno-46-26 href=#__codelineno-46-26></a><span class=go>             2013-01-02 00:00:00+00:00  0.540165  0.228755  0.231080</span>
</span><span id=__span-46-27><a id=__codelineno-46-27 name=__codelineno-46-27 href=#__codelineno-46-27></a><span class=go>             2014-01-02 00:00:00+00:00  0.339649  0.273997  0.386354</span>
</span></code></pre></div> <p>Use Numba-compiled loop:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=gp>&gt;&gt;&gt; </span><span class=nd>@njit</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=gp>... </span><span class=k>def</span><span class=w> </span><span class=nf>optimize_func_nb</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>from_idx</span><span class=p>,</span> <span class=n>to_idx</span><span class=p>,</span> <span class=n>close</span><span class=p>):</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=gp>... </span>    <span class=n>mean</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>nanmean_nb</span><span class=p>(</span><span class=n>close</span><span class=p>[</span><span class=n>from_idx</span><span class=p>:</span><span class=n>to_idx</span><span class=p>])</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=gp>... </span>    <span class=n>std</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>nb</span><span class=o>.</span><span class=n>nanstd_nb</span><span class=p>(</span><span class=n>close</span><span class=p>[</span><span class=n>from_idx</span><span class=p>:</span><span class=n>to_idx</span><span class=p>])</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=gp>... </span>    <span class=n>sharpe</span> <span class=o>=</span> <span class=n>mean</span> <span class=o>/</span> <span class=n>std</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>sharpe</span> <span class=o>/</span> <span class=n>np</span><span class=o>.</span><span class=n>sum</span><span class=p>(</span><span class=n>sharpe</span><span class=p>)</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>(</span>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=gp>... </span>    <span class=n>close</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=gp>... </span>    <span class=n>optimize_func_nb</span><span class=p>,</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=gp>... </span>    <span class=n>np</span><span class=o>.</span><span class=n>asarray</span><span class=p>(</span><span class=n>close</span><span class=p>),</span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=gp>... </span>    <span class=n>index_ranges</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>),</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>60</span><span class=p>),</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a><span class=gp>... </span>        <span class=p>(</span><span class=mi>60</span><span class=p>,</span> <span class=mi>90</span><span class=p>)</span>
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a><span class=gp>... </span>    <span class=p>],</span>
</span><span id=__span-47-17><a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=gp>... </span>    <span class=n>jitted_loop</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-47-18><a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-47-19><a id=__codelineno-47-19 name=__codelineno-47-19 href=#__codelineno-47-19></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>allocations</span>
</span><span id=__span-47-20><a id=__codelineno-47-20 name=__codelineno-47-20 href=#__codelineno-47-20></a><span class=go>symbol                         MSFT      AMZN      AAPL</span>
</span><span id=__span-47-21><a id=__codelineno-47-21 name=__codelineno-47-21 href=#__codelineno-47-21></a><span class=go>Date</span>
</span><span id=__span-47-22><a id=__codelineno-47-22 name=__codelineno-47-22 href=#__codelineno-47-22></a><span class=go>2010-02-17 00:00:00+00:00  0.336384  0.289598  0.374017</span>
</span><span id=__span-47-23><a id=__codelineno-47-23 name=__codelineno-47-23 href=#__codelineno-47-23></a><span class=go>2010-03-31 00:00:00+00:00  0.599417  0.207158  0.193425</span>
</span><span id=__span-47-24><a id=__codelineno-47-24 name=__codelineno-47-24 href=#__codelineno-47-24></a><span class=go>2010-05-13 00:00:00+00:00  0.434084  0.281246  0.284670</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>There is little reason to use a Numba-compiled loop, except when rebalancing thousands of times. Typically, a regular Python loop with a Numba-compiled optimization function is sufficient.</p> </div> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_pypfopt>from_pypfopt <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3784-L3815 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_pypfopt title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_pypfopt</span><span class=p>(</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>    <span class=n>wrapper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=p>)</span>
</span></code></pre></div> <p>Instantiate a portfolio optimizer using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a> with <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.pypfopt_optimize title=vectorbtpro.portfolio.pfopt.base.pypfopt_optimize>pypfopt_optimize</a> (PyPortfolioOpt).</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>Optional[ArrayWrapper]</code></dt> <dd> <p>Array wrapper instance.</p> <p>Must be provided if <code>prices</code> and <code>returns</code> arguments are not available.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.pypfopt_optimize title=vectorbtpro.portfolio.pfopt.base.pypfopt_optimize>pypfopt_optimize</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Portfolio optimizer instance.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_random>from_random <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2836-L2878 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_random title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_random</span><span class=p>(</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>    <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;longonly&#39;</span><span class=p>,</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>    <span class=n>n</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>    <span class=n>seed</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=p>)</span>
</span></code></pre></div> <p>Generate random allocations.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a> with a Numba-compiled random allocation function (<a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.random_allocate_func_nb title=vectorbtpro.portfolio.pfopt.nb.random_allocate_func_nb>random_allocate_func_nb</a>).</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>direction</code></strong> :&ensp;<code>Union[str, int]</code></dt> <dd> <p>Market direction for allocation, e.g. "longonly".</p> <p>Mapped using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/enums/#vectorbtpro.portfolio.enums.Direction title=vectorbtpro.portfolio.enums.Direction>Direction</a> if provided as a string.</p> </dd> <dt><strong><code>n</code></strong> :&ensp;<code>Optional[int]</code></dt> <dd> <p>Number of columns to assign random weights.</p> <p>If None, assign weights to all columns.</p> </dd> <dt><strong><code>seed</code></strong> :&ensp;<code>Optional[int]</code></dt> <dd>Random seed for deterministic output.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with random allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_riskfolio>from_riskfolio <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3817-L3846 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_riskfolio title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_riskfolio</span><span class=p>(</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>    <span class=n>returns</span><span class=p>,</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>    <span class=n>wrapper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a><span class=p>)</span>
</span></code></pre></div> <p>Instantiate a portfolio optimizer using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a> with <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.riskfolio_optimize title=vectorbtpro.portfolio.pfopt.base.riskfolio_optimize>riskfolio_optimize</a> (Riskfolio-Lib).</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>returns</code></strong> :&ensp;<code>AnyArray2d</code></dt> <dd>2D array representing asset returns data.</dd> <dt><strong><code>wrapper</code></strong> :&ensp;<code>Optional[ArrayWrapper]</code></dt> <dd> <p>Array wrapper instance.</p> <p>Must be provided if <code>returns</code> is a template.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.riskfolio_optimize title=vectorbtpro.portfolio.pfopt.base.riskfolio_optimize>riskfolio_optimize</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Portfolio optimizer instance.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_uniform>from_uniform <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2814-L2834 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_uniform title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_uniform</span><span class=p>(</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=p>)</span>
</span></code></pre></div> <p>Generate uniform allocations.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a> with a uniform allocation function that assigns equal weights to all assets.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with uniform allocations.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_universal_algo>from_universal_algo <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2880-L2971 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_universal_algo title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_universal_algo</span><span class=p>(</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>    <span class=n>algo</span><span class=p>,</span>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>    <span class=n>S</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a>    <span class=n>n_jobs</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>    <span class=n>log_progress</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>    <span class=n>valid_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a>    <span class=n>nonzero_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a>    <span class=n>unique_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a>    <span class=n>wrapper</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a><span class=p>)</span>
</span></code></pre></div> <p>Generate allocations using Universal Portfolios.</p> <p>Uses a universal portfolio algorithm from <a href=https://github.com/Marigold/universal-portfolios>Universal Portfolios</a> to generate allocations. The parameter <code>S</code> represents price data, while <code>algo</code> must be either:</p> <ul> <li>a package attribute,</li> <li>a subclass of <code>universal.algo.Algo</code>,</li> <li>an instance of <code>universal.algo.Algo</code>,</li> <li>or an instance of <code>universal.result.AlgoResult</code>.</li> </ul> <p>Allocation points are extracted using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.get_alloc_points_nb title=vectorbtpro.portfolio.pfopt.nb.get_alloc_points_nb>get_alloc_points_nb</a>.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>algo</code></strong> :&ensp;<code>Union[str, type, AlgoT, AlgoResult]</code></dt> <dd>Universal portfolio algorithm identifier or instance.</dd> <dt><strong><code>S</code></strong> :&ensp;<code>Optional[AnyArray2d]</code></dt> <dd>Price data for running the algorithm.</dd> <dt><strong><code>n_jobs</code></strong> :&ensp;<code>int</code></dt> <dd>Number of parallel jobs for algorithm execution.</dd> <dt><strong><code>log_progress</code></strong> :&ensp;<code>bool</code></dt> <dd>Flag to enable progress logging.</dd> <dt><strong><code>valid_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows where all values are NaN.</dd> <dt><strong><code>nonzero_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows where all values are zero.</dd> <dt><strong><code>unique_only</code></strong> :&ensp;<code>bool</code></dt> <dd>Skip rows that are identical to the previous valid row.</dd> <dt><strong><code>wrapper</code></strong> :&ensp;<code>Optional[ArrayWrapper]</code></dt> <dd> <p>Array wrapper instance.</p> <p>Required if <code>S</code> is not a DataFrame.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_allocate_func>PortfolioOptimizer.from_allocate_func</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>Instance of the portfolio optimizer with allocations generated by the universal algorithm.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.get_allocations>get_allocations <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3859-L3883 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.get_allocations title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>get_allocations</span><span class=p>(</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>    <span class=n>squeeze_groups</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=p>)</span>
</span></code></pre></div> <p>Obtain a DataFrame with allocation groups concatenated along the index axis.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>squeeze_groups</code></strong> :&ensp;<code>bool</code></dt> <dd>If True and the data's grouped ndim is 1, group levels are squeezed in the resulting DataFrame.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>DataFrame</code></dt> <dd>DataFrame containing the allocation groups.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.indexing_func>indexing_func <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2001-L2039 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.indexing_func title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>indexing_func</span><span class=p>(</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>    <span class=n>wrapper_meta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>    <span class=n>alloc_wrapper_meta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>    <span class=n>alloc_records_meta</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=p>)</span>
</span></code></pre></div> <p>Perform indexing on a <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>*args</code></strong></dt> <dd>Positional arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.indexing_func_meta title=vectorbtpro.base.wrapping.ArrayWrapper.indexing_func_meta>ArrayWrapper.indexing_func_meta</a>.</dd> <dt><strong><code>wrapper_meta</code></strong> :&ensp;<code>DictLike</code></dt> <dd>Metadata from the indexing operation on the wrapper.</dd> <dt><strong><code>alloc_wrapper_meta</code></strong> :&ensp;<code>DictLike</code></dt> <dd>Metadata from the indexing operation on the allocation wrapper.</dd> <dt><strong><code>alloc_records_meta</code></strong> :&ensp;<code>DictLike</code></dt> <dd>Metadata from the indexing operation on the allocation records.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.indexing_func_meta title=vectorbtpro.base.wrapping.ArrayWrapper.indexing_func_meta>ArrayWrapper.indexing_func_meta</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>New <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance with updated indexing.</dd> </dl> <p><strong>Overridden methods</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.indexing_func title=vectorbtpro.base.wrapping.Wrapping.indexing_func>Wrapping.indexing_func</a></li> </ul> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.mean_allocation>mean_allocation <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3894-L3902 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.mean_allocation title="Permanent link">&para;</a></h3> <p>Mean allocation per column.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Series</code></dt> <dd>Series representing the mean allocation for each column.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.metrics>metrics <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L4048-L4050 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.metrics title="Permanent link">&para;</a></h3> <p>Metrics configuration for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a>.</p> <p>This property returns a copy of <code>PortfolioOptimizer._metrics</code> created during instance initialization. Modifications to the returned configuration do not affect the class-level settings.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=n>HybridConfig</span><span class=p>(</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a>    <span class=n>start_index</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Start Index&#39;</span><span class=p>,</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>        <span class=n>calc_func</span><span class=o>=&lt;</span><span class=n>function</span> <span class=n>PortfolioOptimizer</span><span class=o>.&lt;</span><span class=k>lambda</span><span class=o>&gt;&gt;</span><span class=p>,</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>        <span class=n>agg_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;wrapper&#39;</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a>    <span class=p>),</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a>    <span class=n>end_index</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;End Index&#39;</span><span class=p>,</span>
</span><span id=__span-55-10><a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a>        <span class=n>calc_func</span><span class=o>=&lt;</span><span class=n>function</span> <span class=n>PortfolioOptimizer</span><span class=o>.&lt;</span><span class=k>lambda</span><span class=o>&gt;&gt;</span><span class=p>,</span>
</span><span id=__span-55-11><a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>        <span class=n>agg_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-55-12><a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;wrapper&#39;</span>
</span><span id=__span-55-13><a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a>    <span class=p>),</span>
</span><span id=__span-55-14><a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a>    <span class=n>total_duration</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-15><a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Total Duration&#39;</span><span class=p>,</span>
</span><span id=__span-55-16><a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a>        <span class=n>calc_func</span><span class=o>=&lt;</span><span class=n>function</span> <span class=n>PortfolioOptimizer</span><span class=o>.&lt;</span><span class=k>lambda</span><span class=o>&gt;&gt;</span><span class=p>,</span>
</span><span id=__span-55-17><a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>        <span class=n>apply_to_timedelta</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-55-18><a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a>        <span class=n>agg_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-55-19><a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;wrapper&#39;</span>
</span><span id=__span-55-20><a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a>    <span class=p>),</span>
</span><span id=__span-55-21><a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a>    <span class=n>total_records</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-22><a id=__codelineno-55-22 name=__codelineno-55-22 href=#__codelineno-55-22></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Total Records&#39;</span><span class=p>,</span>
</span><span id=__span-55-23><a id=__codelineno-55-23 name=__codelineno-55-23 href=#__codelineno-55-23></a>        <span class=n>calc_func</span><span class=o>=</span><span class=s1>&#39;alloc_records.count&#39;</span><span class=p>,</span>
</span><span id=__span-55-24><a id=__codelineno-55-24 name=__codelineno-55-24 href=#__codelineno-55-24></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;alloc_records&#39;</span>
</span><span id=__span-55-25><a id=__codelineno-55-25 name=__codelineno-55-25 href=#__codelineno-55-25></a>    <span class=p>),</span>
</span><span id=__span-55-26><a id=__codelineno-55-26 name=__codelineno-55-26 href=#__codelineno-55-26></a>    <span class=n>coverage</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-27><a id=__codelineno-55-27 name=__codelineno-55-27 href=#__codelineno-55-27></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Coverage&#39;</span><span class=p>,</span>
</span><span id=__span-55-28><a id=__codelineno-55-28 name=__codelineno-55-28 href=#__codelineno-55-28></a>        <span class=n>calc_func</span><span class=o>=</span><span class=s1>&#39;alloc_records.get_coverage&#39;</span><span class=p>,</span>
</span><span id=__span-55-29><a id=__codelineno-55-29 name=__codelineno-55-29 href=#__codelineno-55-29></a>        <span class=n>overlapping</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-55-30><a id=__codelineno-55-30 name=__codelineno-55-30 href=#__codelineno-55-30></a>        <span class=n>check_alloc_ranges</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-55-31><a id=__codelineno-55-31 name=__codelineno-55-31 href=#__codelineno-55-31></a>        <span class=n>tags</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-55-32><a id=__codelineno-55-32 name=__codelineno-55-32 href=#__codelineno-55-32></a>            <span class=s1>&#39;alloc_ranges&#39;</span><span class=p>,</span>
</span><span id=__span-55-33><a id=__codelineno-55-33 name=__codelineno-55-33 href=#__codelineno-55-33></a>            <span class=s1>&#39;coverage&#39;</span>
</span><span id=__span-55-34><a id=__codelineno-55-34 name=__codelineno-55-34 href=#__codelineno-55-34></a>        <span class=p>]</span>
</span><span id=__span-55-35><a id=__codelineno-55-35 name=__codelineno-55-35 href=#__codelineno-55-35></a>    <span class=p>),</span>
</span><span id=__span-55-36><a id=__codelineno-55-36 name=__codelineno-55-36 href=#__codelineno-55-36></a>    <span class=n>overlap_coverage</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-37><a id=__codelineno-55-37 name=__codelineno-55-37 href=#__codelineno-55-37></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Overlap Coverage&#39;</span><span class=p>,</span>
</span><span id=__span-55-38><a id=__codelineno-55-38 name=__codelineno-55-38 href=#__codelineno-55-38></a>        <span class=n>calc_func</span><span class=o>=</span><span class=s1>&#39;alloc_records.get_coverage&#39;</span><span class=p>,</span>
</span><span id=__span-55-39><a id=__codelineno-55-39 name=__codelineno-55-39 href=#__codelineno-55-39></a>        <span class=n>overlapping</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-55-40><a id=__codelineno-55-40 name=__codelineno-55-40 href=#__codelineno-55-40></a>        <span class=n>check_alloc_ranges</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-55-41><a id=__codelineno-55-41 name=__codelineno-55-41 href=#__codelineno-55-41></a>        <span class=n>tags</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-55-42><a id=__codelineno-55-42 name=__codelineno-55-42 href=#__codelineno-55-42></a>            <span class=s1>&#39;alloc_ranges&#39;</span><span class=p>,</span>
</span><span id=__span-55-43><a id=__codelineno-55-43 name=__codelineno-55-43 href=#__codelineno-55-43></a>            <span class=s1>&#39;coverage&#39;</span>
</span><span id=__span-55-44><a id=__codelineno-55-44 name=__codelineno-55-44 href=#__codelineno-55-44></a>        <span class=p>]</span>
</span><span id=__span-55-45><a id=__codelineno-55-45 name=__codelineno-55-45 href=#__codelineno-55-45></a>    <span class=p>),</span>
</span><span id=__span-55-46><a id=__codelineno-55-46 name=__codelineno-55-46 href=#__codelineno-55-46></a>    <span class=n>mean_allocation</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-55-47><a id=__codelineno-55-47 name=__codelineno-55-47 href=#__codelineno-55-47></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Mean Allocation&#39;</span><span class=p>,</span>
</span><span id=__span-55-48><a id=__codelineno-55-48 name=__codelineno-55-48 href=#__codelineno-55-48></a>        <span class=n>calc_func</span><span class=o>=</span><span class=s1>&#39;mean_allocation&#39;</span><span class=p>,</span>
</span><span id=__span-55-49><a id=__codelineno-55-49 name=__codelineno-55-49 href=#__codelineno-55-49></a>        <span class=n>post_calc_func</span><span class=o>=&lt;</span><span class=n>function</span> <span class=n>PortfolioOptimizer</span><span class=o>.&lt;</span><span class=k>lambda</span><span class=o>&gt;&gt;</span><span class=p>,</span>
</span><span id=__span-55-50><a id=__codelineno-55-50 name=__codelineno-55-50 href=#__codelineno-55-50></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;allocations&#39;</span>
</span><span id=__span-55-51><a id=__codelineno-55-51 name=__codelineno-55-51 href=#__codelineno-55-51></a>    <span class=p>)</span>
</span><span id=__span-55-52><a id=__codelineno-55-52 name=__codelineno-55-52 href=#__codelineno-55-52></a><span class=p>)</span>
</span></code></pre></div> <p>To modify the metrics, change the configuration in-place, override this property, or assign a new value to the instance variable <code>PortfolioOptimizer._metrics</code>.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Config</code></dt> <dd>Copy of the metrics configuration for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a>.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plot>plot <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L4054-L4151 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plot title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>    <span class=n>column</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a>    <span class=n>dropna</span><span class=o>=</span><span class=s1>&#39;head&#39;</span><span class=p>,</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>    <span class=n>line_shape</span><span class=o>=</span><span class=s1>&#39;hv&#39;</span><span class=p>,</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a>    <span class=n>plot_rb_dates</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a>    <span class=n>trace_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>    <span class=n>add_shape_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a>    <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a>    <span class=n>fig</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a>    <span class=o>**</span><span class=n>layout_kwargs</span>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=p>)</span>
</span></code></pre></div> <p>Plot allocations.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>column</code></strong> :&ensp;<code>Optional[Column]</code></dt> <dd>Identifier of the column to plot.</dd> <dt><strong><code>dropna</code></strong> :&ensp;<code>Optional[str]</code></dt> <dd> <p>Strategy for handling missing allocations, either "all" or "head".</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.fill_allocations>PortfolioOptimizer.fill_allocations</a>.</p> </dd> <dt><strong><code>line_shape</code></strong> :&ensp;<code>str</code></dt> <dd>Shape of the plot line (e.g. "hv").</dd> <dt><strong><code>plot_rb_dates</code></strong> :&ensp;<code>Optional[bool]</code></dt> <dd> <p>Whether to plot rebalancing dates.</p> <p>Defaults to True if there are no more than 20 rebalancing dates.</p> </dd> <dt><strong><code>trace_kwargs</code></strong> :&ensp;<code>KwargsLikeSequence</code></dt> <dd>Keyword arguments for <code>plotly.graph_objects.Scatter</code>.</dd> <dt><strong><code>add_shape_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Keyword arguments for <code>fig.add_shape</code> for each shape.</dd> <dt><strong><code>add_trace_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd>Keyword arguments for <code>fig.add_trace</code> for each trace; for example, <code>dict(row=1, col=1)</code>.</dd> <dt><strong><code>fig</code></strong> :&ensp;<code>Optional[BaseFigure]</code></dt> <dd>Figure to update; if None, a new figure is created.</dd> <dt><strong><code>**layout_kwargs</code></strong></dt> <dd>Keyword arguments for <code>fig.update_layout</code>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>BaseFigure</code></dt> <dd>Figure containing the allocation plot.</dd> </dl> <p><strong>Examples</strong></p> <p>Continuing with the examples under <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.from_optimize_func>PortfolioOptimizer.from_optimize_func</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>from_random</span><span class=p>(</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=gp>... </span>    <span class=n>vbt</span><span class=o>.</span><span class=n>ArrayWrapper</span><span class=p>(</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=gp>... </span>        <span class=n>index</span><span class=o>=</span><span class=n>pd</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> <span class=s2>&quot;2021-01-01&quot;</span><span class=p>),</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=gp>... </span>        <span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;MSFT&quot;</span><span class=p>,</span> <span class=s2>&quot;AMZN&quot;</span><span class=p>,</span> <span class=s2>&quot;AAPL&quot;</span><span class=p>],</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=gp>... </span>        <span class=n>ndim</span><span class=o>=</span><span class=mi>2</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=gp>... </span>    <span class=p>),</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a><span class=gp>... </span>    <span class=n>every</span><span class=o>=</span><span class=s2>&quot;MS&quot;</span><span class=p>,</span>
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=gp>... </span>    <span class=n>seed</span><span class=o>=</span><span class=mi>40</span>
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a><span class=gp>&gt;&gt;&gt; </span><span class=n>pfo</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></code></pre></div> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/api/pfopt_plot.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/api/pfopt_plot.dark.svg#only-dark></p> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plots_defaults>plots_defaults <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L4153-L4167 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plots_defaults title="Permanent link">&para;</a></h3> <p>Default configuration for <a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.plots>PlotsBuilderMixin.plots</a>.</p> <p>Merges the defaults from <a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots_defaults title=vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots_defaults>PlotsBuilderMixin.plots_defaults</a> with the <code>plots</code> configuration from <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.pfopt title=vectorbtpro._settings.pfopt>pfopt</a>.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Kwargs</code></dt> <dd>Dictionary containing the default configuration for the plots builder.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resample>resample <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2041-L2056 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resample title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=p>)</span>
</span></code></pre></div> <p>Perform resampling on a <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>*args</code></strong></dt> <dd>Positional arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.resample title=vectorbtpro.base.wrapping.ArrayWrapper.resample>ArrayWrapper.resample</a>.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.resample title=vectorbtpro.base.wrapping.ArrayWrapper.resample>ArrayWrapper.resample</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>New <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance with resampled attributes.</dd> </dl> <p><strong>Overridden methods</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resample title=vectorbtpro.base.wrapping.Wrapping.resample>Wrapping.resample</a></li> </ul> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.row_stack>row_stack <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L1875-L1936 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.row_stack title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>row_stack</span><span class=p>(</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a>    <span class=o>*</span><span class=n>objs</span><span class=p>,</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a>    <span class=n>wrapper_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=p>)</span>
</span></code></pre></div> <p>Stack multiple <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instances along rows.</p> <p>Uses <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper.row_stack title=vectorbtpro.base.wrapping.ArrayWrapper.row_stack>ArrayWrapper.row_stack</a> to stack the wrappers.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>*objs</code></strong> :&ensp;<code>MaybeSequence[PortfolioOptimizer]</code></dt> <dd>(Additional) <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instances to stack.</dd> <dt><strong><code>wrapper_kwargs</code></strong> :&ensp;<code>KwargsLike</code></dt> <dd> <p>Keyword arguments for configuring the wrapper.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> through <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_row_stack_kwargs title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resolve_row_stack_kwargs>Wrapping.resolve_row_stack_kwargs</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.resolve_stack_kwargs title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.resolve_stack_kwargs>Wrapping.resolve_stack_kwargs</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a></dt> <dd>New <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> instance with row-stacked attributes.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_allocation_group>run_allocation_group <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2060-L2225 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_allocation_group title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>run_allocation_group</span><span class=p>(</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a>    <span class=n>group_configs</span><span class=p>,</span>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a>    <span class=n>group_index</span><span class=p>,</span>
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>    <span class=n>group_idx</span><span class=p>,</span>
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a>    <span class=n>pre_group_func</span><span class=o>=</span><span class=kc>None</span>
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a><span class=p>)</span>
</span></code></pre></div> <p>Run an allocation group.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>group_configs</code></strong> :&ensp;<code>List[dict]</code></dt> <dd>List of configurations for allocation groups.</dd> <dt><strong><code>group_index</code></strong> :&ensp;<code>Index</code></dt> <dd>Index representing the allocation group.</dd> <dt><strong><code>group_idx</code></strong> :&ensp;<code>int</code></dt> <dd>Index specifying which configuration in <code>group_configs</code> to use.</dd> <dt><strong><code>pre_group_func</code></strong> :&ensp;<code>Optional[Callable]</code></dt> <dd>Function to preprocess and modify the group configuration.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Tuple[RecordArray, Array2d]</code></dt> <dd>Tuple containing allocation records and a 2D array of allocation values.</dd> </dl> <p><strong>See</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.allocate_meta_nb title=vectorbtpro.portfolio.pfopt.nb.allocate_meta_nb>allocate_meta_nb</a> if <code>jitted_loop=True</code></li> </ul> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_optimization_group>run_optimization_group <span class=dobjtype>class method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L2973-L3258 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.run_optimization_group title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>run_optimization_group</span><span class=p>(</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>    <span class=n>wrapper</span><span class=p>,</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a>    <span class=n>group_configs</span><span class=p>,</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a>    <span class=n>group_index</span><span class=p>,</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a>    <span class=n>group_idx</span><span class=p>,</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a>    <span class=n>pre_group_func</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>False</span>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a><span class=p>)</span>
</span></code></pre></div> <p>Run optimization for a group of assets.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>wrapper</code></strong> :&ensp;<code>ArrayWrapper</code></dt> <dd> <p>Array wrapper instance.</p> <p>See <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.ArrayWrapper title=vectorbtpro.base.wrapping.ArrayWrapper>ArrayWrapper</a>.</p> </dd> <dt><strong><code>group_configs</code></strong> :&ensp;<code>List[dict]</code></dt> <dd>List of configurations for optimization groups.</dd> <dt><strong><code>group_index</code></strong> :&ensp;<code>Index</code></dt> <dd>Index representing the optimization group.</dd> <dt><strong><code>group_idx</code></strong> :&ensp;<code>int</code></dt> <dd>Index specifying which configuration in <code>group_configs</code> to use.</dd> <dt><strong><code>pre_group_func</code></strong> :&ensp;<code>Callable</code></dt> <dd>Function to preprocess and modify the group configuration.</dd> <dt><strong><code>silence_warnings</code></strong> :&ensp;<code>bool</code></dt> <dd>Flag to suppress warning messages.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Tuple[RecordArray, Array2d]</code></dt> <dd>Tuple containing the allocation records and the corresponding 2D array of allocation values.</dd> </dl> <p><strong>See</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/#vectorbtpro.portfolio.pfopt.nb.optimize_meta_nb title=vectorbtpro.portfolio.pfopt.nb.optimize_meta_nb>optimize_meta_nb</a> if <code>jitted_loop=True</code></li> </ul> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.simulate>simulate <span class=dobjtype>method</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3970-L3983 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.simulate title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=n>PortfolioOptimizer</span><span class=o>.</span><span class=n>simulate</span><span class=p>(</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>    <span class=n>close</span><span class=p>,</span>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=p>)</span>
</span></code></pre></div> <p>Simulate a portfolio using <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_optimizer title=vectorbtpro.portfolio.base.Portfolio.from_optimizer>Portfolio.from_optimizer</a> applied to the current optimizer instance.</p> <p><strong>Args</strong></p> <dl> <dt><strong><code>close</code></strong> :&ensp;<code>Union[ArrayLike, Data]</code></dt> <dd>Asset close price data used for simulation.</dd> <dt><strong><code>**kwargs</code></strong></dt> <dd>Keyword arguments for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_optimizer title=vectorbtpro.portfolio.base.Portfolio.from_optimizer>Portfolio.from_optimizer</a>.</dd> </dl> <p><strong>Returns</strong></p> <dl> <dt><code>Portfolio</code></dt> <dd>Simulated portfolio instance.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.stats_defaults>stats_defaults <span class=dobjtype>class property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L3987-L4001 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.stats_defaults title="Permanent link">&para;</a></h3> <p>Default configuration for <a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.stats>StatsBuilderMixin.stats</a>.</p> <p>Merges the defaults from <a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats_defaults title=vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats_defaults>StatsBuilderMixin.stats_defaults</a> with the <code>stats</code> configuration from <a href=https://vectorbt.pro/pvt_41531c19/api/_settings/#vectorbtpro._settings.pfopt title=vectorbtpro._settings.pfopt>pfopt</a>.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Kwargs</code></dt> <dd>Dictionary containing the default configuration for the stats builder.</dd> </dl> <hr> <h3 id=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.subplots>subplots <span class=dobjtype>property</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L4185-L4187 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.subplots title="Permanent link">&para;</a></h3> <p>Subplots configuration for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer title=vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a>.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=n>HybridConfig</span><span class=p>(</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>    <span class=n>alloc_ranges</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Allocation Ranges&#39;</span><span class=p>,</span>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a>        <span class=n>plot_func</span><span class=o>=</span><span class=s1>&#39;alloc_records.plot&#39;</span><span class=p>,</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>        <span class=n>check_alloc_ranges</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;alloc_ranges&#39;</span>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a>    <span class=p>),</span>
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a>    <span class=n>plot</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-63-9><a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>        <span class=n>title</span><span class=o>=</span><span class=s1>&#39;Allocations&#39;</span><span class=p>,</span>
</span><span id=__span-63-10><a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a>        <span class=n>plot_func</span><span class=o>=</span><span class=s1>&#39;plot&#39;</span><span class=p>,</span>
</span><span id=__span-63-11><a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>        <span class=n>tags</span><span class=o>=</span><span class=s1>&#39;allocations&#39;</span>
</span><span id=__span-63-12><a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a>    <span class=p>)</span>
</span><span id=__span-63-13><a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a><span class=p>)</span>
</span></code></pre></div> <p>This property returns a hybrid copy of <code>PortfolioOptimizer._subplots</code> created at instance initialization, ensuring that modifications do not affect the class-level configuration.</p> <p>To modify the subplots, update the configuration in-place, override this property, or assign a new value to <code>PortfolioOptimizer._subplots</code> on the instance.</p> <p><strong>Returns</strong></p> <dl> <dt><code>Config</code></dt> <dd>Hybrid copy of the subplots configuration.</dd> </dl> <hr> <h2 id=vectorbtpro.portfolio.pfopt.base.pfopt_func_dict>pfopt_func_dict <span class=dobjtype>class</span><a class=githublink href=https://github.com/polakowo/vectorbt.pro/blob/d0bfef94b75be3087e04d1b58c9c7216f2f25ce8/vectorbtpro/portfolio/pfopt/base.py#L87-L93 target=_blank title="Jump to source"><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg></span></a><a class=headerlink href=#vectorbtpro.portfolio.pfopt.base.pfopt_func_dict title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=n>pfopt_func_dict</span><span class=p>(</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>    <span class=o>*</span><span class=n>args</span><span class=p>,</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>    <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=p>)</span>
</span></code></pre></div> <p>Dictionary subclass containing optimization functions as keys.</p> <p>Keys may be function objects, their names, or the special key <code>_def</code> to represent the default value.</p> <p><strong>Superclasses</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base title=vectorbtpro.utils.base.Base>Base</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/checks/#vectorbtpro.utils.checks.Comparable title=vectorbtpro.utils.checks.Comparable>Comparable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable title=vectorbtpro.utils.pickling.Pickleable>Pickleable</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified title=vectorbtpro.utils.formatting.Prettified>Prettified</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.pdict title=vectorbtpro.utils.pickling.pdict>pdict</a></li> <li><code>builtins.dict</code></li> </ul> <p><strong>Inherited members</strong></p> <ul> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.chat title=vectorbtpro.utils.pickling.pdict.chat>Base.chat</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_api title=vectorbtpro.utils.pickling.pdict.find_api>Base.find_api</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_assets title=vectorbtpro.utils.pickling.pdict.find_assets>Base.find_assets</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_docs title=vectorbtpro.utils.pickling.pdict.find_docs>Base.find_docs</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_examples title=vectorbtpro.utils.pickling.pdict.find_examples>Base.find_examples</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/base/#vectorbtpro.utils.base.Base.find_messages title=vectorbtpro.utils.pickling.pdict.find_messages>Base.find_messages</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_config title=vectorbtpro.utils.pickling.pdict.decode_config>Pickleable.decode_config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_config_node title=vectorbtpro.utils.pickling.pdict.decode_config_node>Pickleable.decode_config_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_toml title=vectorbtpro.utils.pickling.pdict.decode_toml>Pickleable.decode_toml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_toml_node title=vectorbtpro.utils.pickling.pdict.decode_toml_node>Pickleable.decode_toml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_yaml title=vectorbtpro.utils.pickling.pdict.decode_yaml>Pickleable.decode_yaml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.decode_yaml_node title=vectorbtpro.utils.pickling.pdict.decode_yaml_node>Pickleable.decode_yaml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.dumps title=vectorbtpro.utils.pickling.pdict.dumps>Pickleable.dumps</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_config title=vectorbtpro.utils.pickling.pdict.encode_config>Pickleable.encode_config</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_config_node title=vectorbtpro.utils.pickling.pdict.encode_config_node>Pickleable.encode_config_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_toml title=vectorbtpro.utils.pickling.pdict.encode_toml>Pickleable.encode_toml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_toml_node title=vectorbtpro.utils.pickling.pdict.encode_toml_node>Pickleable.encode_toml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_yaml title=vectorbtpro.utils.pickling.pdict.encode_yaml>Pickleable.encode_yaml</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.encode_yaml_node title=vectorbtpro.utils.pickling.pdict.encode_yaml_node>Pickleable.encode_yaml_node</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.file_exists title=vectorbtpro.utils.pickling.pdict.file_exists>Pickleable.file_exists</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.getsize title=vectorbtpro.utils.pickling.pdict.getsize>Pickleable.getsize</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.load title=vectorbtpro.utils.pickling.pdict.load>Pickleable.load</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.loads title=vectorbtpro.utils.pickling.pdict.loads>Pickleable.loads</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.modify_state title=vectorbtpro.utils.pickling.pdict.modify_state>Pickleable.modify_state</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.resolve_file_path title=vectorbtpro.utils.pickling.pdict.resolve_file_path>Pickleable.resolve_file_path</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.save title=vectorbtpro.utils.pickling.pdict.save>Pickleable.save</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.pprint title=vectorbtpro.utils.pickling.pdict.pprint>Prettified.pprint</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.prettify_doc title=vectorbtpro.utils.pickling.pdict.prettify_doc>Prettified.prettify_doc</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.pdict.equals title=vectorbtpro.utils.pickling.pdict.equals>pdict.equals</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.pdict.load_update title=vectorbtpro.utils.pickling.pdict.load_update>pdict.load_update</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/formatting/#vectorbtpro.utils.formatting.Prettified.prettify title=vectorbtpro.utils.pickling.pdict.prettify>pdict.prettify</a></li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Pickleable.rec_state title=vectorbtpro.utils.pickling.pdict.rec_state>pdict.rec_state</a></li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/ class="md-footer__link md-footer__link--prev" aria-label="Previous: pfopt"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> pfopt </div> </div> </a> <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/nb/ class="md-footer__link md-footer__link--next" aria-label="Next: nb"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> nb </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021-2025 Oleg Polakow. All rights reserved. </div> </div> <div class=md-social> <a href=https://www.linkedin.com/in/polakowo target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"annotate": null, "base": "../../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.prune", "navigation.path", "navigation.footer", "search.suggest", "search.share", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "content.tabs.link", "toc.follow", "toc.integrate", "announce.dismiss"], "search": "../../../../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=https://vectorbt.pro/pvt_41531c19/assets/javascripts/bundle.9d1edc04.min.js></script> <script src=https://vectorbt.pro/pvt_41531c19/assets/scripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js></script> </body> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:48:18 GMT -->
</html>