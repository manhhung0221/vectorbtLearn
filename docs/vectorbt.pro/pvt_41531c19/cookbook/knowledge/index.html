<!doctype html><html lang=en class=no-js> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/cookbook/knowledge/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:46:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Recipes for managing knowledge assets in VectorBT PRO"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.pro/cookbook/knowledge/ rel=canonical><link href=../indicators/index.html rel=prev><link href=../optimization/index.html rel=next><link rel=icon href=../../assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.6.21+insiders-4.53.17"><title>Knowledge - VectorBT® PRO</title><link rel=stylesheet href=../../assets/stylesheets/main.010a373c.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=../../../../fonts.gstatic.com/index.html crossorigin><link rel=stylesheet href="../../../../fonts.googleapis.com/cssbe43.css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><link rel=stylesheet href=../../assets/stylesheets/custom-light.css><link rel=stylesheet href=../../assets/stylesheets/custom-dark.css><link rel=stylesheet href=../../assets/stylesheets/pygments-light.css><link rel=stylesheet href=../../assets/stylesheets/pygments-dark.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-0C5VNYCFHL"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-0C5VNYCFHL",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="../../../../www.googletagmanager.com/gtag/jsc6c8?id=G-0C5VNYCFHL",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><meta name=robots content="noindex, nofollow"><meta property=og:title content=Knowledge><meta property=og:type content=website><meta content=https://vectorbt.pro/cookbook/knowledge/ property=og:url><meta property=og:image:url content=https://vectorbt.pro/pvt_41531c19/assets/logo/social-new.png><meta property=og:image:type content=image/png><meta property=og:description content="Recipes for managing knowledge assets in VectorBT PRO"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=https://vectorbt.pro/pvt_41531c19/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-16x16.png><link rel=manifest href=https://vectorbt.pro/pvt_41531c19/assets/logo/site.webmanifest><link rel=mask-icon href=https://vectorbt.pro/pvt_41531c19/assets/logo/safari-pinned-tab.svg color=#1e1f22><link rel="shortcut icon" href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e1f22><meta name=msapplication-config content=https://vectorbt.pro/pvt_41531c19/assets/logo/browserconfig.xml><meta name=theme-color content=#1e1f22><link href=https://unpkg.com/aos@2.3.4/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.4/dist/aos.js></script><link href=http://fonts.cdnfonts.com/css/uni-neue rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js integrity="sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><link rel=preconnect href=https://fonts.googleapis.com/><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin></head> <body dir=ltr data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#knowledge class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> <i>What's new</i>: New LLM providers, reasoning steps, function calling, YAML & TOML support, and <a href=https://vectorbt.pro/pvt_41531c19/getting-started/release-notes><strong>more</strong></a> <span class="twemoji announce-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m153.6 29.9 16-21.3c4-5.4 10.4-8.6 17.1-8.6C198.4 0 208 9.6 208 21.3v22.1c0 13.1 5.4 25.7 14.9 34.7l84.7 80.9c48.8 46.6 76.4 111.2 76.4 178.7C384 434 306 512 209.7 512H192C86 512 0 426 0 320v-3.8c0-48.8 19.4-95.6 53.9-130.1l3.5-3.5c4.2-4.2 10-6.6 16-6.6 12.5 0 22.6 10.1 22.6 22.6V288c0 35.3 28.7 64 64 64s64-28.7 64-64v-3.9c0-18-7.2-35.3-19.9-48l-38.6-38.6c-24-24-37.5-56.7-37.5-90.7 0-27.7 9-54.8 25.6-76.9"/></svg></span> </div> <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script> </aside> </div> <!-- Determine class according to configuration --> <!-- Header --> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <!-- Link to home --> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-header__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> VectorBT® PRO <span class=md-version> v2025.10.15 </span> <span class=unlock-icon><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M192 32c-35.3 0-64 28.7-64 64v64h192c35.3 0 64 28.7 64 64v224c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64V96c0-70.7 57.3-128 128-128 63.5 0 116.1 46.1 126.2 106.7 2.9 17.4-8.8 33.9-26.3 36.9S258 102.8 255 85.3C250 55.1 223.7 32 192 32m40 328c13.3 0 24-10.7 24-24s-10.7-24-24-24h-80c-13.3 0-24 10.7-24 24s10.7 24 24 24z"/></svg></span> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Knowledge </span> </div> </div> </div> <!-- Color palette --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=custom-light data-md-color-primary=custom-light data-md-color-accent=custom-light aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <!-- Site language selector --> <!-- Button to open search modal --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-tabs__link> Documentation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-tabs__link> Cookbook </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-nav__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> VectorBT® PRO </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-nav__link> <span class=md-ellipsis> Getting started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-nav__link> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Cookbook </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Cookbook </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/arrays/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 2h14a2 2 0 0 1 2 2v12c0 1.11-.89 2-2 2H7a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2m0 4v4h6V6zm8 0v4h6V6zm-8 6v4h6v-4zm8 0v4h6v-4zM3 20V6H1v14c0 1.11.89 2 2 2h16v-2z"/></svg> <span class=md-ellipsis> Arrays </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/benchmarking/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9 5a7 7 0 0 1 7 7h1v3h-1v4H9a7 7 0 0 1-7-7 7 7 0 0 1 7-7m0 3a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m8 9h5v4h-2v-2h-3z"/></svg> <span class=md-ellipsis> Benchmarking </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/caching/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 8-4 4h3a6 6 0 0 1-6 6c-1 0-1.97-.25-2.8-.7l-1.46 1.46A7.93 7.93 0 0 0 12 20a8 8 0 0 0 8-8h3M6 12a6 6 0 0 1 6-6c1 0 1.97.25 2.8.7l1.46-1.46A7.93 7.93 0 0 0 12 4a8 8 0 0 0-8 8H1l4 4 4-4"/></svg> <span class=md-ellipsis> Caching </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/compilation/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 16a3 3 0 0 1-3-3c0-1.12.61-2.1 1.5-2.61l9.71-5.62-5.53 9.58c-.5.98-1.51 1.65-2.68 1.65m0-13c1.81 0 3.5.5 4.97 1.32l-2.1 1.21C14 5.19 13 5 12 5a8 8 0 0 0-8 8c0 2.21.89 4.21 2.34 5.65h.01c.39.39.39 1.02 0 1.41s-1.03.39-1.42.01A9.97 9.97 0 0 1 2 13 10 10 0 0 1 12 3m10 10c0 2.76-1.12 5.26-2.93 7.07-.39.38-1.02.38-1.41-.01a.996.996 0 0 1 0-1.41A7.95 7.95 0 0 0 20 13c0-1-.19-2-.54-2.9L20.67 8C21.5 9.5 22 11.18 22 13"/></svg> <span class=md-ellipsis> Compilation </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/configuration/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"/></svg> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/cross-validation/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M.41 13.41 6 19l1.41-1.42L1.83 12m20.41-6.42L11.66 16.17 7.5 12l-1.43 1.41L11.66 19l12-12M18 7l-1.41-1.42-6.35 6.35 1.42 1.41z"/></svg> <span class=md-ellipsis> Cross-validation </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/data/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg> <span class=md-ellipsis> Data </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/datetime/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"/></svg> <span class=md-ellipsis> Datetime </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/discovery/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 3h6v4H3zm12 7h6v4h-6zm0 7h6v4h-6zm-2-4H7v5h6v2H5V9h2v2h6z"/></svg> <span class=md-ellipsis> Discovery </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/indexing/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 20.5c0 .8-.7 1.5-1.5 1.5H13c-.4 0-.7-.1-1-.4l-4-4.2.7-.8c.2-.2.5-.3.8-.3h.2L12 18V9c0-.6.4-1 1-1s1 .4 1 1v4.5l1.2.1 3.9 2.2c.5.2.9.8.9 1.3zM20 2H4c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h4v-2H4V4h16v8h-2v2h2c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2"/></svg> <span class=md-ellipsis> Indexing </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/indicators/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m3 14 .5.07L8.07 9.5a1.95 1.95 0 0 1 .52-1.91c.78-.79 2.04-.79 2.82 0 .53.52.7 1.26.52 1.91l2.57 2.57.5-.07c.18 0 .35 0 .5.07l3.57-3.57C19 8.35 19 8.18 19 8a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2c-.18 0-.35 0-.5-.07l-3.57 3.57c.07.15.07.32.07.5a2 2 0 0 1-2 2 2 2 0 0 1-2-2l.07-.5-2.57-2.57c-.32.07-.68.07-1 0L4.93 15.5 5 16a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2"/></svg> <span class=md-ellipsis> Indicators </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2zM4 4v13.17L5.17 16H20V4zm2 3h12v2H6zm0 4h9v2H6z"/></svg> <span class=md-ellipsis> Knowledge </span> <span class="md-nav__icon md-icon"></span> </label> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/knowledge/ class="md-nav__link md-nav__link--active"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2zM4 4v13.17L5.17 16H20V4zm2 3h12v2H6zm0 4h9v2H6z"/></svg> <span class=md-ellipsis> Knowledge </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#assets class=md-nav__link> <span class=md-ellipsis> Assets </span> </a> <nav class=md-nav aria-label=Assets> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vbt-assets class=md-nav__link> <span class=md-ellipsis> VBT assets </span> </a> </li> <li class=md-nav__item> <a href=#generic-assets class=md-nav__link> <span class=md-ellipsis> Generic assets </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#describing class=md-nav__link> <span class=md-ellipsis> Describing </span> </a> </li> <li class=md-nav__item> <a href=#manipulating class=md-nav__link> <span class=md-ellipsis> Manipulating </span> </a> </li> <li class=md-nav__item> <a href=#querying class=md-nav__link> <span class=md-ellipsis> Querying </span> </a> <nav class=md-nav aria-label=Querying> <ul class=md-nav__list> <li class=md-nav__item> <a href=#code class=md-nav__link> <span class=md-ellipsis> Code </span> </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> <span class=md-ellipsis> Links </span> </a> </li> <li class=md-nav__item> <a href=#objects class=md-nav__link> <span class=md-ellipsis> Objects </span> </a> </li> <li class=md-nav__item> <a href=#nodes class=md-nav__link> <span class=md-ellipsis> Nodes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#applying class=md-nav__link> <span class=md-ellipsis> Applying </span> </a> <nav class=md-nav aria-label=Applying> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pipelines class=md-nav__link> <span class=md-ellipsis> Pipelines </span> </a> </li> <li class=md-nav__item> <a href=#reducing class=md-nav__link> <span class=md-ellipsis> Reducing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aggregating class=md-nav__link> <span class=md-ellipsis> Aggregating </span> </a> </li> <li class=md-nav__item> <a href=#formatting class=md-nav__link> <span class=md-ellipsis> Formatting </span> </a> <nav class=md-nav aria-label=Formatting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#browsing class=md-nav__link> <span class=md-ellipsis> Browsing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#combining class=md-nav__link> <span class=md-ellipsis> Combining </span> </a> </li> <li class=md-nav__item> <a href=#searching class=md-nav__link> <span class=md-ellipsis> Searching </span> </a> <nav class=md-nav aria-label=Searching> <ul class=md-nav__list> <li class=md-nav__item> <a href=#for-objects class=md-nav__link> <span class=md-ellipsis> For objects </span> </a> </li> <li class=md-nav__item> <a href=#globally class=md-nav__link> <span class=md-ellipsis> Globally </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#chatting class=md-nav__link> <span class=md-ellipsis> Chatting </span> </a> <nav class=md-nav aria-label=Chatting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#about-objects class=md-nav__link> <span class=md-ellipsis> About objects </span> </a> </li> <li class=md-nav__item> <a href=#globally_1 class=md-nav__link> <span class=md-ellipsis> Globally </span> </a> </li> <li class=md-nav__item> <a href=#quantgpt class=md-nav__link> <span class=md-ellipsis> QuantGPT </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interacting class=md-nav__link> <span class=md-ellipsis> Interacting </span> </a> </li> <li class=md-nav__item> <a href=#rag class=md-nav__link> <span class=md-ellipsis> RAG </span> </a> <nav class=md-nav aria-label=RAG> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tokenizer class=md-nav__link> <span class=md-ellipsis> Tokenizer </span> </a> </li> <li class=md-nav__item> <a href=#embeddings class=md-nav__link> <span class=md-ellipsis> Embeddings </span> </a> </li> <li class=md-nav__item> <a href=#completions class=md-nav__link> <span class=md-ellipsis> Completions </span> </a> </li> <li class=md-nav__item> <a href=#text-splitter class=md-nav__link> <span class=md-ellipsis> Text splitter </span> </a> </li> <li class=md-nav__item> <a href=#object-store class=md-nav__link> <span class=md-ellipsis> Object store </span> </a> </li> <li class=md-nav__item> <a href=#document-ranker class=md-nav__link> <span class=md-ellipsis> Document ranker </span> </a> </li> <li class=md-nav__item> <a href=#pipeline class=md-nav__link> <span class=md-ellipsis> Pipeline </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#provider-configs class=md-nav__link> <span class=md-ellipsis> Provider configs </span> </a> <nav class=md-nav aria-label="Provider configs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#openai-chatgpt class=md-nav__link> <span class=md-ellipsis> OpenAI (ChatGPT) </span> </a> <nav class=md-nav aria-label="OpenAI (ChatGPT)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-openrouter class=md-nav__link> <span class=md-ellipsis> Example: OpenRouter </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#anthropic-claude class=md-nav__link> <span class=md-ellipsis> Anthropic (Claude) </span> </a> </li> <li class=md-nav__item> <a href=#google-gemini class=md-nav__link> <span class=md-ellipsis> Google (Gemini) </span> </a> </li> <li class=md-nav__item> <a href=#hugging-face-inference class=md-nav__link> <span class=md-ellipsis> Hugging Face Inference </span> </a> </li> <li class=md-nav__item> <a href=#litellm class=md-nav__link> <span class=md-ellipsis> LiteLLM </span> </a> </li> <li class=md-nav__item> <a href=#llamaindex class=md-nav__link> <span class=md-ellipsis> LlamaIndex </span> </a> <nav class=md-nav aria-label=LlamaIndex> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-local-hf class=md-nav__link> <span class=md-ellipsis> Example: Local HF </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ollama class=md-nav__link> <span class=md-ellipsis> Ollama </span> </a> <nav class=md-nav aria-label=Ollama> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-gpt-oss class=md-nav__link> <span class=md-ellipsis> Example: GPT-OSS </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/optimization/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16h-.58l-.81-.81A7.07 7.07 0 0 0 18 11c0-3.87-3.13-7-7-7-1.5 0-3 .5-4.21 1.4-3.09 2.32-3.72 6.71-1.4 9.8s6.71 3.72 9.8 1.4l.81.81V18l5 5 2-2zm-7 0c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5M3 6 1 8V1h7L6 3H3zm18-5v7l-2-2V3h-3l-2-2zM6 19l2 2H1v-7l2 2v3z"/></svg> <span class=md-ellipsis> Optimization </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/persistence/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M2 12h2v5h16v-5h2v5c0 1.11-.89 2-2 2H4a2 2 0 0 1-2-2zm10 3 5.55-5.46-1.42-1.41L13 11.25V2h-2v9.25L7.88 8.13 6.46 9.55z"/></svg> <span class=md-ellipsis> Persistence </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/plotting/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.2 11.2c1.77 0 3.2 1.43 3.2 3.2s-1.43 3.2-3.2 3.2S4 16.17 4 14.4s1.43-3.2 3.2-3.2m7.6 4.8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m.4-12A4.8 4.8 0 0 1 20 8.8c0 2.65-2.15 4.8-4.8 4.8a4.8 4.8 0 0 1-4.8-4.8c0-2.65 2.15-4.8 4.8-4.8"/></svg> <span class=md-ellipsis> Plotting </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/portfolio/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17.45 15.18 22 7.31V21H2V3h2v12.54L9.5 6 16 9.78l4.24-7.33 1.73 1-5.23 9.05-6.51-3.75L4.31 19h2.26l4.39-7.56z"/></svg> <span class=md-ellipsis> Portfolio </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/signals/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 2c0-3.3-2.7-6-6-6s-6 2.7-6 6c0 2.2 1.2 4.1 3 5.2l1-1.7c-1.2-.7-2-2-2-3.4 0-2.2 1.8-4 4-4s4 1.8 4 4c0 1.5-.8 2.8-2 3.4l1 1.7c1.8-1 3-3 3-5.2M12 2C6.5 2 2 6.5 2 12c0 3.7 2 6.9 5 8.6l1-1.7c-2.4-1.4-4-4-4-6.9 0-4.4 3.6-8 8-8s8 3.6 8 8c0 3-1.6 5.5-4 6.9l1 1.7c3-1.7 5-4.9 5-8.6 0-5.5-4.5-10-10-10"/></svg> <span class=md-ellipsis> Signals </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-nav__link> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-nav__link> <span class=md-ellipsis> Terms </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=knowledge><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2zM4 4v13.17L5.17 16H20V4zm2 3h12v2H6zm0 4h9v2H6z"/></svg></span> Knowledge<a class=headerlink href=#knowledge title="Permanent link">&para;</a></h1> <h2 id=assets>Assets<a class=headerlink href=#assets title="Permanent link">&para;</a></h2> <p>Knowledge assets are instances of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset>KnowledgeAsset</a> that contain a list of Python objects (most often dicts) and provide various methods to manipulate them. For usage examples, see the API documentation for each specific method.</p> <h3 id=vbt-assets>VBT assets<a class=headerlink href=#vbt-assets title="Permanent link">&para;</a></h3> <p>There are two knowledge assets in VBT: 1) website pages, and 2) Discord messages. The first asset includes pages and headings from the (mainly private) website. Each data item represents either a page or a page heading. Pages generally point to one or more other pages or headings, while headings contain text content, all reflecting the structure of Markdown files. The second asset consists of messages from the "vectorbt.pro" Discord server, where each data item is a Discord message, which may reference other messages through replies.</p> <p>The assets are attached to each <a href=https://github.com/polakowo/vectorbt.pro/releases>release</a> as <code>pages.json.zip</code> and <code>messages.json.zip</code>. These are ZIP-compressed JSON files, managed by <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.PagesAsset>PagesAsset</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.MessagesAsset>MessagesAsset</a> classes, respectively. You can load them automatically or manually. For automatic loading, a GitHub token is required.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>The first pull will download the assets, and subsequent pulls will use cached versions. After upgrading VBT, new assets will be downloaded automatically.</p> </div> <div class="language-python highlight"><span class=filename>How to load an asset</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;GITHUB_TOKEN&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_GITHUB_TOKEN&gt;&quot;</span>  <span class=c1># (1)!</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=o>.</span><span class=n>pull</span><span class=p>()</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MessagesAsset</span><span class=o>.</span><span class=n>pull</span><span class=p>()</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.assets.vbt.token&quot;</span><span class=p>,</span> <span class=s2>&quot;YOUR_GITHUB_TOKEN&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=o>.</span><span class=n>pull</span><span class=p>()</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MessagesAsset</span><span class=o>.</span><span class=n>pull</span><span class=p>()</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=p>(</span><span class=o>/</span><span class=n>MessagesAsset</span><span class=p>)</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=n>release_name</span><span class=o>=</span><span class=s2>&quot;v2024.8.20&quot;</span><span class=p>)</span> <span class=c1># (3)!</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=p>(</span><span class=o>/</span><span class=n>MessagesAsset</span><span class=p>)</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;my_cache_dir&quot;</span><span class=p>)</span> <span class=c1># (4)!</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=p>(</span><span class=o>/</span><span class=n>MessagesAsset</span><span class=p>)</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=n>clear_cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=c1># (5)!</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=p>(</span><span class=o>/</span><span class=n>MessagesAsset</span><span class=p>)</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=n>pages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PagesAsset</span><span class=o>.</span><span class=n>from_json_file</span><span class=p>(</span><span class=s2>&quot;pages.json.zip&quot;</span><span class=p>)</span> <span class=c1># (7)!</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MessagesAsset</span><span class=o>.</span><span class=n>from_json_file</span><span class=p>(</span><span class=s2>&quot;messages.json.zip&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Set the token as an environment variable.</li> <li>Set the token as a global setting.</li> <li>Use the asset from a different release. By default, the asset of the installed release is used (see <code>vbt.version</code>).</li> <li>Specify a custom cache directory. By default, data is stored under <strong>$user_cache_dir/knowledge/vbt/$release_name/pages/assets/</strong> for pages and <strong>$user_cache_dir/knowledge/vbt/$release_name/messages/assets/</strong> for messages.</li> <li>Clear the cache directory and pull the asset again. By default, the asset will not be pulled if it already exists.</li> <li>Create a temporary directory.</li> <li>Load the asset file that has already been downloaded.</li> </ol> <h3 id=generic-assets>Generic assets<a class=headerlink href=#generic-assets title="Permanent link">&para;</a></h3> <p>Knowledge assets are not limited to VBT assets—you can build an asset from any list!</p> <div class="language-python highlight"><span class=filename>How to load an asset</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>KnowledgeAsset</span><span class=p>(</span><span class=n>my_list</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=n>asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>KnowledgeAsset</span><span class=o>.</span><span class=n>from_json_file</span><span class=p>(</span><span class=s2>&quot;my_list.json&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=n>asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>KnowledgeAsset</span><span class=o>.</span><span class=n>from_json_bytes</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>load_bytes</span><span class=p>(</span><span class=s2>&quot;my_list.json&quot;</span><span class=p>))</span>  <span class=c1># (3)!</span>
</span></code></pre></div> <ol> <li>Create an instance by wrapping a list directly.</li> <li>Create an instance from a JSON file.</li> <li>Create an instance from JSON bytes.</li> </ol> <h2 id=describing>Describing<a class=headerlink href=#describing title="Permanent link">&para;</a></h2> <p>Knowledge assets behave like regular lists, so to describe an asset, you should describe it as a list. This enables many analysis options, such as checking the length, printing out a random data item, and more advanced options like printing out the field schema. Most data items in an asset are dicts, so you can describe them by their fields.</p> <div class="language-python highlight"><span class=filename>How to describe an asset</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>asset</span><span class=p>))</span>  <span class=c1># (1)!</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=n>asset</span><span class=o>.</span><span class=n>sample</span><span class=p>()</span><span class=o>.</span><span class=n>print</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=n>asset</span><span class=o>.</span><span class=n>print_sample</span><span class=p>()</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=n>asset</span><span class=o>.</span><span class=n>print_schema</span><span class=p>()</span>  <span class=c1># (3)!</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=n>vbt</span><span class=o>.</span><span class=n>pprint</span><span class=p>(</span><span class=n>messages_asset</span><span class=o>.</span><span class=n>describe</span><span class=p>())</span>  <span class=c1># (4)!</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=n>pages_asset</span><span class=o>.</span><span class=n>print_site_schema</span><span class=p>()</span>  <span class=c1># (5)!</span>
</span></code></pre></div> <ol> <li>Get the number of data items.</li> <li>Pick a random data item and print it.</li> <li>Visualize the asset's field schema as a tree. Shows each field, including frequency and type. Works on all assets where data items are dicts.</li> <li>Describe each field. Works on all assets where data items are dicts.</li> <li>Visualize the URL schema as a tree. Works on pages and headings only.</li> </ol> <h2 id=manipulating>Manipulating<a class=headerlink href=#manipulating title="Permanent link">&para;</a></h2> <p>A knowledge asset is simply an advanced list: it looks like a VBT object, but behaves like a list. For manipulation, it provides a collection of methods ending with <code>item</code> or <code>items</code> to get, set, or remove data items—either by returning a new asset instance (default) or modifying the asset in place.</p> <div class="language-python highlight"><span class=filename>How to manipulate an asset</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>d</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>get_items</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=n>d</span> <span class=o>=</span> <span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=n>data</span> <span class=o>=</span> <span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>100</span><span class=p>]</span>  <span class=c1># (2)!</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=n>data</span> <span class=o>=</span> <span class=n>asset</span><span class=p>[</span><span class=n>mask</span><span class=p>]</span>  <span class=c1># (3)!</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=n>data</span> <span class=o>=</span> <span class=n>asset</span><span class=p>[</span><span class=n>indices</span><span class=p>]</span>  <span class=c1># (4)!</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>set_items</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>new_d</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=n>asset</span><span class=o>.</span><span class=n>set_items</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>new_d</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_d</span>  <span class=c1># (7)!</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>100</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_data</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=n>asset</span><span class=p>[</span><span class=n>mask</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_data</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=n>asset</span><span class=p>[</span><span class=n>indices</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_data</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>delete_items</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=n>asset</span><span class=o>.</span><span class=n>delete_items</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=n>asset</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=k>del</span> <span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=k>del</span> <span class=n>asset</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>100</span><span class=p>]</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=k>del</span> <span class=n>asset</span><span class=p>[</span><span class=n>mask</span><span class=p>]</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=k>del</span> <span class=n>asset</span><span class=p>[</span><span class=n>indices</span><span class=p>]</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>append_item</span><span class=p>(</span><span class=n>new_d</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=n>asset</span><span class=o>.</span><span class=n>append_item</span><span class=p>(</span><span class=n>new_d</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=n>asset</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_d</span><span class=p>)</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>extend_items</span><span class=p>([</span><span class=n>new_d1</span><span class=p>,</span> <span class=n>new_d2</span><span class=p>])</span>  <span class=c1># (10)!</span>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=n>asset</span><span class=o>.</span><span class=n>extend_items</span><span class=p>([</span><span class=n>new_d1</span><span class=p>,</span> <span class=n>new_d2</span><span class=p>],</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=n>asset</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=n>new_d1</span><span class=p>,</span> <span class=n>new_d2</span><span class=p>])</span>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class=n>asset</span> <span class=o>+=</span> <span class=p>[</span><span class=n>new_d1</span><span class=p>,</span> <span class=n>new_d2</span><span class=p>]</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=nb>print</span><span class=p>(</span><span class=n>d</span> <span class=ow>in</span> <span class=n>asset</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a><span class=nb>print</span><span class=p>(</span><span class=n>asset</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>  <span class=c1># (12)!</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=nb>print</span><span class=p>(</span><span class=n>asset</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>  <span class=c1># (13)!</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-3-46><a id=__codelineno-3-46 name=__codelineno-3-46 href=#__codelineno-3-46></a>
</span><span id=__span-3-47><a id=__codelineno-3-47 name=__codelineno-3-47 href=#__codelineno-3-47></a><span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=n>asset</span><span class=p>:</span>  <span class=c1># (14)!</span>
</span><span id=__span-3-48><a id=__codelineno-3-48 name=__codelineno-3-48 href=#__codelineno-3-48></a>    <span class=o>...</span>
</span></code></pre></div> <ol> <li>Get the first data item.</li> <li>Get the first 100 data items.</li> <li>Get the data items that correspond to True in the mask.</li> <li>Get the data items at the positions in the index array.</li> <li>Set the first data item and return a new asset instance.</li> <li>Set the first data item by modifying the asset in place.</li> <li>Built-in methods always modify the existing asset instance.</li> <li>Remove the first data item.</li> <li>Append a new data item.</li> <li>Extend with new data items.</li> <li>Check if the asset contains a data item.</li> <li>Get the position of a data item in the asset.</li> <li>Get the number of data items matching a specific data item.</li> <li>Iterate over data items.</li> </ol> <h2 id=querying>Querying<a class=headerlink href=#querying title="Permanent link">&para;</a></h2> <p>A wide range of methods are available to query an asset: <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.get>get</a> / <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.select>select</a>, <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.query>query</a> / <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.filter>filter</a>, and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.find>find</a>. The first pair is used to get and process one or more fields from each data item. The <code>get</code> method returns the raw output, while the <code>select</code> method returns a new asset instance. The second pair lets you run queries on the asset using various engines, such as JMESPath. Again, the <code>query</code> method returns the raw output, while the <code>filter</code> method returns a new asset instance. Finally, the <code>find</code> method is specialized for searching across one or more fields. By default, it returns a new asset instance.</p> <div class="language-python highlight"><span class=filename>How to query an asset</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=n>messages</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=n>total_reactions</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>messages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;reactions&quot;</span><span class=p>))</span>  <span class=c1># (2)!</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=n>first_attachments</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;attachments[0][&#39;content&#39;]&quot;</span><span class=p>,</span> <span class=n>skip_missing</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=n>first_attachments</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;attachments.0.content&quot;</span><span class=p>,</span> <span class=n>skip_missing</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=n>stripped_contents</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=s2>&quot;x.strip() if x else &#39;&#39;&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=n>stripped_contents</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>if</span> <span class=n>x</span> <span class=k>else</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=n>stripped_contents</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=s2>&quot;content.strip() if content else &#39;&#39;&quot;</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=c1># (8)!</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=n>all_contents</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;content&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>remove_empty</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (9)!</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=n>all_attachments</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;attachments&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>merge</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (10)!</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=n>combined_content</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=n>source</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>Sub</span><span class=p>(</span><span class=s1>&#39;[$author] $content&#39;</span><span class=p>))</span><span class=o>.</span><span class=n>join</span><span class=p>()</span>  <span class=c1># (11)!</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=n>user_questions</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&quot;content if &#39;@maintainer&#39; in mentions else vbt.NoResult&quot;</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=n>is_user_question</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&quot;&#39;@maintainer&#39; in mentions&quot;</span><span class=p>,</span> <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;bool&quot;</span><span class=p>)</span>  <span class=c1># (13)!</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=n>all_attachments</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&quot;[].attachments | []&quot;</span><span class=p>,</span> <span class=n>query_engine</span><span class=o>=</span><span class=s2>&quot;jmespath&quot;</span><span class=p>)</span>  <span class=c1># (14)!</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=n>all_classes</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>query</span><span class=p>(</span><span class=s2>&quot;name[obj_type == &#39;class&#39;].sort_values()&quot;</span><span class=p>,</span> <span class=n>query_engine</span><span class=o>=</span><span class=s2>&quot;pandas&quot;</span><span class=p>)</span>  <span class=c1># (15)!</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=c1># (16)!</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=n>support</span> <span class=n>messages</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&quot;channel == &#39;support&#39;&quot;</span><span class=p>)</span>  <span class=c1># (17)!</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;@maintainer&quot;</span><span class=p>)</span>  <span class=c1># (18)!</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;@maintainer&quot;</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=s2>&quot;author&quot;</span><span class=p>)</span>  <span class=c1># (19)!</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Not</span><span class=p>(</span><span class=s2>&quot;@maintainer&quot;</span><span class=p>),</span> <span class=n>path</span><span class=o>=</span><span class=s2>&quot;author&quot;</span><span class=p>)</span>  <span class=c1># (20)!</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>  <span class=c1># (21)!</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>    <span class=p>[</span><span class=s2>&quot;@maintainer&quot;</span><span class=p>,</span> <span class=s2>&quot;from_signals&quot;</span><span class=p>],</span> 
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a>    <span class=n>path</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;author&quot;</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>],</span> 
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a>    <span class=n>find_all</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a><span class=p>)</span>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a>
</span><span id=__span-4-37><a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a><span class=n>found_fields</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>  <span class=c1># (22)!</span>
</span><span id=__span-4-38><a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a>    <span class=p>[</span><span class=s2>&quot;vbt.Portfolio&quot;</span><span class=p>,</span> <span class=s2>&quot;vbt.PF&quot;</span><span class=p>],</span> 
</span><span id=__span-4-39><a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a>    <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;field&quot;</span>
</span><span id=__span-4-40><a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span><span id=__span-4-41><a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a><span class=n>found_code_matches</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>  <span class=c1># (23)!</span>
</span><span id=__span-4-42><a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a>    <span class=sa>r</span><span class=s2>&quot;(?&lt;!`)`([^`]*)`(?!`)&quot;</span><span class=p>,</span> 
</span><span id=__span-4-43><a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a>    <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;regex&quot;</span><span class=p>,</span> 
</span><span id=__span-4-44><a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a>    <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span><span class=p>,</span>
</span><span id=__span-4-45><a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a><span class=p>)</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span></code></pre></div> <ol> <li>Get all data items. This is the same as <code>messages_asset.data</code>.</li> <li>Get the value from a simple field in each data item. Here, retrieve and sum the number of reactions.</li> <li>Get the value from a nested field in each data item. If the field does not always exist, skip data items where it is missing.</li> <li>You can also use dot notation for the path to the value.</li> <li>Post-process the value using a source expression. Here, strip the selected value for "content".</li> <li>The source can also be a function.</li> <li>If no value is selected, the source expression or function is applied to the entire data item, with the data item referred to as "x" and its fields accessed by name.</li> <li>If you need to process results further, use <code>select</code> instead of <code>get</code>. It accepts the same arguments.</li> <li>Select contents while removing None and empty strings.</li> <li>Select attachments, merge them into a list, and extract.</li> <li>Format the author and content into a string, then join those strings.</li> <li>Return the content if <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> is in mentions; otherwise, ignore. The expression here works similarly to the source expression in <code>get</code>.</li> <li>Return True if <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> is in mentions; otherwise, return False. Without <code>return_type="bool"</code>, it would act as a filter and return the data items matching the condition.</li> <li>Use JMESPath to extract all attachments.</li> <li>You can also use Pandas as a query engine, where each field becomes a Series. Here, get the heading name for every data item with object type "class", and sort.</li> <li>If you need to process results further, use <code>filter</code> instead of <code>query</code>. It accepts the same arguments.</li> <li>Filter messages that belong to the support channel.</li> <li>Find messages that mention <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> in any field.</li> <li>Find messages where <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> is the author.</li> <li>Find messages where <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> is not the author.</li> <li>Find messages where <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> is the author and <code>from_signals</code> is mentioned in the content. If <code>find_all</code> is False, the conjunction would be "or".</li> <li>Find all fields mentioning either <code>vbt.Portfolio</code> or <code>vbt.PF</code>.</li> <li>Find all regex matches for code snippets using a single backtick.</li> </ol> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To make chained calls easier to read, use either of the following styles:</p> <div class="language-python highlight"><span class=filename>How to find admonition types</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>admonition_types</span> <span class=o>=</span> <span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=n>pages_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>        <span class=sa>r</span><span class=s2>&quot;!!!\s+(\w+)&quot;</span><span class=p>,</span> 
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>        <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;regex&quot;</span><span class=p>,</span> 
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>        <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>    <span class=p>)</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    <span class=o>.</span><span class=n>sort</span><span class=p>()</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>    <span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=p>)</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=n>admonition_types</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>chain</span><span class=p>([</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=p>(</span><span class=s2>&quot;find&quot;</span><span class=p>,</span> <span class=p>(</span><span class=sa>r</span><span class=s2>&quot;!!!\s+(\w+)&quot;</span><span class=p>,),</span> <span class=nb>dict</span><span class=p>(</span><span class=n>mode</span><span class=o>=</span><span class=s2>&quot;regex&quot;</span><span class=p>,</span> <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span><span class=p>)),</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=s2>&quot;sort&quot;</span><span class=p>,</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=s2>&quot;get&quot;</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=p>])</span>
</span></code></pre></div> </div> <h3 id=code>Code<a class=headerlink href=#code title="Permanent link">&para;</a></h3> <p>There is a specialized method for finding code, either in single backticks or code blocks.</p> <div class="language-python highlight"><span class=filename>How to find code</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=n>language</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=n>language</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (3)!</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=s2>&quot;from_signals&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (4)!</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=s2>&quot;from_signals&quot;</span><span class=p>,</span> <span class=n>in_blocks</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (5)!</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=n>found_code_blocks</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=s2>&quot;from_signals&quot;</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=s2>&quot;attachments&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>  <span class=c1># (6)!</span>
</span></code></pre></div> <ol> <li>Find any code blocks across all fields.</li> <li>Find any Python code blocks across all fields.</li> <li>Find code blocks annotated with any language across all fields.</li> <li>Find code blocks that mention <code>from_signals</code> across all fields.</li> <li>Find code that mentions <code>from_signals</code> across all fields.</li> <li>Find code blocks that mention <code>from_signals</code> within attachments.</li> </ol> <h3 id=links>Links<a class=headerlink href=#links title="Permanent link">&para;</a></h3> <p>Custom knowledge assets like pages and messages have specialized methods for finding data items by their link. The default behavior matches the target against the end of each link. This approach ensures that searching for both "<a href=https://vectorbt.pro/become-a-member/ >https://vectorbt.pro/become-a-member/</a>" and "become-a-member/" will consistently return "<a href=https://vectorbt.pro/become-a-member/ >https://vectorbt.pro/become-a-member/</a>". When using "exact" or "end" mode, a variant with or without a slash is automatically included. This way, searching for "become-a-member" (without a slash) will still return "<a href=https://vectorbt.pro/become-a-member/ >https://vectorbt.pro/become-a-member/</a>". The method also ignores other matched links like "<a href=https://vectorbt.pro/become-a-member/#become-a-member>https://vectorbt.pro/become-a-member/#become-a-member</a>" since they belong to the same page.</p> <div class="language-python highlight"><span class=filename>How to find links</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_link</span><span class=p>(</span>  <span class=c1># (1)!</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>    <span class=s2>&quot;https://discord.com/channels/918629562441695344/919715148896301067/923327319882485851&quot;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=p>)</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>find_link</span><span class=p>(</span><span class=s2>&quot;919715148896301067/923327319882485851&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span>  <span class=c1># (3)!</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    <span class=s2>&quot;https://vectorbt.pro/pvt_xxxxxxxx/getting-started/installation/&quot;</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=p>)</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span><span class=s2>&quot;https://vectorbt.pro/pvt_41531c19/getting-started/installation/&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span><span class=s2>&quot;installation/&quot;</span><span class=p>)</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span><span class=s2>&quot;installation&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span><span class=s2>&quot;installation&quot;</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span></code></pre></div> <ol> <li>Find the message using a Discord URL.</li> <li>Find the message using a suffix such as <code>channel_id/message_id</code>.</li> <li>Find the page using a website URL.</li> <li>Find the page using a suffix.</li> <li>A slash will be added automatically if needed.</li> <li>Find the page and also <a href=#aggregating>aggregate</a> it.</li> </ol> <h3 id=objects>Objects<a class=headerlink href=#objects title="Permanent link">&para;</a></h3> <p>You can also find headings that correspond to VBT objects.</p> <div class="language-python highlight"><span class=filename>How to find an object</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PF</span><span class=o>.</span><span class=n>from_signals</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>pf_nb</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=s2>&quot;SignalContext&quot;</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Get the top-level heading corresponding to the class <code>Portfolio</code>.</li> <li>Get the top-level heading corresponding to the class <code>Portfolio</code> along with all sub-headings.</li> </ol> <h3 id=nodes>Nodes<a class=headerlink href=#nodes title="Permanent link">&para;</a></h3> <p>You can also traverse pages and messages in a way similar to navigating nodes within a graph.</p> <div class="language-python highlight"><span class=filename>How to traverse an asset</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>new_vbt_asset</span> <span class=o>=</span> <span class=n>vbt_asset</span><span class=o>.</span><span class=n>select_previous</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=n>new_vbt_asset</span> <span class=o>=</span> <span class=n>vbt_asset</span><span class=o>.</span><span class=n>select_next</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_parent</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_children</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_siblings</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_descendants</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_branch</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_ancestors</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_parent_page</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_descendant_headings</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select_reference</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select_replies</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select_block</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select_thread</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select_channel</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>These methods and those below work on both pages and messages.</li> <li>These methods and those below do not include the link by default (use <code>incl_link=True</code> to include it).</li> <li>These methods and those below include the link by default (use <code>incl_link=False</code> to exclude it).</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Each operation requires at least one full data pass; use sparingly.</p> </div> <h2 id=applying>Applying<a class=headerlink href=#applying title="Permanent link">&para;</a></h2> <p>"Find" and many other methods rely on <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.apply>KnowledgeAsset.apply</a>, which executes a function on each data item. These are called asset functions and consist of two parts: argument preparation and function calling. The main advantage is that arguments are prepared only once, then passed to each function call. Execution is managed by the powerful <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute>execute</a> function, which supports parallelization.</p> <div class="language-python highlight"><span class=filename>How to apply a function to an asset</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>links</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=s2>&quot;get&quot;</span><span class=p>,</span> <span class=s2>&quot;link&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro.knowledge.base_asset_funcs</span><span class=w> </span><span class=kn>import</span> <span class=n>GetAssetFunc</span>  <span class=c1># (2)!</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=n>args</span><span class=p>,</span> <span class=n>kwargs</span> <span class=o>=</span> <span class=n>GetAssetFunc</span><span class=o>.</span><span class=n>prepare</span><span class=p>(</span><span class=s2>&quot;link&quot;</span><span class=p>)</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=n>links</span> <span class=o>=</span> <span class=p>[</span><span class=n>GetAssetFunc</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=n>messages_asset</span><span class=p>]</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=n>links_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=k>lambda</span> <span class=n>d</span><span class=p>:</span> <span class=n>d</span><span class=p>[</span><span class=s2>&quot;link&quot;</span><span class=p>])</span>  <span class=c1># (3)!</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=n>links</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=k>lambda</span> <span class=n>d</span><span class=p>:</span> <span class=n>d</span><span class=p>[</span><span class=s2>&quot;link&quot;</span><span class=p>],</span> <span class=n>wrap</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=n>json_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>dump</span><span class=p>,</span> <span class=n>dump_engine</span><span class=o>=</span><span class=s2>&quot;json&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span>  <span class=c1># (6)!</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a>    <span class=n>execute_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>        <span class=n>n_chunks</span><span class=o>=</span><span class=s2>&quot;auto&quot;</span><span class=p>,</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a>        <span class=n>distribute</span><span class=o>=</span><span class=s2>&quot;chunks&quot;</span><span class=p>,</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a>        <span class=n>engine</span><span class=o>=</span><span class=s2>&quot;processpool&quot;</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>    <span class=p>)</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=p>)</span>
</span></code></pre></div> <ol> <li>Apply a built-in function. This is equivalent to <code>get("link")</code>. Depending on the function, either a new asset instance or the raw output is returned.</li> <li>The same as above, but performed manually.</li> <li>Apply a custom function. By default, returns a new asset instance.</li> <li>Apply a custom function and return the raw output.</li> <li>Any function that takes a single argument can be used. Here, each message is serialized with JSON.</li> <li>Any operation can be distributed by specifying execution-related keyword arguments.</li> </ol> <h3 id=pipelines>Pipelines<a class=headerlink href=#pipelines title="Permanent link">&para;</a></h3> <p>Most examples show how to run a chain of standalone operations, but each operation processes the data at least once. To process data just once, regardless of the number of operations, use asset pipelines. There are two types: basic and complex. Basic pipelines take a list of tasks (such as functions and their arguments) and compose them into a single operation that acts on a data item. This composed operation is then applied to all data items. Complex pipelines use a Python expression in a functional style, where one function receives a data item and returns a result that becomes the argument for the next function.</p> <div class="language-python highlight"><span class=filename>How to apply a pipeline to an asset</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>tasks</span> <span class=o>=</span> <span class=p>[(</span><span class=s2>&quot;find&quot;</span><span class=p>,</span> <span class=p>(</span><span class=s2>&quot;@maintainer&quot;</span><span class=p>,),</span> <span class=nb>dict</span><span class=p>(</span><span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span><span class=p>)),</span> <span class=nb>len</span><span class=p>,</span> <span class=s2>&quot;get&quot;</span><span class=p>]</span>  <span class=c1># (1)!</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span><span class=n>vbt</span><span class=o>.</span><span class=n>Task</span><span class=p>(</span><span class=s2>&quot;find&quot;</span><span class=p>,</span> <span class=s2>&quot;@maintainer&quot;</span><span class=p>,</span> <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Task</span><span class=p>(</span><span class=nb>len</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Task</span><span class=p>(</span><span class=s2>&quot;get&quot;</span><span class=p>)]</span>  <span class=c1># (2)!</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=n>mention_count</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>tasks</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=n>asset_pipeline</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>BasicAssetPipeline</span><span class=p>(</span><span class=n>tasks</span><span class=p>)</span> <span class=c1># (4)!</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=n>mention_count</span> <span class=o>=</span> <span class=p>[</span><span class=n>asset_pipeline</span><span class=p>(</span><span class=n>d</span><span class=p>)</span> <span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=n>messages_asset</span><span class=p>]</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=n>expression</span> <span class=o>=</span> <span class=s2>&quot;get(len(find(d, &#39;@maintainer&#39;, return_type=&#39;match&#39;)))&quot;</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=n>mention_count</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=n>asset_pipeline</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>ComplexAssetPipeline</span><span class=p>(</span><span class=n>expression</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=n>mention_count</span> <span class=o>=</span> <span class=p>[</span><span class=n>asset_pipeline</span><span class=p>(</span><span class=n>d</span><span class=p>)</span> <span class=k>for</span> <span class=n>d</span> <span class=ow>in</span> <span class=n>messages_asset</span><span class=p>]</span>
</span></code></pre></div> <ol> <li>Tasks can be provided as strings, tuples, or functions.</li> <li>Tasks can also be given as instances of <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.Task>Task</a>.</li> <li>Use a list of tasks to get the number of <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> mentions in each message.</li> <li>The same as above, but performed manually.</li> <li>Use an expression to get the number of <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> mentions in each message.</li> <li>The same as above, but performed manually.</li> </ol> <div class="admonition info"> <p class=admonition-title>Info</p> <p>In both pipeline types, arguments are prepared only once during initialization.</p> </div> <h3 id=reducing>Reducing<a class=headerlink href=#reducing title="Permanent link">&para;</a></h3> <p><a href=https://realpython.com/python-reduce-function/ >Reducing</a> means merging all data items into one. This requires a function that takes two data items. Initially, these two data items are the initializer (such as an empty dict) and the first data item. If the initializer is unknown, the first two data items are used. The result of this first iteration is then used as the first data item in the next iteration. Execution is handled by <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.reduce>KnowledgeAsset.reduce</a> and cannot be parallelized since each iteration depends on the previous one.</p> <div class="language-python highlight"><span class=filename>How to reduce an asset</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>all_attachments</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;attachments&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reduce</span><span class=p>(</span><span class=s2>&quot;merge_lists&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro.knowledge.base_asset_funcs</span><span class=w> </span><span class=kn>import</span> <span class=n>MergeListsAssetFunc</span>  <span class=c1># (2)!</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=n>args</span><span class=p>,</span> <span class=n>kwargs</span> <span class=o>=</span> <span class=n>MergeListsAssetFunc</span><span class=o>.</span><span class=n>prepare</span><span class=p>()</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=n>d1</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=k>for</span> <span class=n>d2</span> <span class=ow>in</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;attachments&quot;</span><span class=p>):</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>    <span class=n>d1</span> <span class=o>=</span> <span class=n>MergeListsAssetFunc</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>d1</span><span class=p>,</span> <span class=n>d2</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=n>all_attachments</span> <span class=o>=</span> <span class=n>d1</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=n>total_reactions</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;reactions&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reduce</span><span class=p>(</span><span class=k>lambda</span> <span class=n>d1</span><span class=p>,</span> <span class=n>d2</span><span class=p>:</span> <span class=n>d1</span> <span class=o>+</span> <span class=n>d2</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span></code></pre></div> <ol> <li>Apply a built-in function. This is equivalent to <code>select("attachments").merge_lists()</code>. Depending on the function, either a new asset instance or the raw output is returned.</li> <li>The same as above, but performed manually.</li> <li>Apply a custom function. By default, returns the raw output.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>You can also split a knowledge asset into groups and reduce those groups. Group iteration is handled by the <a href=https://vectorbt.pro/pvt_41531c19/api/utils/execution/#vectorbtpro.utils.execution.execute>execute</a> function, which supports parallelization.</p> <div class="language-python highlight"><span class=filename>How to reduce groups of an asset</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=n>reactions_by_channel</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>groupby_reduce</span><span class=p>(</span>  <span class=c1># (1)!</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>    <span class=k>lambda</span> <span class=n>d1</span><span class=p>,</span> <span class=n>d2</span><span class=p>:</span> <span class=n>d1</span> <span class=o>+</span> <span class=n>d2</span><span class=p>[</span><span class=s2>&quot;reactions&quot;</span><span class=p>],</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>    <span class=n>by</span><span class=o>=</span><span class=s2>&quot;channel&quot;</span><span class=p>,</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>    <span class=n>initializer</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    <span class=n>return_group_keys</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=p>)</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=n>result</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>groupby_reduce</span><span class=p>(</span>  <span class=c1># (2)!</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>    <span class=n>execute_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>        <span class=n>n_chunks</span><span class=o>=</span><span class=s2>&quot;auto&quot;</span><span class=p>,</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>        <span class=n>distribute</span><span class=o>=</span><span class=s2>&quot;chunks&quot;</span><span class=p>,</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>        <span class=n>engine</span><span class=o>=</span><span class=s2>&quot;processpool&quot;</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=p>)</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=p>)</span>
</span></code></pre></div> <ol> <li>Get the total number of reactions per channel.</li> <li>Any group-by operation can be distributed by specifying execution-related keyword arguments.</li> </ol> <h2 id=aggregating>Aggregating<a class=headerlink href=#aggregating title="Permanent link">&para;</a></h2> <p>Since headings are represented as individual data items, they can be aggregated back into their parent page. This is useful when you want to <a href=#formatting>format</a> or <a href=#browsing>display</a> the page. Note that only headings can be aggregated; pages themselves cannot be aggregated into other pages.</p> <div class="language-python highlight"><span class=filename>How to aggregate pages</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>append_obj_type</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>append_github_link</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span></code></pre></div> <ol> <li>Aggregate headings into the content of the parent page.</li> <li>The same as above, but do not append object type and GitHub source to the API headings.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>Messages, on the other hand, can be aggregated across multiple levels: <em>"message"</em>, <em>"block"</em>, <em>"thread"</em>, and <em>"channel"</em>. Aggregation here means collecting messages that belong to the specified level, and dumping them into the content of a single, bigger message.</p> <ul> <li>The <em>"message"</em> level means attachments are included in the content of the message.</li> <li>The <em>"block"</em> level combines messages from the same author that reference the same block or do not reference anything. The link for the block is the link of the first message in the block.</li> <li>The <em>"thread"</em> level combines messages from the same channel that are connected by a chain of replies. The link for the thread is the link of the first message in the thread.</li> <li>The <em>"channel"</em> level combines all messages that belong to the same channel.</li> </ul> <div class="language-python highlight"><span class=filename>How to aggregate messages</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s2>&quot;message&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s2>&quot;block&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s2>&quot;thread&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>by</span><span class=o>=</span><span class=s2>&quot;channel&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>    <span class=n>minimize_metadata</span><span class=o>=</span><span class=kc>True</span>  <span class=c1># (6)!</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=p>)</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=n>new_messages_asset</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>    <span class=o>...</span><span class=p>,</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a>    <span class=n>dump_metadata_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dump_engine</span><span class=o>=</span><span class=s2>&quot;nestedtext&quot;</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=p>)</span>
</span></code></pre></div> <ol> <li>Aggregate into the content of the parent if only one parent exists; otherwise, an error will be raised.</li> <li>Aggregate attachments into the content of the parent message.</li> <li>Aggregate messages into the content of the parent block.</li> <li>Aggregate messages into the content of the parent thread.</li> <li>Aggregate messages into the content of the parent channel.</li> <li>Remove irrelevant keys from metadata before dumping.</li> <li>When adding messages into the parent content, dump their metadata using the selected engine (here, NestedText).</li> </ol> <h2 id=formatting>Formatting<a class=headerlink href=#formatting title="Permanent link">&para;</a></h2> <p>Most Python objects can be dumped (that is, serialized) into strings.</p> <div class="language-python highlight"><span class=filename>How to dump an asset</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>dump</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>dump_engine</span><span class=o>=</span><span class=s2>&quot;nestedtext&quot;</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=nb>print</span><span class=p>(</span><span class=n>asset</span><span class=o>.</span><span class=n>dump</span><span class=p>()</span><span class=o>.</span><span class=n>join</span><span class=p>())</span>  <span class=c1># (3)!</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=nb>print</span><span class=p>(</span><span class=n>asset</span><span class=o>.</span><span class=n>dump</span><span class=p>()</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>separator</span><span class=o>=</span><span class=s2>&quot;</span><span class=se>\n\n</span><span class=s2>---------------------</span><span class=se>\n\n</span><span class=s2>&quot;</span><span class=p>))</span>  <span class=c1># (4)!</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=nb>print</span><span class=p>(</span><span class=n>asset</span><span class=o>.</span><span class=n>dump_all</span><span class=p>())</span>  <span class=c1># (5)!</span>
</span></code></pre></div> <ol> <li>Dump each data item. By default, items are dumped into YAML using Ruamel (if installed) or PyYAML.</li> <li>Dump each data item using a custom engine. In this example, NestedText is used with 4 spaces for indentation.</li> <li>Join all dumped data items. The separator is selected automatically.</li> <li>Join all dumped data items using a custom separator.</li> <li>Dump the entire list as a single object.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>Custom knowledge assets such as pages and messages can be converted, and optionally saved, in Markdown or HTML format. Only the "content" field will be converted; other fields are used to build the metadata block shown at the start of each file.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Without <a href=#aggregating>aggregation</a>, each page heading will become a separate file.</p> </div> <div class="language-python highlight"><span class=filename>How to format an asset</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_markdown</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_markdown</span><span class=p>(</span><span class=n>root_metadata_key</span><span class=o>=</span><span class=s2>&quot;pages&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_markdown</span><span class=p>(</span><span class=n>clear_metadata</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_markdown</span><span class=p>(</span><span class=n>remove_code_title</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>even_indentation</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>save_to_markdown</span><span class=p>()</span>  <span class=c1># (5)!</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>save_to_markdown</span><span class=p>(</span><span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;markdown&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>save_to_markdown</span><span class=p>(</span><span class=n>clear_cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>save_to_markdown</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=c1># (9)!</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>()</span>  <span class=c1># (10)!</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>(</span><span class=n>to_markdown_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>root_metadata_key</span><span class=o>=</span><span class=s2>&quot;pages&quot;</span><span class=p>))</span>  <span class=c1># (11)!</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>(</span><span class=n>make_links</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>(</span><span class=n>extensions</span><span class=o>=</span><span class=p>[],</span> <span class=n>use_pygments</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (13)!</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=n>extensions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.markdown_kwargs.extensions&quot;</span><span class=p>)</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>(</span><span class=n>extensions</span><span class=o>=</span><span class=n>extensions</span> <span class=o>+</span> <span class=p>[</span><span class=s2>&quot;pymdownx.smartsymbols&quot;</span><span class=p>])</span>  <span class=c1># (14)!</span>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=n>extensions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.markdown_kwargs.extensions&quot;</span><span class=p>)</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a><span class=n>extensions</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;pymdownx.smartsymbols&quot;</span><span class=p>)</span>  <span class=c1># (15)!</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=n>extension_configs</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.markdown_kwargs.extension_configs&quot;</span><span class=p>)</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a><span class=n>extension_configs</span><span class=p>[</span><span class=s2>&quot;pymdownx.superfences&quot;</span><span class=p>][</span><span class=s2>&quot;preserve_tabs&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># (16)!</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a><span class=n>new_pages_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>to_html</span><span class=p>(</span><span class=n>format_html_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>pygments_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>style</span><span class=o>=</span><span class=s2>&quot;dracula&quot;</span><span class=p>)))</span>  <span class=c1># (17)!</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.pygments_kwargs.style&quot;</span><span class=p>,</span> <span class=s2>&quot;dracula&quot;</span><span class=p>)</span>  <span class=c1># (18)!</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a><span class=n>style_extras</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.style_extras&quot;</span><span class=p>)</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a><span class=n>style_extras</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a><span class=s2>.admonition.success {</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a><span class=s2>    background-color: #00c8531a;</span>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a><span class=s2>    border-left-color: #00c853;</span>
</span><span id=__span-17-37><a id=__codelineno-17-37 name=__codelineno-17-37 href=#__codelineno-17-37></a><span class=s2>}</span>
</span><span id=__span-17-38><a id=__codelineno-17-38 name=__codelineno-17-38 href=#__codelineno-17-38></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>  <span class=c1># (19)!</span>
</span><span id=__span-17-39><a id=__codelineno-17-39 name=__codelineno-17-39 href=#__codelineno-17-39></a>
</span><span id=__span-17-40><a id=__codelineno-17-40 name=__codelineno-17-40 href=#__codelineno-17-40></a><span class=n>head_extras</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.head_extras&quot;</span><span class=p>)</span>
</span><span id=__span-17-41><a id=__codelineno-17-41 name=__codelineno-17-41 href=#__codelineno-17-41></a><span class=n>head_extras</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;&lt;link ...&gt;&#39;</span><span class=p>)</span>  <span class=c1># (20)!</span>
</span><span id=__span-17-42><a id=__codelineno-17-42 name=__codelineno-17-42 href=#__codelineno-17-42></a>
</span><span id=__span-17-43><a id=__codelineno-17-43 name=__codelineno-17-43 href=#__codelineno-17-43></a><span class=n>body_extras</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting.body_extras&quot;</span><span class=p>)</span>
</span><span id=__span-17-44><a id=__codelineno-17-44 name=__codelineno-17-44 href=#__codelineno-17-44></a><span class=n>body_extras</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;&lt;script&gt;...&lt;/script&gt;&#39;</span><span class=p>)</span>  <span class=c1># (21)!</span>
</span><span id=__span-17-45><a id=__codelineno-17-45 name=__codelineno-17-45 href=#__codelineno-17-45></a>
</span><span id=__span-17-46><a id=__codelineno-17-46 name=__codelineno-17-46 href=#__codelineno-17-46></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.formatting&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>  <span class=c1># (22)!</span>
</span><span id=__span-17-47><a id=__codelineno-17-47 name=__codelineno-17-47 href=#__codelineno-17-47></a>
</span><span id=__span-17-48><a id=__codelineno-17-48 name=__codelineno-17-48 href=#__codelineno-17-48></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>save_to_html</span><span class=p>()</span>  <span class=c1># (23)!</span>
</span><span id=__span-17-49><a id=__codelineno-17-49 name=__codelineno-17-49 href=#__codelineno-17-49></a>
</span><span id=__span-17-50><a id=__codelineno-17-50 name=__codelineno-17-50 href=#__codelineno-17-50></a><span class=c1># (24)!</span>
</span></code></pre></div> <ol> <li>Convert each data item to a Markdown-formatted string. Returns a new asset instance with a list of strings.</li> <li>Prepend a root key called "pages" (or "messages" for messages) to the metadata block.</li> <li>Keep empty fields in the metadata block. By default, empty fields are removed.</li> <li>Keep the content as is, without removing code titles or adjusting uneven indentation.</li> <li>Save each data item to a Markdown-formatted file. Returns the path to the parent directory. By default, saves to <strong>$user_cache_dir/knowledge/vbt/$release_name/pages/markdown/</strong> for pages and <strong>$user_cache_dir/knowledge/vbt/$release_name/messages/markdown/</strong> for messages.</li> <li>Specify a different cache directory.</li> <li>Clear the cache directory before saving. By default, a data item is skipped if its file already exists.</li> <li>Create a temporary directory.</li> <li>The <code>save_to_markdown</code> method accepts the same arguments as <code>to_markdown</code>.</li> <li>Convert each data item to an HTML-formatted string. Returns a new asset instance with a list of strings.</li> <li>The same options available for the <code>to_markdown</code> method can be set using <code>to_markdown_kwargs</code>.</li> <li>If a URL is found in text, do not make it a link. By default, all URLs become clickable.</li> <li>Disable all Markdown extensions and do not use Pygments for highlighting.</li> <li>Add a new extension to the preset list of Markdown extensions (locally).</li> <li>Add a new extension to the preset list of Markdown extensions (globally).</li> <li>Change a configuration of a Markdown extension.</li> <li>Change the default Pygments highlighting style (locally).</li> <li>Change the default Pygments highlighting style (globally).</li> <li>Add extra CSS at the end of the <code>&lt;style&gt;</code> element.</li> <li>Add extra HTML, such as links, at the end of the <code>&lt;head&gt;</code> element.</li> <li>Add extra HTML, such as JavaScript, at the end of the <code>&lt;body&gt;</code> element.</li> <li>Reset formatting.</li> <li>Save each data item to an HTML-formatted file. Returns the path to the parent directory. By default, saves to <strong>$user_cache_dir/knowledge/vbt/$release_name/pages/html/</strong> for pages and <strong>$user_cache_dir/knowledge/vbt/$release_name/pages/html/</strong> for messages.</li> <li>The <code>save_to_html</code> method accepts the same arguments as <code>to_html</code> and <code>save_to_markdown</code>.</li> </ol> <h3 id=browsing>Browsing<a class=headerlink href=#browsing title="Permanent link">&para;</a></h3> <p>Pages and messages can be displayed and browsed using static HTML files. When displaying a single item, VBT creates a temporary HTML file and opens it in the default browser. All links in this file remain <strong>external</strong>. When displaying multiple items, VBT creates a single HTML file where the items are shown as iframes that you can navigate using pagination.</p> <div class="language-python highlight"><span class=filename>How to display an asset</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>display</span><span class=p>(</span><span class=n>link</span><span class=o>=</span><span class=s2>&quot;documentation/fundamentals&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>display</span><span class=p>(</span><span class=n>link</span><span class=o>=</span><span class=s2>&quot;documentation/fundamentals&quot;</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># (4)!</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>display</span><span class=p>(</span><span class=n>link</span><span class=o>=</span><span class=s2>&quot;919715148896301067/923327319882485851&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&quot;channel == &#39;announcements&#39;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>  <span class=c1># (6)!</span>
</span></code></pre></div> <ol> <li>Display one or more pages.</li> <li>Select a page to display.</li> <li>If the asset is not aggregated, select a page, find its headings, merge them into one page, and display.</li> <li>Display one or more messages.</li> <li>Choose a message to display.</li> <li>Select messages from the specified channel, aggregate them, and display.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>If you want to browse one or more pages (or headings) like a website, VBT can convert all data items to HTML and replace all external links with <strong>internal</strong> links, allowing you to navigate from one page to another locally. But which page appears first? Pages and headings create a directed graph. If there is a single page from which all other pages can be accessed, that page is displayed first. If there are multiple such pages, VBT creates an index page with metadata blocks that let you access the other pages (unless you specify <code>entry_link</code>).</p> <div class="language-python highlight"><span class=filename>How to browse an asset</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>entry_link</span><span class=o>=</span><span class=s2>&quot;documentation/fundamentals&quot;</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>entry_link</span><span class=o>=</span><span class=s2>&quot;documentation&quot;</span><span class=p>,</span> <span class=n>descendants_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;website&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>clear_cache</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>()</span>  <span class=c1># (8)!</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>entry_link</span><span class=o>=</span><span class=s2>&quot;919715148896301067/923327319882485851&quot;</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=c1># (10)!</span>
</span></code></pre></div> <ol> <li>Generate an HTML file for every page and heading (unless already aggregated).</li> <li>Aggregate headings into pages and generate an HTML file for each page.</li> <li>Generate an HTML file for every page and start browsing from the selected page.</li> <li>Generate an HTML file for every page that is a descendant of the selected page.</li> <li>Specify a different cache directory. By default, data is stored under <strong>$user_cache_dir/knowledge/vbt/$release_name/pages/html/</strong> for pages and <strong>$user_cache_dir/knowledge/vbt/$release_name/messages/html/</strong> for messages.</li> <li>Clear the cache directory before saving. By default, a page or heading is skipped if its file already exists.</li> <li>Create a temporary directory.</li> <li>Generate an HTML file for every message (note that there may be a large number of messages!).</li> <li>In addition to the above, select a message to open in the default browser.</li> <li>Messages also accept the same caching-related arguments as pages.</li> </ol> <h2 id=combining>Combining<a class=headerlink href=#combining title="Permanent link">&para;</a></h2> <p>Assets can be easily combined. If the target class is not specified, their common superclass is used. For example, combining <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.PagesAsset>PagesAsset</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.MessagesAsset>MessagesAsset</a> produces an instance of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.VBTAsset>VBTAsset</a>, which includes features shared by both assets, such as the "link" and "content" fields.</p> <div class="language-python highlight"><span class=filename>How to combine multiple assets</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=n>vbt_asset</span> <span class=o>=</span> <span class=n>pages_asset</span> <span class=o>+</span> <span class=n>messages_asset</span>  <span class=c1># (1)!</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=n>vbt_asset</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>combine</span><span class=p>(</span><span class=n>messages_asset</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=n>vbt_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>VBTAsset</span><span class=o>.</span><span class=n>combine</span><span class=p>(</span><span class=n>pages_asset</span><span class=p>,</span> <span class=n>messages_asset</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span></code></pre></div> <ol> <li>Concatenate both lists and wrap them with the common superclass.</li> <li>Concatenate both lists and wrap them with the first class.</li> <li>Concatenate both lists and wrap them with the selected class.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>If both assets contain the same number of data items, you can also merge them at the data item level. This method works for complex containers, such as nested dictionaries and lists, by flattening their nested structures into flat dictionaries, merging them, and then unflattening them back into the original container types.</p> <div class="language-python highlight"><span class=filename>How to merge multiple assets</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset1</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>asset2</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>KnowledgeAsset</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>asset1</span><span class=p>,</span> <span class=n>asset2</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span></code></pre></div> <ol> <li>Merge both lists and wrap them with the first class.</li> <li>Merge both lists and wrap them with the selected class.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>You can also merge all data items in a single asset into one data item.</p> <div class="language-python highlight"><span class=filename>How to merge one asset</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>merge</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>merge_dicts</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=n>new_asset</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>merge_lists</span><span class=p>()</span>  <span class=c1># (3)!</span>
</span></code></pre></div> <ol> <li>Calls either <code>merge_dicts</code> or <code>merge_lists</code> depending on the data type.</li> <li>Concatenate all lists into one.</li> <li>(Deep-)merge all dictionaries into one.</li> </ol> <h2 id=searching>Searching<a class=headerlink href=#searching title="Permanent link">&para;</a></h2> <h3 id=for-objects>For objects<a class=headerlink href=#for-objects title="Permanent link">&para;</a></h3> <p>There are four methods for searching for any VBT object in pages and messages. The first method searches for the API documentation of the object. The second method searches for mentions of the object in the non-API (human-readable) documentation. The third method searches for mentions of the object in Discord messages. The last method searches for mentions of the object in the code of both pages and messages.</p> <div class="language-python highlight"><span class=filename>How to find API-related knowledge about an object</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_bases</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>incl_ancestors</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>use_parent</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>use_refs</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>row_stack</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>from_uniform</span><span class=p>,</span> <span class=n>incl_refs</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>([</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>,</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>])</span>  <span class=c1># (7)!</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_api</span><span class=p>()</span>  <span class=c1># (8)!</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;from_optimize_func&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Find the (aggregated) API page for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a>. It includes the (aggregated) base classes, such as <a href=https://vectorbt.pro/pvt_41531c19/api/utils/pickling/#vectorbtpro.utils.pickling.Configured>Configured</a>, and (non-aggregated) parent modules, such as <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base>portfolio.pfopt.base</a>.</li> <li>Do not include base classes and parent modules; include only this class.</li> <li>Use the (aggregated) parent of this class instead. Here, <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base>portfolio.pfopt.base</a>.</li> <li>Include the (non-aggregated) pages of objects referenced by this object.</li> <li>Find the API page for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer.row_stack>PortfolioOptimizer.row_stack</a>. It includes (aggregated) base methods, such as <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping.row_stack>Wrapping.row_stack</a>, (non-aggregated) parent objects such as <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a>, and (non-aggregated) references.</li> <li>Do not include references.</li> <li>Search for multiple objects.</li> <li>Call the method directly from the object's interface.</li> </ol> <div class="language-python highlight"><span class=filename>How to find documentation-related knowledge about an object</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_shortcuts</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>incl_instances</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_custom</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;pf_opt&quot;</span><span class=p>])</span>  <span class=c1># (3)!</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_custom</span><span class=o>=</span><span class=p>[</span><span class=sa>r</span><span class=s2>&quot;pf_opt\s*=\s*.+&quot;</span><span class=p>],</span> <span class=n>is_custom_regex</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>as_code</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>([</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>from_allocate_func</span><span class=p>,</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>from_optimize_func</span><span class=p>])</span>  <span class=c1># (6)!</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>up_aggregate_th</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>up_aggregate_pages</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_pages</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;documentation&quot;</span><span class=p>,</span> <span class=s2>&quot;tutorials&quot;</span><span class=p>])</span>  <span class=c1># (9)!</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>incl_pages</span><span class=o>=</span><span class=p>[</span><span class=sa>r</span><span class=s2>&quot;(features|cookbook)&quot;</span><span class=p>],</span> <span class=n>page_find_mode</span><span class=o>=</span><span class=s2>&quot;regex&quot;</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>excl_pages</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;release-notes&quot;</span><span class=p>])</span>  <span class=c1># (11)!</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_docs</span><span class=p>()</span>  <span class=c1># (12)!</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;from_optimize_func&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Find mentions of <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/pfopt/base/#vectorbtpro.portfolio.pfopt.base.PortfolioOptimizer>PortfolioOptimizer</a> across all non-API pages. It searches for full reference names, shortcuts (such as <code>vbt.PFO</code>), imports (such as <code>from ... import PFO</code>), typical instance names (such as <code>pfo =</code>), and access or call notations (such as <code>PFO.</code>).</li> <li>Include only full reference names and imports.</li> <li>Include custom literal mentions.</li> <li>Include custom regex mentions.</li> <li>Find mentions only as code.</li> <li>Search for multiple objects.</li> <li>By default, if the method matches two-thirds of all headings sharing the same parent, it takes the (aggregated) parent instead. Here, it takes the entire page if any mention is found.</li> <li>Similarly, if the method matches two-thirds of all pages sharing the same parent page, it includes the parent page as well.</li> <li>Include only the links from "documentation" and "tutorials" (the targets are substrings).</li> <li>Include only the links from "features" and "cookbook" (the target is a regex).</li> <li>Exclude the links from "release-notes" (the target is a substring).</li> <li>Call the method directly from the object's interface.</li> </ol> <div class="language-python highlight"><span class=filename>How to find Discord-related knowledge about an object</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_messages</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_messages</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_messages</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;from_optimize_func&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>This method works the same as above but finds mentions in messages. It accepts the same arguments related to targets (the first block in <code>find_docs</code> recipes) and does not accept arguments related to pages (the second block in <code>find_docs</code> recipes).</li> <li>Call the method directly from the object's interface.</li> </ol> <div class="language-python highlight"><span class=filename>How to find code examples of an object</span><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=n>examples_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_examples</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=n>examples_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_examples</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=n>examples_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=o>.</span><span class=n>find_examples</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;from_optimize_func&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>This method works the same as above but finds code mentions in both pages and messages.</li> <li>Call the method directly from the object's interface.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>The first three methods are guaranteed not to overlap, while the last method may return examples that can also be found by the first three methods. There is also another method that, by default, calls the first three methods and combines their results into a single asset. This approach allows you to gather all relevant knowledge about a VBT object.</p> <div class="language-python highlight"><span class=filename>How to combine knowledge about an object</span><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;api&quot;</span><span class=p>,</span> <span class=s2>&quot;docs&quot;</span><span class=p>])</span>  <span class=c1># (2)!</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;messages&quot;</span><span class=p>,</span> <span class=o>...</span><span class=p>])</span>  <span class=c1># (3)!</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;all&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span>  <span class=c1># (5)!</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>    <span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> 
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>    <span class=n>api_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>incl_ancestors</span><span class=o>=</span><span class=kc>False</span><span class=p>),</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>    <span class=n>docs_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>as_code</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>    <span class=n>messages_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>as_code</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=p>)</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> <span class=n>minimize</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=n>asset_list</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=p>,</span> <span class=n>combine</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>([</span><span class=n>vbt</span><span class=o>.</span><span class=n>EntryTrades</span><span class=p>,</span> <span class=n>vbt</span><span class=o>.</span><span class=n>ExitTrades</span><span class=p>])</span>  <span class=c1># (8)!</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=s2>&quot;SQL&quot;</span><span class=p>,</span> <span class=n>resolve</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>([</span><span class=s2>&quot;SQL&quot;</span><span class=p>,</span> <span class=s2>&quot;database&quot;</span><span class=p>],</span> <span class=n>resolve</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>()</span>  <span class=c1># (11)!</span>
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;plot&quot;</span><span class=p>)</span>
</span><span id=__span-27-24><a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>pf</span><span class=o>.</span><span class=n>trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=n>attr</span><span class=o>=</span><span class=s2>&quot;expectancy&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Combine assets for <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/trades/#vectorbtpro.portfolio.trades.Trades>Trades</a>.</li> <li>Use only the API asset and the documentation asset.</li> <li>Place the messages asset first and keep other assets in their usual order by using <code>...</code> (Ellipsis).</li> <li>Use all assets, excluding the examples asset (which is already included in other assets).</li> <li>Provide keyword arguments specific to each asset.</li> <li>Disable minimization. This keeps all fields but takes up more context space.</li> <li>Disable combining. Returns a dictionary of assets by their name.</li> <li>Search for multiple objects.</li> <li>Search for arbitrary keywords (not actual VBT objects).</li> <li>Search for multiple keywords.</li> <li>Make a call directly from the object's interface.</li> </ol> <div class="language-python highlight"><span class=filename>How to browse combined knowledge about an object</span><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>()</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;link&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>print</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span> <span class=c1># (2)!</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>    <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;docs&quot;</span><span class=p>,</span> 
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>    <span class=n>docs_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>excl_pages</span><span class=o>=</span><span class=s2>&quot;release-notes&quot;</span><span class=p>)</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=p>)</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=n>dir_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Trades</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span> <span class=c1># (3)!</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>    <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;docs&quot;</span><span class=p>,</span> 
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>    <span class=n>docs_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>excl_pages</span><span class=o>=</span><span class=s2>&quot;release-notes&quot;</span><span class=p>)</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=p>)</span><span class=o>.</span><span class=n>browse</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Print all found links.</li> <li>Browse all found documentation (excluding release notes) as a single HTML file.</li> <li>Browse all found documentation (excluding release notes) as multiple HTML files.</li> </ol> <h3 id=globally>Globally<a class=headerlink href=#globally title="Permanent link">&para;</a></h3> <p>You can search not only for knowledge related to a specific VBT object but also for any VBT items that match a query in natural language. This process works by embedding both the query and the data items, calculating their pairwise similarity scores, and sorting the data items by their mean score in descending order. Since the result contains all the data items from the original set, just in a different order, it is recommended to select the top-k results before displaying them.</p> <p>All the methods discussed in <a href=#for-objects>objects</a> can also be used on queries!</p> <div class="language-python highlight"><span class=filename>How to search for knowledge using natural language</span><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=n>api_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_api</span><span class=p>(</span><span class=s2>&quot;How to rebalance weekly?&quot;</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=n>docs_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_docs</span><span class=p>(</span><span class=s2>&quot;How to hedge a position?&quot;</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=n>messages_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_messages</span><span class=p>(</span><span class=s2>&quot;How to trade live?&quot;</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>find_assets</span><span class=p>(</span><span class=s2>&quot;How to create a custom data class?&quot;</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>
</span></code></pre></div> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>There is also a specialized <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.search>search</a> function that calls <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.find_assets>find_assets</a>, caches the documents (so the next search runs much faster), and displays the top results as a static HTML page.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The first time you run this command, it may take up to 15 minutes to prepare and embed documents. However, most preparation steps are cached and stored, so future searches will be significantly faster without repeating the process.</p> </div> <div class="language-python highlight"><span class=filename>How to search for knowledge on VBT using natural language and display top results</span><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=n>found_asset</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>display</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>display_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>open_browser</span><span class=o>=</span><span class=kc>False</span><span class=p>))</span>  <span class=c1># (3)!</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to fix &#39;Symbols have mismatching columns&#39;?&quot;</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;messages&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to use templates in signal_func_nb?&quot;</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;examples&quot;</span><span class=p>,</span> <span class=n>display</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>search_method</span><span class=o>=</span><span class=s2>&quot;embeddings&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span></code></pre></div> <ol> <li>Search API pages, documentation pages, and Discord messages for a query, then display the 20 most relevant results.</li> <li>Return the results instead of displaying them.</li> <li>Do not automatically open the HTML file in the browser.</li> <li>Search Discord messages only.</li> <li>Search and display the 100 most relevant code examples.</li> <li>Disable hybrid mode.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>Building an index of embeddings for searching is not always necessary. Instead, you can use BM25, a fast and reliable algorithm that works completely offline.</p> <div class="language-python highlight"><span class=filename>How to search for knowledge on VBT quickly</span><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>quick_search</span><span class=p>(</span><span class=s2>&quot;How to fix &#39;Symbols have mismatching columns&#39;?&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Use this method when your query contains specific keywords. For vague queries, embeddings are a better choice.</p> </div> <h2 id=chatting>Chatting<a class=headerlink href=#chatting title="Permanent link">&para;</a></h2> <p>Knowledge assets can be used as context when chatting with LLMs. The main method for chatting is <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/doc_ranking/#vectorbtpro.knowledge.doc_ranking.Contextable.chat>Contextable.chat</a>, which <a href=#formatting>dumps</a> the asset instance, combines it with your question and chat history into messages, sends them to the LLM service, then displays and saves the response. The response can be shown in various formats, including raw text, Markdown, and HTML. All three formats support streaming. This method is compatible with multiple LLM APIs, such as OpenAI, LiteLLM, and LLamaIndex.</p> <div class="language-python highlight"><span class=filename>How to chat about an asset</span><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;OPENAI_API_KEY&gt;&quot;</span>  <span class=c1># (1)!</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=n>patterns_tutorial</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_page</span><span class=p>(</span> <span class=c1># (2)!</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=s2>&quot;https://vectorbt.pro/pvt_xxxxxxxx/tutorials/patterns-and-projections/patterns/&quot;</span><span class=p>,</span> 
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>    <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=p>)</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=n>patterns_tutorial</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to detect a pattern?&quot;</span><span class=p>)</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=n>data_documentation</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>select_branch</span><span class=p>(</span><span class=s2>&quot;documentation/data&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>aggregate</span><span class=p>()</span>  <span class=c1># (3)!</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=n>data_documentation</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to convert DataFrame into vbt.Data?&quot;</span><span class=p>)</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=n>pfo_api</span> <span class=o>=</span> <span class=n>pages_asset</span><span class=o>.</span><span class=n>find_obj</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>PFO</span><span class=p>,</span> <span class=n>aggregate</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=n>pfo_api</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to rebalance weekly?&quot;</span><span class=p>)</span>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=n>combined_asset</span> <span class=o>=</span> <span class=n>pages_asset</span> <span class=o>+</span> <span class=n>messages_asset</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class=n>signal_func_nb_code</span> <span class=o>=</span> <span class=n>combined_asset</span><span class=o>.</span><span class=n>find_code</span><span class=p>(</span><span class=s2>&quot;signal_func_nb&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=n>signal_func_nb_code</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to pass an array to signal_func_nb?&quot;</span><span class=p>)</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a><span class=n>polakowo_messages</span> <span class=o>=</span> <span class=n>messages_asset</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=s2>&quot;author == &#39;@maintainer&#39;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>minimize</span><span class=p>()</span><span class=o>.</span><span class=n>shuffle</span><span class=p>()</span>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a><span class=n>polakowo_messages</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;Describe the author of these messages&quot;</span><span class=p>,</span> <span class=n>max_tokens</span><span class=o>=</span><span class=mi>10_000</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a>
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a><span class=n>mention_fields</span> <span class=o>=</span> <span class=n>combined_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a>    <span class=s2>&quot;parameterize&quot;</span><span class=p>,</span> 
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>    <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;substring&quot;</span><span class=p>,</span> 
</span><span id=__span-32-27><a id=__codelineno-32-27 name=__codelineno-32-27 href=#__codelineno-32-27></a>    <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;field&quot;</span><span class=p>,</span> 
</span><span id=__span-32-28><a id=__codelineno-32-28 name=__codelineno-32-28 href=#__codelineno-32-28></a>    <span class=n>merge_fields</span><span class=o>=</span><span class=kc>False</span>
</span><span id=__span-32-29><a id=__codelineno-32-29 name=__codelineno-32-29 href=#__codelineno-32-29></a><span class=p>)</span>
</span><span id=__span-32-30><a id=__codelineno-32-30 name=__codelineno-32-30 href=#__codelineno-32-30></a><span class=n>mention_counts</span> <span class=o>=</span> <span class=n>combined_asset</span><span class=o>.</span><span class=n>find</span><span class=p>(</span>
</span><span id=__span-32-31><a id=__codelineno-32-31 name=__codelineno-32-31 href=#__codelineno-32-31></a>    <span class=s2>&quot;parameterize&quot;</span><span class=p>,</span> 
</span><span id=__span-32-32><a id=__codelineno-32-32 name=__codelineno-32-32 href=#__codelineno-32-32></a>    <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;substring&quot;</span><span class=p>,</span> 
</span><span id=__span-32-33><a id=__codelineno-32-33 name=__codelineno-32-33 href=#__codelineno-32-33></a>    <span class=n>return_type</span><span class=o>=</span><span class=s2>&quot;match&quot;</span><span class=p>,</span> 
</span><span id=__span-32-34><a id=__codelineno-32-34 name=__codelineno-32-34 href=#__codelineno-32-34></a>    <span class=n>merge_matches</span><span class=o>=</span><span class=kc>False</span>
</span><span id=__span-32-35><a id=__codelineno-32-35 name=__codelineno-32-35 href=#__codelineno-32-35></a><span class=p>)</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=nb>len</span><span class=p>)</span>
</span><span id=__span-32-36><a id=__codelineno-32-36 name=__codelineno-32-36 href=#__codelineno-32-36></a><span class=n>sorted_fields</span> <span class=o>=</span> <span class=n>mention_fields</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>keys</span><span class=o>=</span><span class=n>mention_counts</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>merge</span><span class=p>()</span>
</span><span id=__span-32-37><a id=__codelineno-32-37 name=__codelineno-32-37 href=#__codelineno-32-37></a><span class=n>sorted_fields</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to parameterize a function?&quot;</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-32-38><a id=__codelineno-32-38 name=__codelineno-32-38 href=#__codelineno-32-38></a>
</span><span id=__span-32-39><a id=__codelineno-32-39 name=__codelineno-32-39 href=#__codelineno-32-39></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.max_tokens&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-32-40><a id=__codelineno-32-40 name=__codelineno-32-40 href=#__codelineno-32-40></a>
</span><span id=__span-32-41><a id=__codelineno-32-41 name=__codelineno-32-41 href=#__codelineno-32-41></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-32-42><a id=__codelineno-32-42 name=__codelineno-32-42 href=#__codelineno-32-42></a>
</span><span id=__span-32-43><a id=__codelineno-32-43 name=__codelineno-32-43 href=#__codelineno-32-43></a><span class=n>chat_history</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-32-44><a id=__codelineno-32-44 name=__codelineno-32-44 href=#__codelineno-32-44></a><span class=n>signal_func_nb_code</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to check if we&#39;re in a long position?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-32-45><a id=__codelineno-32-45 name=__codelineno-32-45 href=#__codelineno-32-45></a><span class=n>signal_func_nb_code</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How about short one?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-32-46><a id=__codelineno-32-46 name=__codelineno-32-46 href=#__codelineno-32-46></a><span class=n>chat_history</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>  <span class=c1># (11)!</span>
</span><span id=__span-32-47><a id=__codelineno-32-47 name=__codelineno-32-47 href=#__codelineno-32-47></a><span class=n>signal_func_nb_code</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to access close price?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>)</span>
</span><span id=__span-32-48><a id=__codelineno-32-48 name=__codelineno-32-48 href=#__codelineno-32-48></a>
</span><span id=__span-32-49><a id=__codelineno-32-49 name=__codelineno-32-49 href=#__codelineno-32-49></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-32-50><a id=__codelineno-32-50 name=__codelineno-32-50 href=#__codelineno-32-50></a>
</span><span id=__span-32-51><a id=__codelineno-32-51 name=__codelineno-32-51 href=#__codelineno-32-51></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>completions</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span><span id=__span-32-52><a id=__codelineno-32-52 name=__codelineno-32-52 href=#__codelineno-32-52></a><span class=c1># (13)!</span>
</span><span id=__span-32-53><a id=__codelineno-32-53 name=__codelineno-32-53 href=#__codelineno-32-53></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.openai.model&quot;, &quot;gpt-5-mini&quot;)</span>
</span><span id=__span-32-54><a id=__codelineno-32-54 name=__codelineno-32-54 href=#__codelineno-32-54></a><span class=c1># (14)!</span>
</span><span id=__span-32-55><a id=__codelineno-32-55 name=__codelineno-32-55 href=#__codelineno-32-55></a><span class=c1># vbt.OpenAICompletions.set_settings({&quot;model&quot;: &quot;gpt-5-mini&quot;})</span>
</span><span id=__span-32-56><a id=__codelineno-32-56 name=__codelineno-32-56 href=#__codelineno-32-56></a>
</span><span id=__span-32-57><a id=__codelineno-32-57 name=__codelineno-32-57 href=#__codelineno-32-57></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_OPENROUTER_API_KEY&gt;&quot;</span>
</span><span id=__span-32-58><a id=__codelineno-32-58 name=__codelineno-32-58 href=#__codelineno-32-58></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>completions</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;https://openrouter.ai/api/v1&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;openai/gpt-4o&quot;</span><span class=p>)</span> 
</span><span id=__span-32-59><a id=__codelineno-32-59 name=__codelineno-32-59 href=#__codelineno-32-59></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.openai.base_url&quot;, &quot;https://openrouter.ai/api/v1&quot;)</span>
</span><span id=__span-32-60><a id=__codelineno-32-60 name=__codelineno-32-60 href=#__codelineno-32-60></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.openai.model&quot;, &quot;openai/gpt-4o&quot;)</span>
</span><span id=__span-32-61><a id=__codelineno-32-61 name=__codelineno-32-61 href=#__codelineno-32-61></a><span class=c1># vbt.OpenAICompletions.set_settings({</span>
</span><span id=__span-32-62><a id=__codelineno-32-62 name=__codelineno-32-62 href=#__codelineno-32-62></a><span class=c1>#     &quot;base_url&quot;: &quot;https://openrouter.ai/api/v1&quot;, </span>
</span><span id=__span-32-63><a id=__codelineno-32-63 name=__codelineno-32-63 href=#__codelineno-32-63></a><span class=c1>#     &quot;model&quot;: &quot;openai/gpt-4o&quot;</span>
</span><span id=__span-32-64><a id=__codelineno-32-64 name=__codelineno-32-64 href=#__codelineno-32-64></a><span class=c1># })</span>
</span><span id=__span-32-65><a id=__codelineno-32-65 name=__codelineno-32-65 href=#__codelineno-32-65></a>
</span><span id=__span-32-66><a id=__codelineno-32-66 name=__codelineno-32-66 href=#__codelineno-32-66></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;DEEPSEEK_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_DEEPSEEK_API_KEY&gt;&quot;</span>
</span><span id=__span-32-67><a id=__codelineno-32-67 name=__codelineno-32-67 href=#__codelineno-32-67></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>completions</span><span class=o>=</span><span class=s2>&quot;litellm&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;deepseek/deepseek-coder&quot;</span><span class=p>)</span>
</span><span id=__span-32-68><a id=__codelineno-32-68 name=__codelineno-32-68 href=#__codelineno-32-68></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.litellm.model&quot;, &quot;deepseek/deepseek-coder&quot;)</span>
</span><span id=__span-32-69><a id=__codelineno-32-69 name=__codelineno-32-69 href=#__codelineno-32-69></a><span class=c1># vbt.LiteLLMCompletions.set_settings({&quot;model&quot;: &quot;deepseek/deepseek-coder&quot;})</span>
</span><span id=__span-32-70><a id=__codelineno-32-70 name=__codelineno-32-70 href=#__codelineno-32-70></a>
</span><span id=__span-32-71><a id=__codelineno-32-71 name=__codelineno-32-71 href=#__codelineno-32-71></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>completions</span><span class=o>=</span><span class=s2>&quot;llama_index&quot;</span><span class=p>,</span> <span class=n>llm</span><span class=o>=</span><span class=s2>&quot;perplexity&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;claude-3-5-sonnet-20240620&quot;</span><span class=p>)</span>  <span class=c1># (15)!</span>
</span><span id=__span-32-72><a id=__codelineno-32-72 name=__codelineno-32-72 href=#__codelineno-32-72></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.llama_index.llm&quot;, &quot;anthropic&quot;)</span>
</span><span id=__span-32-73><a id=__codelineno-32-73 name=__codelineno-32-73 href=#__codelineno-32-73></a><span class=c1># anthropic_config = {&quot;model&quot;: &quot;claude-3-5-sonnet-20240620&quot;}</span>
</span><span id=__span-32-74><a id=__codelineno-32-74 name=__codelineno-32-74 href=#__codelineno-32-74></a><span class=c1># vbt.settings.set(&quot;knowledge.chat.completions_configs.llama_index.anthropic&quot;, anthropic_config)</span>
</span><span id=__span-32-75><a id=__codelineno-32-75 name=__codelineno-32-75 href=#__codelineno-32-75></a><span class=c1># vbt.LlamaIndexCompletions.set_settings({&quot;llm&quot;: &quot;anthropic&quot;, &quot;anthropic&quot;: anthropic_config})</span>
</span><span id=__span-32-76><a id=__codelineno-32-76 name=__codelineno-32-76 href=#__codelineno-32-76></a>
</span><span id=__span-32-77><a id=__codelineno-32-77 name=__codelineno-32-77 href=#__codelineno-32-77></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;litellm&quot;</span><span class=p>)</span>  <span class=c1># (16)!</span>
</span><span id=__span-32-78><a id=__codelineno-32-78 name=__codelineno-32-78 href=#__codelineno-32-78></a>
</span><span id=__span-32-79><a id=__codelineno-32-79 name=__codelineno-32-79 href=#__codelineno-32-79></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-32-80><a id=__codelineno-32-80 name=__codelineno-32-80 href=#__codelineno-32-80></a>
</span><span id=__span-32-81><a id=__codelineno-32-81 name=__codelineno-32-81 href=#__codelineno-32-81></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>stream</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (17)!</span>
</span><span id=__span-32-82><a id=__codelineno-32-82 name=__codelineno-32-82 href=#__codelineno-32-82></a>
</span><span id=__span-32-83><a id=__codelineno-32-83 name=__codelineno-32-83 href=#__codelineno-32-83></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;plain&quot;</span><span class=p>)</span>  <span class=c1># (18)!</span>
</span><span id=__span-32-84><a id=__codelineno-32-84 name=__codelineno-32-84 href=#__codelineno-32-84></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;ipython_markdown&quot;</span><span class=p>)</span>  <span class=c1># (19)!</span>
</span><span id=__span-32-85><a id=__codelineno-32-85 name=__codelineno-32-85 href=#__codelineno-32-85></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;ipython_html&quot;</span><span class=p>)</span>  <span class=c1># (20)!</span>
</span><span id=__span-32-86><a id=__codelineno-32-86 name=__codelineno-32-86 href=#__codelineno-32-86></a>
</span><span id=__span-32-87><a id=__codelineno-32-87 name=__codelineno-32-87 href=#__codelineno-32-87></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>)</span>  <span class=c1># (21)!</span>
</span><span id=__span-32-88><a id=__codelineno-32-88 name=__codelineno-32-88 href=#__codelineno-32-88></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>cache_dir</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=p>))</span>  <span class=c1># (22)!</span>
</span><span id=__span-32-89><a id=__codelineno-32-89 name=__codelineno-32-89 href=#__codelineno-32-89></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>clear_cache</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span>  <span class=c1># (23)!</span>
</span><span id=__span-32-90><a id=__codelineno-32-90 name=__codelineno-32-90 href=#__codelineno-32-90></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>))</span>  <span class=c1># (24)!</span>
</span><span id=__span-32-91><a id=__codelineno-32-91 name=__codelineno-32-91 href=#__codelineno-32-91></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span>  <span class=c1># (25)!</span>
</span><span id=__span-32-92><a id=__codelineno-32-92 name=__codelineno-32-92 href=#__codelineno-32-92></a>    <span class=o>...</span><span class=p>,</span> 
</span><span id=__span-32-93><a id=__codelineno-32-93 name=__codelineno-32-93 href=#__codelineno-32-93></a>    <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>,</span> 
</span><span id=__span-32-94><a id=__codelineno-32-94 name=__codelineno-32-94 href=#__codelineno-32-94></a>    <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-32-95><a id=__codelineno-32-95 name=__codelineno-32-95 href=#__codelineno-32-95></a>        <span class=n>to_markdown_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=o>...</span><span class=p>),</span>
</span><span id=__span-32-96><a id=__codelineno-32-96 name=__codelineno-32-96 href=#__codelineno-32-96></a>        <span class=n>to_html_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=o>...</span><span class=p>),</span>
</span><span id=__span-32-97><a id=__codelineno-32-97 name=__codelineno-32-97 href=#__codelineno-32-97></a>        <span class=n>format_html_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span><span id=__span-32-98><a id=__codelineno-32-98 name=__codelineno-32-98 href=#__codelineno-32-98></a>    <span class=p>)</span>
</span><span id=__span-32-99><a id=__codelineno-32-99 name=__codelineno-32-99 href=#__codelineno-32-99></a><span class=p>)</span>
</span><span id=__span-32-100><a id=__codelineno-32-100 name=__codelineno-32-100 href=#__codelineno-32-100></a>
</span><span id=__span-32-101><a id=__codelineno-32-101 name=__codelineno-32-101 href=#__codelineno-32-101></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>update_interval</span><span class=o>=</span><span class=mf>1.0</span><span class=p>))</span>  <span class=c1># (26)!</span>
</span><span id=__span-32-102><a id=__codelineno-32-102 name=__codelineno-32-102 href=#__codelineno-32-102></a>
</span><span id=__span-32-103><a id=__codelineno-32-103 name=__codelineno-32-103 href=#__codelineno-32-103></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>output_to</span><span class=o>=</span><span class=s2>&quot;response.txt&quot;</span><span class=p>))</span>  <span class=c1># (27)!</span>
</span><span id=__span-32-104><a id=__codelineno-32-104 name=__codelineno-32-104 href=#__codelineno-32-104></a>
</span><span id=__span-32-105><a id=__codelineno-32-105 name=__codelineno-32-105 href=#__codelineno-32-105></a><span class=n>asset</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span>  <span class=c1># (28)!</span>
</span><span id=__span-32-106><a id=__codelineno-32-106 name=__codelineno-32-106 href=#__codelineno-32-106></a>    <span class=o>...</span><span class=p>,</span> 
</span><span id=__span-32-107><a id=__codelineno-32-107 name=__codelineno-32-107 href=#__codelineno-32-107></a>    <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are a helpful assistant&quot;</span><span class=p>,</span>
</span><span id=__span-32-108><a id=__codelineno-32-108 name=__codelineno-32-108 href=#__codelineno-32-108></a>    <span class=n>context_prompt</span><span class=o>=</span><span class=s2>&quot;Here&#39;s what you need to know: $context&quot;</span>
</span><span id=__span-32-109><a id=__codelineno-32-109 name=__codelineno-32-109 href=#__codelineno-32-109></a><span class=p>)</span>
</span></code></pre></div> <ol> <li>Setting the API key as an environment variable makes it available to all packages. Another option is passing <code>api_key</code> directly or saving it in the settings, as shown for <code>model</code> below.</li> <li>Paste a link from the website (for example, the patterns tutorial) and use it as context. If you do not know the private hash, you can paste the suffix. See <a href=#querying>querying</a>.</li> <li>Select and aggregate all documentation pages related to data, then use them as context.</li> <li>Select the API documentation page for the portfolio optimizer and use it as context.</li> <li>Find all mentions of <code>signal_func_nb</code> throughout the code of all pages and messages, then use them as context.</li> <li>Filter all messages by <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/polakowo title="GitHub User: polakowo">@polakowo</a> and keep only relevant fields to fit more data. By default, the context is trimmed to 100,000 tokens (the exact allowance depends on the model, e.g., GPT-4o supports 128,000). Content is shuffled to prevent placing more weight on older or newer content when trimming the context.</li> <li>Get all fields with at least one "parameterize" mention, sort them by the number of mentions in descending order, and merge them into a single list. When embeddings are unavailable, this is a common workflow when there is too much data.</li> <li>Allow unlimited context.</li> <li>Append the question and answer to the chat history.</li> <li>Reuse the chat history to ask another question in the current chat.</li> <li>Clear the chat history to start a new chat.</li> <li>Specify the model and other client and chat-related arguments for the OpenAI API.</li> <li>Save the model in the settings to use by default next time.</li> <li>Same as above.</li> <li>You can define configs by LLM when using LLamaIndex.</li> <li>Set the default class for completions.</li> <li>Disable streaming. By default, streaming is enabled.</li> <li>Print the response.</li> <li>Display the response in Markdown format (requires IPython environment).</li> <li>Display the response in HTML format (requires IPython environment).</li> <li>Store the response in a static HTML file and display it.</li> <li>Specify a different cache directory. By default, data is stored under <strong>$user_cache_dir/knowledge/vbt/$release_name/chat</strong>.</li> <li>Clear the cache directory before saving.</li> <li>Create a temporary file.</li> <li>When working with HTML, you can provide many arguments accepted by <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.VBTAsset.to_html>VBTAsset.to_html</a>.</li> <li>When using an update interval, streaming data is buffered and released periodically. Note that when displaying HTML, the minimum update interval is 1 second.</li> <li>In addition to displaying, the raw response can also be saved to a file.</li> <li>Customize the system and context prompts.</li> </ol> <h3 id=about-objects>About objects<a class=headerlink href=#about-objects title="Permanent link">&para;</a></h3> <p>You can chat about a VBT object using <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.chat_about>chat_about</a>. This function calls the method above, but operates only on code examples. When you pass arguments, they are automatically distributed between <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.find_assets>find_assets</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/base_assets/#vectorbtpro.knowledge.base_assets.KnowledgeAsset.chat>KnowledgeAsset.chat</a> (see <a href=#chatting>chatting</a> for recipes).</p> <div class="language-python highlight"><span class=filename>How to chat about an object</span><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat_about</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=p>,</span> <span class=s2>&quot;How to get trading expectancy?&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat_about</span><span class=p>(</span>  <span class=c1># (2)!</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>    <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=p>,</span> 
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>    <span class=s2>&quot;How to get returns accessor with log returns?&quot;</span><span class=p>,</span> 
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>    <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;api&quot;</span><span class=p>,</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>    <span class=n>api_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>incl_bases</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>incl_ancestors</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=p>)</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat_about</span><span class=p>(</span>  <span class=c1># (3)!</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=p>,</span> 
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>    <span class=s2>&quot;How to backtest a basic strategy?&quot;</span><span class=p>,</span> 
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>    <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>,</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>    <span class=n>max_tokens</span><span class=o>=</span><span class=mi>100_000</span><span class=p>,</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>    <span class=n>shuffle</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=p>)</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to create portfolio from order records?&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to get grouped stats?&quot;</span><span class=p>,</span> <span class=n>attr</span><span class=o>=</span><span class=s2>&quot;stats&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Find knowledge about <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio>Portfolio</a> and ask a question using this knowledge as context.</li> <li>Pass knowledge-related arguments. Here, find API knowledge that includes only the <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio>Portfolio</a> class.</li> <li>Pass chat-related arguments. In this example, use the gpt-5-mini model on a shuffled context with up to 100,000 tokens. Also, set the user role instead of the system role for the initial instruction.</li> <li>Call the chat function directly from the object's interface.</li> </ol> <p>You can also ask questions about objects that do not technically exist in VBT or about general keywords, such as "quantstats", which will search for mentions of "quantstats" within pages and messages.</p> <div class="language-python highlight"><span class=filename>How to chat about keywords</span><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat_about</span><span class=p>(</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>    <span class=s2>&quot;sql&quot;</span><span class=p>,</span> 
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>    <span class=s2>&quot;How to import data from a SQL database?&quot;</span><span class=p>,</span> 
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>    <span class=n>resolve</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>  <span class=c1># (1)!</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>    <span class=n>find_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>        <span class=n>ignore_case</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>        <span class=n>allow_prefix</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># (2)!</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>        <span class=n>allow_suffix</span><span class=o>=</span><span class=kc>True</span>  <span class=c1># (3)!</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>    <span class=p>)</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=p>)</span>
</span></code></pre></div> <ol> <li>Use this option to avoid searching for a VBT object with the same name.</li> <li>Allow prefixes for "sql", such as "from_sql".</li> <li>Allow suffixes for "sql", such as "SQLData".</li> </ol> <h3 id=globally_1>Globally<a class=headerlink href=#globally_1 title="Permanent link">&para;</a></h3> <p>Similar to the global <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.search>search</a> function, there is a global function for chatting: <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/custom_assets/#vectorbtpro.knowledge.custom_assets.chat>chat</a>. It processes documents in the same way, but instead of displaying results, it sends them to an LLM for completion.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The first time you run this command, it may take up to 15 minutes to prepare and embed documents. Most preparation steps are cached and stored, so future searches will be much faster and do not need to repeat the process.</p> </div> <div class="language-python highlight"><span class=filename>How to chat about VBT</span><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=n>file_path</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to fix &#39;Symbols have mismatching columns&#39;?&quot;</span><span class=p>,</span> <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;messages&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>    <span class=s2>&quot;How to use templates in signal_func_nb?&quot;</span><span class=p>,</span> 
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>    <span class=n>asset_names</span><span class=o>=</span><span class=s2>&quot;examples&quot;</span><span class=p>,</span> 
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>    <span class=n>top_k</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> 
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>    <span class=n>cutoff</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> 
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>    <span class=n>return_chunks</span><span class=o>=</span><span class=kc>False</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=n>chat_history</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;What if I have symbols as columns?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a><span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to replace index of data?&quot;</span><span class=p>,</span> <span class=n>chat_history</span><span class=p>,</span> <span class=n>incl_past_queries</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a><span class=n>_</span><span class=p>,</span> <span class=n>chat</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>chat</span><span class=p>(</span><span class=s2>&quot;How to turn df into data?&quot;</span><span class=p>,</span> <span class=n>return_chat</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a><span class=n>chat</span><span class=o>.</span><span class=n>complete</span><span class=p>(</span><span class=s2>&quot;What if I have symbols as columns?&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Search API pages, documentation pages, and Discord messages for a query, and chat about them. By default, up to 100 document chunks are used.</li> <li>Accepts the same arguments as <code>asset.chat</code>.</li> <li>Chat about Discord messages only.</li> <li>Use the entire (ranked) asset as context.</li> <li>Reuse the chat history to ask a question in the current chat.</li> <li>Take the chat history into account. All user messages will be considered when ranking the context.</li> <li>Take the chat history into account. Only the current query will be considered when ranking the context.</li> <li>Same as above, except the context remains fixed for all later queries.</li> </ol> <div class=separator-container> <hr class=separator> <span class=separator-text>+</span> <hr class=separator> </div> <p>Building an index of embeddings for chatting is not always required. Instead, you can use BM25, a quick and reliable algorithm that works entirely offline. Additionally, this function will use a smaller context and a less expensive model for completions, such as "gpt-4o-mini" instead of "gpt-4o".</p> <div class="language-python highlight"><span class=filename>How to chat about VBT quickly</span><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>quick_chat</span><span class=p>(</span><span class=s2>&quot;How to fix &#39;Symbols have mismatching columns&#39;?&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Use this when your query contains distinctive keywords. For vague queries, embeddings are a better option.</p> </div> <h3 id=quantgpt>QuantGPT<a class=headerlink href=#quantgpt title="Permanent link">&para;</a></h3> <p>If you have a basic question, want to save money, or prefer chatting from a mobile device, check out <a href=https://www.quantgpt.chat/ >QuantGPT</a>, a free service generously hosted by our member <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/simrell title="GitHub User: simrell">@simrell</a>. QuantGPT uses the same knowledge base (website and Discord) as our ChatVBT function, powered by the OpenAI Assistants API, which we have replicated with our own RAG.</p> <div class="grid cards width-fifty"> <ul> <li> <p><span class="twemoji lg middle"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg></span> <strong>Ask QuantGPT</strong></p> <hr> <p><a href=https://www.quantgpt.chat/ ><img alt loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/quantgpt.light.webp#only-light></a> <a href=https://www.quantgpt.chat/ ><img alt loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/quantgpt.dark.webp#only-dark></a></p> </li> </ul> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Both tools should give similar answers, but ChatVBT (that is, <code>vbt.chat()</code>) offers clickable references, full control over the knowledge base (which may improve completions), and the flexibility to use any LLM, not just OpenAI.</p> </div> <h2 id=interacting>Interacting <span class="twemoji mdx-pulse" title="Recently added"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m23 12-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68zm-10 5h-2v-2h2zm0-4h-2V7h2z"/></svg></span><a class=headerlink href=#interacting title="Permanent link">&para;</a></h2> <p>In addition to the context-based chat functionality, VBT also supports tool calls to interact with the MCP server and any user-defined functions. This functionality is also available in <code>vbt.chat()</code>.</p> <div class="language-python highlight"><span class=filename>How to interact with tools</span><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;How to plot a portfolio?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=s2>&quot;mcp&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;What methods can I use for plotting a vbt.Portfolio?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;vbt.mcp_server.get_attrs&quot;</span><span class=p>])</span>  <span class=c1># (2)!</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;What methods can I use for plotting a vbt.Portfolio?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=n>vbt</span><span class=o>.</span><span class=n>mcp_server</span><span class=o>.</span><span class=n>get_attrs</span><span class=p>])</span>  <span class=c1># (3)!</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=n>mcp_tools</span> <span class=o>=</span> <span class=p>{</span><span class=n>k</span><span class=p>:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>vbt</span><span class=o>.</span><span class=n>mcp_server</span><span class=o>.</span><span class=n>tool_registry</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>k</span> <span class=o>!=</span> <span class=s2>&quot;run_code&quot;</span><span class=p>}</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;How to backtest a SMA crossover?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=n>mcp_tools</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=nd>@vbt</span><span class=o>.</span><span class=n>register_tool</span>  <span class=c1># (5)!</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=k>def</span><span class=w> </span><span class=nf>backtest_sma_crossover</span><span class=p>(</span><span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>long_window</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>short_window</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>metric</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Backtest a simple moving average crossover strategy.</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=sd>    Args:</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=sd>        symbol (str): Yahoo Finance symbol to backtest.</span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=sd>        long_window (int): Long moving average window.</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=sd>        short_window (int): Short moving average window.</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a><span class=sd>        metric (str): Performance metric to return.</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>    <span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a>    <span class=n>sma_long</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>rolling_mean</span><span class=p>(</span><span class=n>long_window</span><span class=p>)</span>
</span><span id=__span-37-21><a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>    <span class=n>sma_short</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>rolling_mean</span><span class=p>(</span><span class=n>short_window</span><span class=p>)</span>
</span><span id=__span-37-22><a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>    <span class=n>entries</span> <span class=o>=</span> <span class=n>sma_long</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>crossed_above</span><span class=p>(</span><span class=n>sma_short</span><span class=p>)</span>
</span><span id=__span-37-23><a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a>    <span class=n>exits</span> <span class=o>=</span> <span class=n>sma_long</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>crossed_below</span><span class=p>(</span><span class=n>sma_short</span><span class=p>)</span>
</span><span id=__span-37-24><a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>    <span class=n>pf</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Portfolio</span><span class=o>.</span><span class=n>from_signals</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>entries</span><span class=p>,</span> <span class=n>exits</span><span class=p>)</span>
</span><span id=__span-37-25><a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a>    <span class=k>return</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>pf</span><span class=p>,</span> <span class=n>metric</span><span class=p>)</span>
</span><span id=__span-37-26><a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a>
</span><span id=__span-37-27><a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;What&#39;s the total return of a (20, 50) crossover for AAPL?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=s2>&quot;mcp&quot;</span><span class=p>)</span>
</span><span id=__span-37-28><a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a>
</span><span id=__span-37-29><a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-37-30><a id=__codelineno-37-30 name=__codelineno-37-30 href=#__codelineno-37-30></a>
</span><span id=__span-37-31><a id=__codelineno-37-31 name=__codelineno-37-31 href=#__codelineno-37-31></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;What&#39;s 1234 * (5678 + 91011)?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=p>{</span>  <span class=c1># (6)</span>
</span><span id=__span-37-32><a id=__codelineno-37-32 name=__codelineno-37-32 href=#__codelineno-37-32></a>    <span class=s2>&quot;add&quot;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>,</span>
</span><span id=__span-37-33><a id=__codelineno-37-33 name=__codelineno-37-33 href=#__codelineno-37-33></a>    <span class=s2>&quot;subtract&quot;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>-</span> <span class=n>y</span><span class=p>,</span>
</span><span id=__span-37-34><a id=__codelineno-37-34 name=__codelineno-37-34 href=#__codelineno-37-34></a>    <span class=s2>&quot;multiply&quot;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>*</span> <span class=n>y</span><span class=p>,</span>
</span><span id=__span-37-35><a id=__codelineno-37-35 name=__codelineno-37-35 href=#__codelineno-37-35></a>    <span class=s2>&quot;divide&quot;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>/</span> <span class=n>y</span><span class=p>,</span>
</span><span id=__span-37-36><a id=__codelineno-37-36 name=__codelineno-37-36 href=#__codelineno-37-36></a><span class=p>})</span>
</span><span id=__span-37-37><a id=__codelineno-37-37 name=__codelineno-37-37 href=#__codelineno-37-37></a>
</span><span id=__span-37-38><a id=__codelineno-37-38 name=__codelineno-37-38 href=#__codelineno-37-38></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-37-39><a id=__codelineno-37-39 name=__codelineno-37-39 href=#__codelineno-37-39></a>
</span><span id=__span-37-40><a id=__codelineno-37-40 name=__codelineno-37-40 href=#__codelineno-37-40></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_config.tool_registry.add&quot;</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>)</span>
</span><span id=__span-37-41><a id=__codelineno-37-41 name=__codelineno-37-41 href=#__codelineno-37-41></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_config.tool_registry.subtract&quot;</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>-</span> <span class=n>y</span><span class=p>)</span>
</span><span id=__span-37-42><a id=__codelineno-37-42 name=__codelineno-37-42 href=#__codelineno-37-42></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_config.tool_registry.multiply&quot;</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>*</span> <span class=n>y</span><span class=p>)</span>
</span><span id=__span-37-43><a id=__codelineno-37-43 name=__codelineno-37-43 href=#__codelineno-37-43></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_config.tool_registry.divide&quot;</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>/</span> <span class=n>y</span><span class=p>)</span>
</span><span id=__span-37-44><a id=__codelineno-37-44 name=__codelineno-37-44 href=#__codelineno-37-44></a>
</span><span id=__span-37-45><a id=__codelineno-37-45 name=__codelineno-37-45 href=#__codelineno-37-45></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;What&#39;s 1234 * (5678 + 91011)?&quot;</span><span class=p>,</span> <span class=n>tools</span><span class=o>=</span><span class=s2>&quot;registry&quot;</span><span class=p>)</span>  <span class=c1># (7)</span>
</span><span id=__span-37-46><a id=__codelineno-37-46 name=__codelineno-37-46 href=#__codelineno-37-46></a>
</span><span id=__span-37-47><a id=__codelineno-37-47 name=__codelineno-37-47 href=#__codelineno-37-47></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-37-48><a id=__codelineno-37-48 name=__codelineno-37-48 href=#__codelineno-37-48></a>
</span><span id=__span-37-49><a id=__codelineno-37-49 name=__codelineno-37-49 href=#__codelineno-37-49></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-37-50><a id=__codelineno-37-50 name=__codelineno-37-50 href=#__codelineno-37-50></a>
</span><span id=__span-37-51><a id=__codelineno-37-51 name=__codelineno-37-51 href=#__codelineno-37-51></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>tool_display_format</span><span class=o>=</span><span class=s2>&quot;none&quot;</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-37-52><a id=__codelineno-37-52 name=__codelineno-37-52 href=#__codelineno-37-52></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>tool_display_format</span><span class=o>=</span><span class=s2>&quot;minimal&quot;</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-37-53><a id=__codelineno-37-53 name=__codelineno-37-53 href=#__codelineno-37-53></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>tool_display_format</span><span class=o>=</span><span class=s2>&quot;compact&quot;</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-37-54><a id=__codelineno-37-54 name=__codelineno-37-54 href=#__codelineno-37-54></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>tool_display_format</span><span class=o>=</span><span class=s2>&quot;full&quot;</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span><span id=__span-37-55><a id=__codelineno-37-55 name=__codelineno-37-55 href=#__codelineno-37-55></a>
</span><span id=__span-37-56><a id=__codelineno-37-56 name=__codelineno-37-56 href=#__codelineno-37-56></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>max_tool_calls</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span>  <span class=c1># (13)!</span>
</span><span id=__span-37-57><a id=__codelineno-37-57 name=__codelineno-37-57 href=#__codelineno-37-57></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span><span class=s2>&quot;...&quot;</span><span class=p>,</span> <span class=n>tool_dump_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dump_engine</span><span class=o>=</span><span class=s2>&quot;yaml&quot;</span><span class=p>))</span>  <span class=c1># (14)!</span>
</span><span id=__span-37-58><a id=__codelineno-37-58 name=__codelineno-37-58 href=#__codelineno-37-58></a><span class=n>vbt</span><span class=o>.</span><span class=n>interact</span><span class=p>(</span>
</span><span id=__span-37-59><a id=__codelineno-37-59 name=__codelineno-37-59 href=#__codelineno-37-59></a>    <span class=s2>&quot;...&quot;</span><span class=p>,</span> 
</span><span id=__span-37-60><a id=__codelineno-37-60 name=__codelineno-37-60 href=#__codelineno-37-60></a>    <span class=n>tool_request_template</span><span class=o>=</span><span class=s2>&quot;Requested:</span><span class=se>\n</span><span class=s2>$payload&quot;</span><span class=p>,</span>  <span class=c1># (15)!</span>
</span><span id=__span-37-61><a id=__codelineno-37-61 name=__codelineno-37-61 href=#__codelineno-37-61></a>    <span class=n>tool_response_template</span><span class=o>=</span><span class=s2>&quot;Responded with:</span><span class=se>\n</span><span class=s2>$payload&quot;</span>
</span><span id=__span-37-62><a id=__codelineno-37-62 name=__codelineno-37-62 href=#__codelineno-37-62></a><span class=p>)</span>
</span><span id=__span-37-63><a id=__codelineno-37-63 name=__codelineno-37-63 href=#__codelineno-37-63></a>
</span><span id=__span-37-64><a id=__codelineno-37-64 name=__codelineno-37-64 href=#__codelineno-37-64></a><span class=c1># (16)!</span>
</span></code></pre></div> <ol> <li>Import the tools from the <a href=https://vectorbt.pro/pvt_41531c19/api/mcp_server/ >MCP server</a>.</li> <li>Import only specific tools using their reference names (i.e., fully qualified names).</li> <li>Import actual function objects</li> <li>Import the tools from the <a href=https://vectorbt.pro/pvt_41531c19/api/mcp_server/ >MCP server</a>, excluding the <a href=https://vectorbt.pro/pvt_41531c19/api/mcp_server/#vectorbtpro.mcp_server.run_code>run_code</a> tool.</li> <li>Register custom tools using the <a href=https://vectorbt.pro/pvt_41531c19/api/mcp_server/#vectorbtpro.mcp_server.register_tool>register_tool</a> decorator. It will become immediately available in the MCP server.</li> <li>Define custom tools using lambda functions and pass them as a dictionary.</li> <li>The same as above but saving the tools in the global registry (not part of the MCP server).</li> <li>Import tools from both the MCP server and the global registry (uses <code>tools="all"</code> by default).</li> <li>Don't display tools in thought bubbles.</li> <li>Display tools in thought bubbles but not their contents.</li> <li>Display tool contents in thought bubbles but show only a preview.</li> <li>Display tool contents in thought bubbles in full.</li> <li>Force a maximum number of tool calls and produce the final answer once the limit is reached.</li> <li>Display tool parameters using a different format, here YAML.</li> <li>Customize tool request and response templates.</li> <li>For argument descriptions, see <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a>.</li> </ol> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>When defining a tool function, 1) use <code>def</code> instead of <code>lambda</code>, 2) use annotations for the input types, and 3) write comprehensive documentation as a (preferably) Google-formatted docstring.</p> </div> <h2 id=rag>RAG<a class=headerlink href=#rag title="Permanent link">&para;</a></h2> <p>VBT uses a set of components for standard RAG. Most of these are orchestrated and deployed automatically whenever you globally <a href=#globally>search</a> for knowledge on VBT or <a href=#globally_1>chat</a> about VBT.</p> <h3 id=tokenizer>Tokenizer<a class=headerlink href=#tokenizer title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/tokenization/#vectorbtpro.knowledge.tokenization.Tokenizer>Tokenizer</a> class and its subclasses provide an interface for converting text into tokens.</p> <div class="language-python highlight"><span class=filename>How to tokenize text</span><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=n>tokenizer</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TikTokenizer</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=n>tokenizer</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TikTokenizer</span><span class=p>(</span><span class=n>encoding</span><span class=o>=</span><span class=s2>&quot;o200k_base&quot;</span><span class=p>)</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=n>tokenizer</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TikTokenizer</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4o&quot;</span><span class=p>)</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=n>vbt</span><span class=o>.</span><span class=n>TikTokenizer</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>encoding</span><span class=o>=</span><span class=s2>&quot;o200k_base&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=n>token_count</span> <span class=o>=</span> <span class=n>tokenizer</span><span class=o>.</span><span class=n>count_tokens</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=n>tokens</span> <span class=o>=</span> <span class=n>tokenizer</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=n>text</span> <span class=o>=</span> <span class=n>tokenizer</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=n>tokens</span><span class=p>)</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=n>tokens</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>tokenize</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-38-14><a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=n>text</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>detokenize</span><span class=p>(</span><span class=n>tokens</span><span class=p>)</span>
</span><span id=__span-38-15><a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>
</span><span id=__span-38-16><a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a><span class=n>tokens</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>tokenize</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>tokenizer</span><span class=o>=</span><span class=s2>&quot;tiktoken&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4o&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span></code></pre></div> <ol> <li>Use the <code>tiktoken</code> package as a tokenizer.</li> <li>Set the default settings.</li> <li>Use the tokenizer to count tokens in a text, encode text into tokens, or decode tokens back into text.</li> <li>There are also shortcut methods that create a tokenizer for you.</li> <li>The tokenizer type and parameters can be passed as keyword arguments to both methods.</li> </ol> <h3 id=embeddings>Embeddings<a class=headerlink href=#embeddings title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> class and its subclasses provide an interface for generating vector representations of text.</p> <div class="language-python highlight"><span class=filename>How to embed text</span><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAIEmbeddings</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAIEmbeddings</span><span class=p>(</span><span class=n>batch_size</span><span class=o>=</span><span class=mi>256</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAIEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>GeminiEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gemini-embedding-001&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>HFInferenceEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;BAAI/bge-small-en-v1.5&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LiteLLMEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;openai/text-embedding-3-large&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LlamaIndexEmbeddings</span><span class=p>(</span><span class=n>embedding</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=n>embeddings</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OllamaEmbeddings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;dengcao/Qwen3-Embedding-0.6B:Q8_0&quot;</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=n>vbt</span><span class=o>.</span><span class=n>OpenAIEmbeddings</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=n>emb</span> <span class=o>=</span> <span class=n>embeddings</span><span class=o>.</span><span class=n>get_embedding</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a><span class=n>embs</span> <span class=o>=</span> <span class=n>embeddings</span><span class=o>.</span><span class=n>get_embeddings</span><span class=p>(</span><span class=n>texts</span><span class=p>)</span>
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a><span class=n>emb</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>embed</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-39-18><a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a><span class=n>embs</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>embed</span><span class=p>(</span><span class=n>texts</span><span class=p>)</span>
</span><span id=__span-39-19><a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a>
</span><span id=__span-39-20><a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a><span class=n>emb</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>embed</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>embeddings</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span></code></pre></div> <ol> <li>Use the <code>openai</code> (OpenAI) package as an embeddings provider.</li> <li>Process embeddings in batches of 256. Supported by all embeddings providers.</li> <li>Specify the model. Supported by all embeddings providers.</li> <li>Use the <code>google-genai</code> (Gemini) package as an embeddings provider.</li> <li>Use the <code>huggingface-hub</code> (Hugging Face inference) package as an embeddings provider.</li> <li>Use the <code>litellm</code> (LiteLLM) package as an embeddings provider.</li> <li>Use the <code>llama-index</code> (LlamaIndex) package as an embeddings provider.</li> <li>Use the <code>ollama</code> (Ollama) package as an embeddings provider.</li> <li>Set the default settings.</li> <li>Use the embeddings provider to get embeddings for one or more texts.</li> <li>There is also a shortcut method that creates an embeddings provider for you. It accepts one or more texts.</li> <li>The embeddings provider type and parameters can be passed as keyword arguments to the method.</li> </ol> <h3 id=completions>Completions<a class=headerlink href=#completions title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> class and its subclasses provide an interface for generating text completions based on user queries. For arguments such as <code>formatter</code>, see <a href=#chatting>chatting</a>.</p> <div class="language-python highlight"><span class=filename>How to (auto-)complete a query</span><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=p>(</span><span class=n>stream</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=p>(</span><span class=n>max_tokens</span><span class=o>=</span><span class=mi>100_000</span><span class=p>,</span> <span class=n>tokenizer</span><span class=o>=</span><span class=s2>&quot;tiktoken&quot;</span><span class=p>)</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>,</span> <span class=n>reasoning_effort</span><span class=o>=</span><span class=s2>&quot;high&quot;</span><span class=p>)</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=p>(</span><span class=n>formatter</span><span class=o>=</span><span class=s2>&quot;html&quot;</span><span class=p>,</span> <span class=n>formatter_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>cache</span><span class=o>=</span><span class=kc>False</span><span class=p>))</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>AnthropicCompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;claude-sonnet-4-0&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>GeminiCompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gemini-2.5-flash&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>HFInferenceCompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;openai/gpt-oss-120b&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LiteLLMCompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;openai/gpt-5-mini&quot;</span><span class=p>,</span> <span class=n>reasoning_effort</span><span class=o>=</span><span class=s2>&quot;high&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LlamaIndexCompletions</span><span class=p>(</span><span class=n>llm</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>,</span> <span class=n>reasoning_effort</span><span class=o>=</span><span class=s2>&quot;high&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=n>completions</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>OllamaCompletions</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;qwen3:latest&quot;</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=n>vbt</span><span class=o>.</span><span class=n>OpenAICompletions</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>,</span> <span class=n>reasoning_effort</span><span class=o>=</span><span class=s2>&quot;high&quot;</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=n>completions</span><span class=o>.</span><span class=n>get_completion</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=n>content</span> <span class=o>=</span> <span class=n>completions</span><span class=o>.</span><span class=n>get_completion_content</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class=n>vbt</span><span class=o>.</span><span class=n>complete</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=n>vbt</span><span class=o>.</span><span class=n>complete</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>completions</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>,</span> <span class=n>reasoning_effort</span><span class=o>=</span><span class=s2>&quot;high&quot;</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span></code></pre></div> <ol> <li>Use the <code>openai</code> (OpenAI) package as a completions provider.</li> <li>Use the <code>anthropic</code> (Anthropic) package as a completions provider.</li> <li>Use the <code>google-genai</code> (Gemini) package as a completions provider.</li> <li>Use the <code>huggingface-hub</code> (Hugging Face inference) package as a completions provider.</li> <li>Use the <code>litellm</code> (LiteLLM) package as a completions provider.</li> <li>Use the <code>llama-index</code> (LlamaIndex) package as a completions provider.</li> <li>Use the <code>ollama</code> (Ollama) package as a completions provider.</li> <li>Set the default settings.</li> <li>Use the completions provider to get a completion for a text.</li> <li>Get the content string of a completion without formatting.</li> <li>There is also a shortcut method that creates a completions provider for you.</li> <li>The completions provider type and parameters can be passed as keyword arguments to the method.</li> </ol> <h3 id=text-splitter>Text splitter<a class=headerlink href=#text-splitter title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/text_splitting/#vectorbtpro.knowledge.text_splitting.TextSplitter>TextSplitter</a> class and its subclasses provide an interface for splitting text.</p> <div class="language-python highlight"><span class=filename>How to split text</span><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TokenSplitter</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TokenSplitter</span><span class=p>(</span><span class=n>chunk_size</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>chunk_overlap</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SegmentSplitter</span><span class=p>()</span>  <span class=c1># (2)!</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SegmentSplitter</span><span class=p>(</span><span class=n>separators</span><span class=o>=</span><span class=sa>r</span><span class=s2>&quot;\s+&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SegmentSplitter</span><span class=p>(</span><span class=n>separators</span><span class=o>=</span><span class=p>[</span><span class=sa>r</span><span class=s2>&quot;(?&lt;=[.!?])\s+&quot;</span><span class=p>,</span> <span class=sa>r</span><span class=s2>&quot;\s+&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>])</span>  <span class=c1># (4)!</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>SegmentSplitter</span><span class=p>(</span><span class=n>tokenizer</span><span class=o>=</span><span class=s2>&quot;tiktoken&quot;</span><span class=p>,</span> <span class=n>tokenizer_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;gpt-4o&quot;</span><span class=p>))</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=n>text_splitter</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LlamaIndexSplitter</span><span class=p>(</span><span class=n>node_parser</span><span class=o>=</span><span class=s2>&quot;SentenceSplitter&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=n>vbt</span><span class=o>.</span><span class=n>TokenSplitter</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>chunk_size</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>chunk_overlap</span><span class=o>=</span><span class=mi>200</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=n>text_chunks</span> <span class=o>=</span> <span class=n>text_splitter</span><span class=o>.</span><span class=n>split_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (7)!</span>
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>
</span><span id=__span-41-13><a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-41-14><a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a>
</span><span id=__span-41-15><a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a><span class=n>text_chunks</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>split_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-41-16><a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a>
</span><span id=__span-41-17><a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a><span class=n>text_chunks</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>split_text</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>text_splitter</span><span class=o>=</span><span class=s2>&quot;llamaindex&quot;</span><span class=p>,</span> <span class=n>node_parser</span><span class=o>=</span><span class=s2>&quot;SentenceSplitter&quot;</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span></code></pre></div> <ol> <li>Create a splitter that splits text into tokens.</li> <li>Create a splitter that splits text into segments. By default, it splits into paragraphs and sentences, words (if the sentence is too long), and then tokens (if the word is too long).</li> <li>Split text strictly into words.</li> <li>Split text into sentences, words (if the sentence is too long), and then tokens (if the word is too long).</li> <li>Use the <code>SentenceSplitter</code> from the <code>llamaindex</code> package as a text splitter.</li> <li>Set the default settings.</li> <li>Use the text splitter to split a text, which returns a generator.</li> <li>There is also a shortcut method that creates a text splitter for you.</li> <li>The text splitter type and parameters can be passed as keyword arguments to the method.</li> </ol> <h3 id=object-store>Object store<a class=headerlink href=#object-store title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/doc_storing/#vectorbtpro.knowledge.doc_storing.ObjectStore>ObjectStore</a> class and its subclasses provide an interface for efficiently storing and retrieving arbitrary Python objects, such as text documents and embeddings. These objects must subclass <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/doc_storing/#vectorbtpro.knowledge.doc_storing.StoreObject>StoreObject</a>.</p> <div class="language-python highlight"><span class=filename>How to store objects</span><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DictStore</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MemoryStore</span><span class=p>(</span><span class=n>store_id</span><span class=o>=</span><span class=s2>&quot;abc&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>MemoryStore</span><span class=p>(</span><span class=n>purge_on_open</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>FileStore</span><span class=p>(</span><span class=n>dir_path</span><span class=o>=</span><span class=s2>&quot;./file_store&quot;</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>FileStore</span><span class=p>(</span><span class=n>consolidate</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>use_patching</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>LMDBStore</span><span class=p>(</span><span class=n>dir_path</span><span class=o>=</span><span class=s2>&quot;./lmdb_store&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>CachedStore</span><span class=p>(</span><span class=n>obj_store</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>FileStore</span><span class=p>())</span>  <span class=c1># (7)!</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=n>obj_store</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>CachedStore</span><span class=p>(</span><span class=n>obj_store</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>FileStore</span><span class=p>(),</span> <span class=n>mirror</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=n>vbt</span><span class=o>.</span><span class=n>FileStore</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>consolidate</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>use_patching</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=n>obj</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=p>(</span><span class=n>id_</span><span class=p>,</span> <span class=n>text</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=n>obj</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=n>obj</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span>  <span class=c1># (12)!</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a>    <span class=p>{</span><span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=n>timestamp</span><span class=p>,</span> <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=n>text</span><span class=p>},</span> 
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>    <span class=n>text_path</span><span class=o>=</span><span class=s2>&quot;content&quot;</span><span class=p>,</span>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a>    <span class=n>excl_embed_metadata</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;timestamp&quot;</span><span class=p>],</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a>    <span class=n>dump_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dump_engine</span><span class=o>=</span><span class=s2>&quot;nestedtext&quot;</span><span class=p>)</span>
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a><span class=p>)</span>
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a><span class=n>obj1</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>StoreEmbedding</span><span class=p>(</span><span class=n>id1</span><span class=p>,</span> <span class=n>child_ids</span><span class=o>=</span><span class=p>[</span><span class=n>id2</span><span class=p>,</span> <span class=n>id3</span><span class=p>])</span>  <span class=c1># (13)!</span>
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a><span class=n>obj2</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>StoreEmbedding</span><span class=p>(</span><span class=n>id2</span><span class=p>,</span> <span class=n>parent_id</span><span class=o>=</span><span class=n>id1</span><span class=p>,</span> <span class=n>embedding</span><span class=o>=</span><span class=n>embedding2</span><span class=p>)</span>
</span><span id=__span-42-22><a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a><span class=n>obj3</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>StoreEmbedding</span><span class=p>(</span><span class=n>id3</span><span class=p>,</span> <span class=n>parent_id</span><span class=o>=</span><span class=n>id1</span><span class=p>,</span> <span class=n>embedding</span><span class=o>=</span><span class=n>embedding3</span><span class=p>)</span>
</span><span id=__span-42-23><a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a>
</span><span id=__span-42-24><a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a><span class=k>with</span> <span class=n>obj_store</span><span class=p>:</span>  <span class=c1># (14)!</span>
</span><span id=__span-42-25><a id=__codelineno-42-25 name=__codelineno-42-25 href=#__codelineno-42-25></a>    <span class=n>obj</span> <span class=o>=</span> <span class=n>obj_store</span><span class=p>[</span><span class=n>obj</span><span class=o>.</span><span class=n>id_</span><span class=p>]</span>
</span><span id=__span-42-26><a id=__codelineno-42-26 name=__codelineno-42-26 href=#__codelineno-42-26></a>    <span class=n>obj_store</span><span class=p>[</span><span class=n>obj</span><span class=o>.</span><span class=n>id_</span><span class=p>]</span> <span class=o>=</span> <span class=n>obj</span>
</span><span id=__span-42-27><a id=__codelineno-42-27 name=__codelineno-42-27 href=#__codelineno-42-27></a>    <span class=k>del</span> <span class=n>obj_store</span><span class=p>[</span><span class=n>obj</span><span class=o>.</span><span class=n>id_</span><span class=p>]</span>
</span><span id=__span-42-28><a id=__codelineno-42-28 name=__codelineno-42-28 href=#__codelineno-42-28></a>    <span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>obj_store</span><span class=p>))</span>
</span><span id=__span-42-29><a id=__codelineno-42-29 name=__codelineno-42-29 href=#__codelineno-42-29></a>    <span class=k>for</span> <span class=n>id_</span><span class=p>,</span> <span class=n>obj</span> <span class=ow>in</span> <span class=n>obj_store</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-42-30><a id=__codelineno-42-30 name=__codelineno-42-30 href=#__codelineno-42-30></a>        <span class=o>...</span>
</span></code></pre></div> <ol> <li>Create an object store based on a simple dictionary, where data persists only for the lifetime of the instance.</li> <li>Create an object store based on a global dictionary (<code>memory_store</code>), where data persists for the lifetime of the Python process.</li> <li>Clear the store upon opening, removing any data saved by previous instances.</li> <li>Create an object store based on a file (without patching) or folder (with patching). Patching means that additional changes are saved as separate files.</li> <li>Consolidate the folder (if any) into a file and disable patching.</li> <li>Create an object store based on LMDB.</li> <li>Create an object store that caches the operations of another object store internally.</li> <li>Same as above, but also mirrors operations in the global dictionary (<code>memory_store</code>) to persist the cache for the lifetime of the Python process.</li> <li>Set default settings.</li> <li>Create a text document object.</li> <li>Generate an id automatically from the text.</li> <li>Create a text document object with metadata.</li> <li>Create three embedding objects with relationships.</li> <li>An object store is very easy to use: it behaves just like a regular dictionary.</li> </ol> <h3 id=document-ranker>Document ranker<a class=headerlink href=#document-ranker title="Permanent link">&para;</a></h3> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/doc_ranking/#vectorbtpro.knowledge.doc_ranking.DocumentRanker>DocumentRanker</a> class provides an interface for embedding, scoring, and ranking documents.</p> <div class="language-python highlight"><span class=filename>How to rank documents</span><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=n>doc_ranker</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=n>doc_ranker</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=p>(</span><span class=n>dataset_id</span><span class=o>=</span><span class=s2>&quot;abc&quot;</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=n>doc_ranker</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=p>(</span>  <span class=c1># (3)!</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>    <span class=n>embeddings</span><span class=o>=</span><span class=s2>&quot;litellm&quot;</span><span class=p>,</span> 
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>    <span class=n>embeddings_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>model</span><span class=o>=</span><span class=s2>&quot;openai/text-embedding-3-large&quot;</span><span class=p>)</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=p>)</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=n>doc_ranker</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=p>(</span>  <span class=c1># (4)!</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>    <span class=n>doc_store</span><span class=o>=</span><span class=s2>&quot;file&quot;</span><span class=p>,</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>    <span class=n>doc_store_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dir_path</span><span class=o>=</span><span class=s2>&quot;./doc_file_store&quot;</span><span class=p>),</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>    <span class=n>emb_store</span><span class=o>=</span><span class=s2>&quot;file&quot;</span><span class=p>,</span>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a>    <span class=n>emb_store_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>dir_path</span><span class=o>=</span><span class=s2>&quot;./emb_file_store&quot;</span><span class=p>),</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a><span class=p>)</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=n>doc_ranker</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=p>(</span><span class=n>score_func</span><span class=o>=</span><span class=s2>&quot;dot&quot;</span><span class=p>,</span> <span class=n>score_agg_func</span><span class=o>=</span><span class=s2>&quot;max&quot;</span><span class=p>)</span>  <span class=c1># (5)!</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a><span class=n>vbt</span><span class=o>.</span><span class=n>DocumentRanker</span><span class=o>.</span><span class=n>set_settings</span><span class=p>(</span><span class=n>doc_store</span><span class=o>=</span><span class=s2>&quot;memory&quot;</span><span class=p>,</span> <span class=n>emb_store</span><span class=o>=</span><span class=s2>&quot;memory&quot;</span><span class=p>)</span>  <span class=c1># (6)!</span>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a>
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a><span class=n>documents</span> <span class=o>=</span> <span class=p>[</span><span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=p>(</span><span class=s2>&quot;text1&quot;</span><span class=p>),</span> <span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=p>(</span><span class=s2>&quot;text2&quot;</span><span class=p>)]</span>  <span class=c1># (7)!</span>
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a>
</span><span id=__span-43-19><a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a><span class=n>doc_ranker</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>)</span>  <span class=c1># (8)!</span>
</span><span id=__span-43-20><a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a><span class=n>emb_documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>,</span> <span class=n>return_documents</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-21><a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a><span class=n>embs</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>,</span> <span class=n>return_embeddings</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-22><a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a><span class=n>doc_ranker</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>,</span> <span class=n>refresh</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># (9)!</span>
</span><span id=__span-43-23><a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a>
</span><span id=__span-43-24><a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a><span class=n>doc_scores</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>score_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>)</span>  <span class=c1># (10)!</span>
</span><span id=__span-43-25><a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a><span class=n>chunk_scores</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>score_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>return_chunks</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-26><a id=__codelineno-43-26 name=__codelineno-43-26 href=#__codelineno-43-26></a><span class=n>scored_documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>score_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>return_documents</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-27><a id=__codelineno-43-27 name=__codelineno-43-27 href=#__codelineno-43-27></a>
</span><span id=__span-43-28><a id=__codelineno-43-28 name=__codelineno-43-28 href=#__codelineno-43-28></a><span class=n>documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>)</span>  <span class=c1># (11)!</span>
</span><span id=__span-43-29><a id=__codelineno-43-29 name=__codelineno-43-29 href=#__codelineno-43-29></a><span class=n>scored_documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>return_scores</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-30><a id=__codelineno-43-30 name=__codelineno-43-30 href=#__codelineno-43-30></a><span class=n>documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>  <span class=c1># (12)!</span>
</span><span id=__span-43-31><a id=__codelineno-43-31 name=__codelineno-43-31 href=#__codelineno-43-31></a><span class=n>documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mf>0.1</span><span class=p>)</span>  <span class=c1># (13)!</span>
</span><span id=__span-43-32><a id=__codelineno-43-32 name=__codelineno-43-32 href=#__codelineno-43-32></a><span class=n>documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=s2>&quot;elbow&quot;</span><span class=p>)</span>  <span class=c1># (14)!</span>
</span><span id=__span-43-33><a id=__codelineno-43-33 name=__codelineno-43-33 href=#__codelineno-43-33></a><span class=n>documents</span> <span class=o>=</span> <span class=n>doc_ranker</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>cutoff</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span> <span class=n>min_top_k</span><span class=o>=</span><span class=mi>20</span><span class=p>)</span>  <span class=c1># (15)!</span>
</span><span id=__span-43-34><a id=__codelineno-43-34 name=__codelineno-43-34 href=#__codelineno-43-34></a>
</span><span id=__span-43-35><a id=__codelineno-43-35 name=__codelineno-43-35 href=#__codelineno-43-35></a><span class=c1># ______________________________________________________________</span>
</span><span id=__span-43-36><a id=__codelineno-43-36 name=__codelineno-43-36 href=#__codelineno-43-36></a>
</span><span id=__span-43-37><a id=__codelineno-43-37 name=__codelineno-43-37 href=#__codelineno-43-37></a><span class=n>vbt</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>)</span>  <span class=c1># (16)!</span>
</span><span id=__span-43-38><a id=__codelineno-43-38 name=__codelineno-43-38 href=#__codelineno-43-38></a><span class=n>vbt</span><span class=o>.</span><span class=n>embed_documents</span><span class=p>(</span><span class=n>documents</span><span class=p>,</span> <span class=n>embeddings</span><span class=o>=</span><span class=s2>&quot;openai&quot;</span><span class=p>,</span> <span class=n>model</span><span class=o>=</span><span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>
</span><span id=__span-43-39><a id=__codelineno-43-39 name=__codelineno-43-39 href=#__codelineno-43-39></a><span class=n>documents</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=s2>&quot;How to use VBT?&quot;</span><span class=p>,</span> <span class=n>documents</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Create a document ranker.</li> <li>Set the store id for both the document store and embedding store.</li> <li>Specify the embeddings provider type and parameters.</li> <li>Specify the object store types for documents and embeddings.</li> <li>Specify the score function and score aggregation function. Both can be callables.</li> <li>Set default settings.</li> <li>A document ranker accepts an iterable of store objects, such as text documents.</li> <li>Use the document ranker to embed documents. Embeddings are stored in an embedding store. You can also choose to return the embedded documents or the embeddings themselves.</li> <li>If a document or embedding already exists in the store, override it.</li> <li>Assign each document a similarity score relative to the query and return the scores. You can also specify whether to return the scores for the chunks (by default they are aggregated), or the documents along with their scores.</li> <li>Rank documents based on similarity scores relative to the query. By default, this reorders the documents, but you can also choose to return the documents with their scores.</li> <li>Select the top 50 documents.</li> <li>Select the top 10 percent of documents.</li> <li>Select top documents based on an algorithm such as the Elbow method.</li> <li>Select at least the top 20 documents with a similarity score above 0.5.</li> <li>There are also shortcut methods for embedding and ranking that create a document ranker for you.</li> </ol> <h3 id=pipeline>Pipeline<a class=headerlink href=#pipeline title="Permanent link">&para;</a></h3> <p>The components described above can enhance RAG pipelines, extending their utility beyond the VBT scope.</p> <div class="language-python highlight"><span class=filename>How to create a basic RAG pipeline</span><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=n>data</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>    <span class=s2>&quot;The Eiffel Tower is not located in London.&quot;</span><span class=p>,</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>    <span class=s2>&quot;The Great Wall of China is not visible from Jupiter.&quot;</span><span class=p>,</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>    <span class=s2>&quot;HTML is not a programming language.&quot;</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=p>]</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=n>query</span> <span class=o>=</span> <span class=s2>&quot;Where the Eiffel Tower is not located?&quot;</span>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=n>documents</span> <span class=o>=</span> <span class=nb>map</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>TextDocument</span><span class=o>.</span><span class=n>from_data</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=n>retrieved_documents</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>rank_documents</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>documents</span><span class=p>,</span> <span class=n>top_k</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a><span class=n>context</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=se>\n\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>str</span><span class=p>,</span> <span class=n>retrieved_documents</span><span class=p>))</span>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a><span class=n>vbt</span><span class=o>.</span><span class=n>complete</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>context</span><span class=o>=</span><span class=n>context</span><span class=p>)</span>
</span></code></pre></div> <h2 id=provider-configs>Provider configs<a class=headerlink href=#provider-configs title="Permanent link">&para;</a></h2> <p>VBT supports a variety of providers for document embedding and completion tasks. Below you can find common configurations for each provider. These configurations can be set globally or per-query.</p> <h3 id=openai-chatgpt>OpenAI (ChatGPT)<a class=headerlink href=#openai-chatgpt title="Permanent link">&para;</a></h3> <p><a href=https://openai.com/ >OpenAI</a> is the default provider in VBT.</p> <p>OpenAI requires you to set the <code>OPENAI_API_KEY</code> environment variable or pass it directly as <code>api_key</code>.</p> <div class="language-python highlight"><span class=filename>Set OpenAI API key</span><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_OPENAI_API_KEY&gt;&quot;</span>
</span></code></pre></div> <details class=abstract> <summary>Embeddings</summary> <p>To use OpenAI (default), override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set OpenAI as default embeddings provider</span><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding model can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.openai.model&quot;</span><span class=p>,</span> <span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of dimensions are truncated to 256 for faster processing. You can revert this by setting the <code>dimensions</code> parameter to None.</p> <div class="language-python highlight"><span class=filename>Use the original dimensions</span><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.openai.dimensions&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased (not recommended, unless the number of tokens in each document is small) or decreased.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.openai.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>embeddings_kwargs</code> to pass additional arguments to the OpenAI client and the embeddings API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://platform.openai.com/docs/api-reference>OpenAI documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.openai.client_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.OpenAIEmbeddings>OpenAIEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.openai&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use OpenAI (default), override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set OpenAI as default completions provider</span><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gpt-5&quot;</span><span class=p>)</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Reasoning must be enabled explicitly.</p> <div class="language-python highlight"><span class=filename>Enable reasoning</span><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.reasoning.effort&quot;</span><span class=p>,</span> <span class=s2>&quot;medium&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Chain-of-thought (COT) summaries must be enabled explicitly.</p> <div class="language-python highlight"><span class=filename>Enable COT summaries</span><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.reasoning.summary&quot;</span><span class=p>,</span> <span class=s2>&quot;auto&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the Responses API is used, but you can easily switch to the Completions API.</p> <div class="language-python highlight"><span class=filename>Switch to Completions API</span><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.use_responses&quot;</span><span class=p>,</span> <span class=s2>&quot;False&quot;</span><span class=p>)</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.reasoning_effort&quot;</span><span class=p>,</span> <span class=s2>&quot;medium&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>COT summaries are not supported by the Completions API.</p> </div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>completions_kwargs</code> to pass additional arguments to the OpenAI client and the completions API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://platform.openai.com/docs/api-reference>OpenAI documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.client_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.OpenAICompletions>OpenAICompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h4 id=example-openrouter>Example: OpenRouter<a class=headerlink href=#example-openrouter title="Permanent link">&para;</a></h4> <p>Set the appropriate base URL and API key to use <a href=https://openrouter.ai/ >OpenRouter</a> or other OpenAI-compatible providers.</p> <div class="language-python highlight"><span class=filename>Configure OpenRouter for DeepSeek R1</span><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>)</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.base_url&quot;</span><span class=p>,</span> <span class=s2>&quot;https://openrouter.ai/api/v1&quot;</span><span class=p>)</span>
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.api_key&quot;</span><span class=p>,</span> <span class=s2>&quot;&lt;YOUR_OPENROUTER_API_KEY&gt;&quot;</span><span class=p>)</span>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.model&quot;</span><span class=p>,</span> <span class=s2>&quot;deepseek/deepseek-r1&quot;</span><span class=p>)</span>
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.openai.use_responses&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span></code></pre></div> <ol> <li>Use Completions API for OpenRouter, as Responses API is not supported.</li> </ol> <h3 id=anthropic-claude>Anthropic (Claude)<a class=headerlink href=#anthropic-claude title="Permanent link">&para;</a></h3> <p><a href=https://www.anthropic.com/ >Anthropic</a> with Claude is a popular LLM provider.</p> <p>Anthropic requires you to set the <code>ANTHROPIC_API_KEY</code> environment variable or pass it directly as <code>api_key</code>.</p> <div class="language-python highlight"><span class=filename>Set Anthropic API key</span><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;ANTHROPIC_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_ANTHROPIC_API_KEY&gt;&quot;</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Anthropic does not currently support embeddings.</p> </div> <details class=abstract> <summary>Completions</summary> <p>To use Anthropic, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Anthropic as default embeddings provider</span><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;anthropic&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.model&quot;</span><span class=p>,</span> <span class=s2>&quot;claude-sonnet-4-0&quot;</span><span class=p>)</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;claude-3-5-haiku-latest&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Reasoning must be enabled explicitly by setting the <code>thinking</code> parameters.</p> <div class="language-python highlight"><span class=filename>Enable reasoning</span><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.thinking.type&quot;</span><span class=p>,</span> <span class=s2>&quot;enabled&quot;</span><span class=p>)</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.thinking.budget_tokens&quot;</span><span class=p>,</span> <span class=mi>2048</span><span class=p>)</span>
</span></code></pre></div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>AWS Bedrock and Google Vertex can be used by setting <code>client_type</code> to "bedrock" or "vertex", respectively.</p> <div class="language-python highlight"><span class=filename>Use AWS Bedrock</span><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.client_type&quot;</span><span class=p>,</span> <span class=s2>&quot;bedrock&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>messages_kwargs</code> to pass additional arguments to the Anthropic client and the messages API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://docs.anthropic.com/ >Anthropic documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set maximum output tokens to 4096</span><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic.messages_kwargs.max_tokens&quot;</span><span class=p>,</span> <span class=mi>4096</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.AnthropicCompletions>AnthropicCompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.anthropic&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h3 id=google-gemini>Google (Gemini)<a class=headerlink href=#google-gemini title="Permanent link">&para;</a></h3> <p><a href=https://ai.google.dev/ >Gemini</a> is Google's latest LLM offering.</p> <p>Google requires you to set the <code>GEMINI_API_KEY</code> environment variable or pass it directly as <code>api_key</code>.</p> <div class="language-python highlight"><span class=filename>Set Gemini API key</span><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;GEMINI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_GEMINI_API_KEY&gt;&quot;</span>
</span></code></pre></div> <details class=abstract> <summary>Embeddings</summary> <p>To use Gemini, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Gemini as default embeddings provider</span><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding model can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini-embedding-001&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of dimensions are truncated to 768 (and normalized) for faster processing. You can revert this by setting the <code>output_dimensionality</code> parameter to None.</p> <div class="language-python highlight"><span class=filename>Use the original dimensions</span><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.config.output_dimensionality&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased (not recommended, unless the number of tokens in each document is small) or decreased.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>embeddings_kwargs</code> to pass additional arguments to the Gemini client and the embeddings API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://ai.google.dev/gemini-api/docs/ >Gemini documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Use Vertex AI</span><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.client_kwargs.vertexai&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.client_kwargs.project&quot;</span><span class=p>,</span> <span class=s2>&quot;my-project-id&quot;</span><span class=p>)</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini.client_kwargs.location&quot;</span><span class=p>,</span> <span class=s2>&quot;us-central1&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.GeminiEmbeddings>GeminiEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.gemini&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use Gemini, override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Gemini as default completions provider</span><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini-2.5-flash&quot;</span><span class=p>)</span>
</span><span id=__span-77-2><a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini-2.5-flash-lite&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Reasoning can be controlled by the <code>thinking_config</code> parameters.</p> <div class="language-python highlight"><span class=filename>Enable dynamic reasoning</span><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.config.thinking_config.thinking_budget&quot;</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></code></pre></div> <p>Chain-of-thought (COT) summaries must be enabled explicitly.</p> <div class="language-python highlight"><span class=filename>Enable COT summaries</span><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.config.thinking_config.include_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>If the selected model returns reasoning output, you can disable it by setting VBT's <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>completions_kwargs</code> to pass additional arguments to the Gemini client and the completions API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://ai.google.dev/gemini-api/docs/ >Gemini documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Use Vertex AI</span><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.client_kwargs.vertexai&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span><span id=__span-81-2><a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.client_kwargs.project&quot;</span><span class=p>,</span> <span class=s2>&quot;my-project-id&quot;</span><span class=p>)</span>
</span><span id=__span-81-3><a id=__codelineno-81-3 name=__codelineno-81-3 href=#__codelineno-81-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini.client_kwargs.location&quot;</span><span class=p>,</span> <span class=s2>&quot;us-central1&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.GeminiCompletions>GeminiCompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.gemini&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h3 id=hugging-face-inference>Hugging Face Inference<a class=headerlink href=#hugging-face-inference title="Permanent link">&para;</a></h3> <p><a href=https://huggingface.co/ >Hugging Face</a> provides a wide range of models and APIs. The Inference API allows you to use these models for embeddings and completions without needing to host your own infrastructure.</p> <p>Hugging Face requires you to set the <code>HF_TOKEN</code> environment variable or pass it directly as <code>api_key</code>.</p> <div class="language-python highlight"><span class=filename>Set Hugging Face API key</span><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;HF_TOKEN&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_HF_TOKEN&gt;&quot;</span>
</span></code></pre></div> <details class=abstract> <summary>Embeddings</summary> <p>To use Hugging Face Inference, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Hugging Face Inference as default embeddings provider</span><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;hf_inference&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding model can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.hf_inference.model&quot;</span><span class=p>,</span> <span class=s2>&quot;Qwen/Qwen3-Embedding-8B&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased (not recommended, unless the number of tokens in each document is small) or decreased.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-86-1><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.hf_inference.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>feature_extraction_kwargs</code> to pass additional arguments to the Hugging Face Inference client and the feature-extraction API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://huggingface.co/docs>Hugging Face documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-87-1><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.hf_inference.client_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.HFInferenceEmbeddings>HFInferenceEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-88-1><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.hf_inference&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use Hugging Face Inference, override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Hugging Face Inference as default completions provider</span><pre><span></span><code><span id=__span-89-1><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;hf_inference&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-90-1><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.hf_inference.model&quot;</span><span class=p>,</span> <span class=s2>&quot;openai/gpt-oss-120b&quot;</span><span class=p>)</span>
</span><span id=__span-90-2><a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.hf_inference.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;openai/gpt-oss-20b&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-91-1><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.hf_inference.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>chat_completion_kwargs</code> to pass additional arguments to the Hugging Face Inference client and the chat-completion API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://huggingface.co/docs>Hugging Face documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Use Together AI as inference provider</span><pre><span></span><code><span id=__span-92-1><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.hf_inference.chat_completion.provider&quot;</span><span class=p>,</span> <span class=s2>&quot;together&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.HFInferenceCompletions>HFInferenceCompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-93-1><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.hf_inference&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h3 id=litellm>LiteLLM<a class=headerlink href=#litellm title="Permanent link">&para;</a></h3> <p><a href=https://www.litellm.ai/ >LiteLLM</a> is an LLM gateway in OpenAI format.</p> <p>There isn't a specific API key for LiteLLM; you need to set the environment variable for the provider you want to use, such as <code>DEEPSEEK_API_KEY</code> for DeepSeek, or pass it directly as <code>api_key</code>. See the <a href=https://docs.litellm.ai/ >LiteLLM documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set API keys</span><pre><span></span><code><span id=__span-94-1><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_OPENAI_API_KEY&gt;&quot;</span>
</span><span id=__span-94-2><a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;ANTHROPIC_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_ANTHROPIC_API_KEY&gt;&quot;</span>
</span><span id=__span-94-3><a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;GEMINI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_GEMINI_API_KEY&gt;&quot;</span>
</span><span id=__span-94-4><a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a><span class=o>...</span>
</span></code></pre></div> <details class=abstract> <summary>Embeddings</summary> <p>To use LiteLLM, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set LiteLLM as default embeddings provider</span><pre><span></span><code><span id=__span-95-1><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;litellm&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding provider and/or model can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-96-1><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.litellm.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini/gemini-embedding-001&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of dimensions are truncated to 256 for faster processing. You can revert this by setting the <code>dimensions</code> parameter to None.</p> <div class="language-python highlight"><span class=filename>Use the original dimensions</span><pre><span></span><code><span id=__span-97-1><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.litellm.dimensions&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased (not recommended, unless the number of tokens in each document is small) or decreased.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-98-1><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.litellm.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>embedding_kwargs</code> to pass additional arguments to the LiteLLM embedding API. See the <a href=https://docs.litellm.ai/ >LiteLLM documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-99-1><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.litellm.embedding_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.LiteLLMEmbeddings>LiteLLMEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-100-1><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.litellm&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use LiteLLM, override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set LiteLLM as default completions provider</span><pre><span></span><code><span id=__span-101-1><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;litellm&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-102-1><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini/gemini-2.5-flash&quot;</span><span class=p>)</span>
</span><span id=__span-102-2><a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;gemini/gemini-2.5-flash-lite&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>Reasoning must be enabled explicitly by setting <code>reasoning_effort</code>.</p> <div class="language-python highlight"><span class=filename>Enable reasoning</span><pre><span></span><code><span id=__span-103-1><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm.reasoning_effort&quot;</span><span class=p>,</span> <span class=s2>&quot;medium&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-104-1><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>completion_kwargs</code> to pass additional arguments to the LiteLLM completion API. See the <a href=https://docs.litellm.ai/ >LiteLLM documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-105-1><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm.completion_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.LiteLLMCompletions>LiteLLMCompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-106-1><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.litellm&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h3 id=llamaindex>LlamaIndex<a class=headerlink href=#llamaindex title="Permanent link">&para;</a></h3> <p><a href=https://llamaindex.ai/ >LlamaIndex</a> is a framework for building LLM applications that supports various data sources and integrations. While it provides a (somewhat) unified interface for working with different LLM providers, you may need to install and configure each provider individually.</p> <p>There isn't a specific API key for LlamaIndex; you need to set the environment variable for the provider you want to use, such as <code>DEEPSEEK_API_KEY</code> for DeepSeek, or pass it directly as <code>api_key</code>. See the <a href=https://docs.llamaindex.ai/ >LlamaIndex documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set API keys</span><pre><span></span><code><span id=__span-107-1><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;OPENAI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_OPENAI_API_KEY&gt;&quot;</span>
</span><span id=__span-107-2><a id=__codelineno-107-2 name=__codelineno-107-2 href=#__codelineno-107-2></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;ANTHROPIC_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_ANTHROPIC_API_KEY&gt;&quot;</span>
</span><span id=__span-107-3><a id=__codelineno-107-3 name=__codelineno-107-3 href=#__codelineno-107-3></a><span class=n>env</span><span class=p>[</span><span class=s2>&quot;GEMINI_API_KEY&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;&lt;YOUR_GEMINI_API_KEY&gt;&quot;</span>
</span><span id=__span-107-4><a id=__codelineno-107-4 name=__codelineno-107-4 href=#__codelineno-107-4></a><span class=o>...</span>
</span></code></pre></div> <details class=abstract> <summary>Embeddings</summary> <p>To use LlamaIndex, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set LlamaIndex as default embeddings provider</span><pre><span></span><code><span id=__span-108-1><a id=__codelineno-108-1 name=__codelineno-108-1 href=#__codelineno-108-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;llama_index&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding provider can be changed in the settings. For that, you need to set the <code>embedding</code> parameter to either the name of the class or its qualified name, such as "openai" or "llama_index.llms.openai.OpenAI".</p> <div class="language-python highlight"><span class=filename>Set embedding provider</span><pre><span></span><code><span id=__span-109-1><a id=__codelineno-109-1 name=__codelineno-109-1 href=#__codelineno-109-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.embedding&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The embedding model and other provider-specific settings can be configured under the lowercase-formatted provider name in <code>embedding_configs</code>.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-110-1><a id=__codelineno-110-1 name=__codelineno-110-1 href=#__codelineno-110-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.embedding_configs.openai.model&quot;</span><span class=p>,</span> <span class=s2>&quot;text-embedding-3-large&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased (not recommended, unless the number of tokens in each document is small) or decreased. This can be done both globally and per-provider.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-111-1><a id=__codelineno-111-1 name=__codelineno-111-1 href=#__codelineno-111-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.embedding_configs.openai.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.LlamaIndexEmbeddings>LlamaIndexEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings. This can be done both globally and per-provider.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-112-1><a id=__codelineno-112-1 name=__codelineno-112-1 href=#__codelineno-112-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.embedding_configs.openai&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use LlamaIndex, override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set LlamaIndex as default completions provider</span><pre><span></span><code><span id=__span-113-1><a id=__codelineno-113-1 name=__codelineno-113-1 href=#__codelineno-113-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;llama_index&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The completion provider can be changed in the settings. For that, you need to set the <code>llm</code> parameter to either the name of the class or its qualified name (both are case-insensitive), such as "openai" or "llama_index.llms.openai.OpenAI".</p> <div class="language-python highlight"><span class=filename>Set completion provider</span><pre><span></span><code><span id=__span-114-1><a id=__codelineno-114-1 name=__codelineno-114-1 href=#__codelineno-114-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm&quot;</span><span class=p>,</span> <span class=s2>&quot;openai&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models and other provider-specific settings can be configured under the lowercase-formatted provider name in <code>llm_configs</code>.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-115-1><a id=__codelineno-115-1 name=__codelineno-115-1 href=#__codelineno-115-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm_configs.openai.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gpt-5)</span>
</span><span id=__span-115-2><a id=__codelineno-115-2 name=__codelineno-115-2 href=#__codelineno-115-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm_configs.openai.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;gpt-5-mini&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-116-1><a id=__codelineno-116-1 name=__codelineno-116-1 href=#__codelineno-116-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm_configs.openai.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.LlamaIndexCompletions>LlamaIndexCompletions</a>.</p> </div> <p>To revert all changes, reset the settings. This can be done both globally and per-provider.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-117-1><a id=__codelineno-117-1 name=__codelineno-117-1 href=#__codelineno-117-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm_configs.openai&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h4 id=example-local-hf>Example: Local HF<a class=headerlink href=#example-local-hf title="Permanent link">&para;</a></h4> <p>LlamaIndex can be configured to use local Hugging Face models for embeddings and completions.</p> <div class="language-python highlight"><span class=filename>Configure LlamaIndex for Hugging Face</span><pre><span></span><code><span id=__span-118-1><a id=__codelineno-118-1 name=__codelineno-118-1 href=#__codelineno-118-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;llama_index&quot;</span><span class=p>)</span>
</span><span id=__span-118-2><a id=__codelineno-118-2 name=__codelineno-118-2 href=#__codelineno-118-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.embedding&quot;</span><span class=p>,</span> <span class=s2>&quot;huggingface&quot;</span><span class=p>)</span>
</span><span id=__span-118-3><a id=__codelineno-118-3 name=__codelineno-118-3 href=#__codelineno-118-3></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.model_name&quot;</span><span class=p>,</span> <span class=s2>&quot;BAAI/bge-small-en-v1.5&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-118-4><a id=__codelineno-118-4 name=__codelineno-118-4 href=#__codelineno-118-4></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.llama_index.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-118-5><a id=__codelineno-118-5 name=__codelineno-118-5 href=#__codelineno-118-5></a>
</span><span id=__span-118-6><a id=__codelineno-118-6 name=__codelineno-118-6 href=#__codelineno-118-6></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;llama_index&quot;</span><span class=p>)</span>
</span><span id=__span-118-7><a id=__codelineno-118-7 name=__codelineno-118-7 href=#__codelineno-118-7></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.llm&quot;</span><span class=p>,</span> <span class=s2>&quot;huggingface&quot;</span><span class=p>)</span>
</span><span id=__span-118-8><a id=__codelineno-118-8 name=__codelineno-118-8 href=#__codelineno-118-8></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.model_name&quot;</span><span class=p>,</span> <span class=s2>&quot;deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B&quot;</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-118-9><a id=__codelineno-118-9 name=__codelineno-118-9 href=#__codelineno-118-9></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.llama_index.tokenizer_name&quot;</span><span class=p>,</span> <span class=s2>&quot;deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B&quot;</span><span class=p>)</span>
</span><span id=__span-118-10><a id=__codelineno-118-10 name=__codelineno-118-10 href=#__codelineno-118-10></a>
</span><span id=__span-118-11><a id=__codelineno-118-11 name=__codelineno-118-11 href=#__codelineno-118-11></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.rank_kwargs.dataset_id&quot;</span><span class=p>,</span> <span class=s2>&quot;local&quot;</span><span class=p>)</span>
</span></code></pre></div> <ol> <li>Basic embedding model. Take a look at the <a href=https://huggingface.co/spaces/mteb/leaderboard>MTEB leaderboard</a> for more models.</li> <li>Number of embeddings to generate in parallel. Increase it if you have enough RAM and compute.</li> <li>Discover <a href=https://huggingface.co/deepseek-ai>more DeepSeek models</a>.</li> </ol> <h3 id=ollama>Ollama<a class=headerlink href=#ollama title="Permanent link">&para;</a></h3> <p><a href=https://ollama.com/ >Ollama</a> is a platform for running LLMs on your own hardware.</p> <details class=abstract> <summary>Embeddings</summary> <p>To use Ollama, override the default <code>embeddings</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Ollama as default embeddings provider</span><pre><span></span><code><span id=__span-119-1><a id=__codelineno-119-1 name=__codelineno-119-1 href=#__codelineno-119-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings&quot;</span><span class=p>,</span> <span class=s2>&quot;ollama&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The model (search for available models <a href=https://ollama.com/search>here</a>) can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set embedding model</span><pre><span></span><code><span id=__span-120-1><a id=__codelineno-120-1 name=__codelineno-120-1 href=#__codelineno-120-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.ollama.model&quot;</span><span class=p>,</span> <span class=s2>&quot;dengcao/Qwen3-Embedding-0.6B&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The model will be automatically downloaded when you first use it. The progress bar will indicate the download status. To disable the progress bar, set <code>show_progress</code> to False.</p> </div> <p>By default, the number of embeddings processed at once (<code>batch_size</code>) is 256, which can also be increased or decreased depending on your hardware specifications.</p> <div class="language-python highlight"><span class=filename>Set batch size to 64</span><pre><span></span><code><span id=__span-121-1><a id=__codelineno-121-1 name=__codelineno-121-1 href=#__codelineno-121-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.ollama.batch_size&quot;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>embed_kwargs</code> to pass additional arguments to the Ollama client and the embed API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://github.com/ollama/ollama-python>Ollama documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-122-1><a id=__codelineno-122-1 name=__codelineno-122-1 href=#__codelineno-122-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.ollama.embedding_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.Embeddings>Embeddings</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/embeddings/#vectorbtpro.knowledge.embeddings.OllamaEmbeddings>OllamaEmbeddings</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset embedding settings</span><pre><span></span><code><span id=__span-123-1><a id=__codelineno-123-1 name=__codelineno-123-1 href=#__codelineno-123-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.embeddings_configs.ollama&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <details class=abstract> <summary>Completions</summary> <p>To use Ollama, override the default <code>completions</code> configuration.</p> <div class="language-python highlight"><span class=filename>Set Ollama as default completions provider</span><pre><span></span><code><span id=__span-124-1><a id=__codelineno-124-1 name=__codelineno-124-1 href=#__codelineno-124-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;ollama&quot;</span><span class=p>)</span>
</span></code></pre></div> <p>The main and quick (used in <code>vbt.quick_search()</code> and <code>vbt.quick_chat()</code>) completion models (search for available models <a href=https://ollama.com/search>here</a>) can be changed in the settings.</p> <div class="language-python highlight"><span class=filename>Set completion models</span><pre><span></span><code><span id=__span-125-1><a id=__codelineno-125-1 name=__codelineno-125-1 href=#__codelineno-125-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.model&quot;</span><span class=p>,</span> <span class=s2>&quot;qwen3:4b&quot;</span><span class=p>)</span>
</span><span id=__span-125-2><a id=__codelineno-125-2 name=__codelineno-125-2 href=#__codelineno-125-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.quick_model&quot;</span><span class=p>,</span> <span class=s2>&quot;qwen3:0.6b&quot;</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The model will be automatically downloaded when you first use it. The progress bar will indicate the download status. To disable the progress bar, set <code>show_progress</code> to False.</p> </div> <p>If the selected model returns reasoning output, you can disable it by setting <code>hide_thoughts</code> to True.</p> <div class="language-python highlight"><span class=filename>Disable reasoning output</span><pre><span></span><code><span id=__span-126-1><a id=__codelineno-126-1 name=__codelineno-126-1 href=#__codelineno-126-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.hide_thoughts&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</span></code></pre></div> <p>Use <code>client_kwargs</code> and <code>chat_kwargs</code> to pass additional arguments to the Ollama client and the chat API, respectively. Whenever you set a custom key outside of these dictionaries, it will be assigned to either of these dictionaries automatically. See the <a href=https://github.com/ollama/ollama-python>Ollama documentation</a> for more details.</p> <div class="language-python highlight"><span class=filename>Set timeout to 20 seconds</span><pre><span></span><code><span id=__span-127-1><a id=__codelineno-127-1 name=__codelineno-127-1 href=#__codelineno-127-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.completion_kwargs.timeout&quot;</span><span class=p>,</span> <span class=mf>20.0</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To learn more about the available parameters, check the arguments of <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.Completions>Completions</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/knowledge/completions/#vectorbtpro.knowledge.completions.OllamaCompletions>OllamaCompletions</a>.</p> </div> <p>To revert all changes, reset the settings.</p> <div class="language-python highlight"><span class=filename>Reset completion settings</span><pre><span></span><code><span id=__span-128-1><a id=__codelineno-128-1 name=__codelineno-128-1 href=#__codelineno-128-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</span></code></pre></div> </details> <h4 id=example-gpt-oss>Example: GPT-OSS<a class=headerlink href=#example-gpt-oss title="Permanent link">&para;</a></h4> <p><a href=https://openai.com/index/introducing-gpt-oss/ >GPT-OSS</a> is OpenAI's open-source alternative to ChatGPT mini models, designed to provide similar capabilities while being freely available.</p> <div class="language-python highlight"><span class=filename>Configure Ollama for high-reasoning GPT-OSS</span><pre><span></span><code><span id=__span-129-1><a id=__codelineno-129-1 name=__codelineno-129-1 href=#__codelineno-129-1></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions&quot;</span><span class=p>,</span> <span class=s2>&quot;ollama&quot;</span><span class=p>)</span>
</span><span id=__span-129-2><a id=__codelineno-129-2 name=__codelineno-129-2 href=#__codelineno-129-2></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.model&quot;</span><span class=p>,</span> <span class=s2>&quot;gpt-oss:20b&quot;</span><span class=p>)</span>
</span><span id=__span-129-3><a id=__codelineno-129-3 name=__codelineno-129-3 href=#__codelineno-129-3></a><span class=n>system_prompt</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.system_prompt&quot;</span><span class=p>)</span>
</span><span id=__span-129-4><a id=__codelineno-129-4 name=__codelineno-129-4 href=#__codelineno-129-4></a><span class=n>vbt</span><span class=o>.</span><span class=n>settings</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=s2>&quot;knowledge.chat.completions_configs.ollama.system_prompt&quot;</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>system_prompt</span><span class=si>}</span><span class=se>\n\n</span><span class=s2>---</span><span class=se>\n\n</span><span class=s2>Reasoning: high&quot;</span><span class=p>)</span>
</span></code></pre></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/indicators/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Indicators"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Indicators </div> </div> </a> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/optimization/ class="md-footer__link md-footer__link--next" aria-label="Next: Optimization"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Optimization </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021-2025 Oleg Polakow. All rights reserved. </div> </div> <div class=md-social> <a href=https://www.linkedin.com/in/polakowo target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.prune", "navigation.path", "navigation.footer", "search.suggest", "search.share", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "content.tabs.link", "toc.follow", "toc.integrate", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=https://vectorbt.pro/pvt_41531c19/assets/javascripts/bundle.9d1edc04.min.js></script> <script src=https://vectorbt.pro/pvt_41531c19/assets/scripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js></script> </body> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/cookbook/knowledge/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:46:51 GMT -->
</html>