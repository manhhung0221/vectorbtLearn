<!doctype html><html lang=en class=no-js> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/documentation/data/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:46:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation on handling data in VectorBT PRO"><meta name=author content="Oleg Polakow"><link href=https://vectorbt.pro/documentation/data/ rel=canonical><link href=../building-blocks/index.html rel=prev><link href=local/index.html rel=next><link rel=icon href=../../assets/logo/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.6.21+insiders-4.53.17"><title>Data - VectorBT® PRO</title><link rel=stylesheet href=../../assets/stylesheets/main.010a373c.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=../../../../fonts.gstatic.com/index.html crossorigin><link rel=stylesheet href="../../../../fonts.googleapis.com/cssbe43.css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><link rel=stylesheet href=../../assets/stylesheets/custom-light.css><link rel=stylesheet href=../../assets/stylesheets/custom-dark.css><link rel=stylesheet href=../../assets/stylesheets/pygments-light.css><link rel=stylesheet href=../../assets/stylesheets/pygments-dark.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-0C5VNYCFHL"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-0C5VNYCFHL",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="../../../../www.googletagmanager.com/gtag/jsc6c8?id=G-0C5VNYCFHL",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><meta name=robots content="noindex, nofollow"><meta property=og:title content=Data><meta property=og:type content=website><meta content=https://vectorbt.pro/documentation/data/ property=og:url><meta property=og:image:url content=https://vectorbt.pro/pvt_41531c19/assets/logo/social-new.png><meta property=og:image:type content=image/png><meta property=og:description content="Documentation on handling data in VectorBT PRO"><meta property=og:locale content=en-GB><link rel=apple-touch-icon sizes=180x180 href=https://vectorbt.pro/pvt_41531c19/assets/logo/apple-touch-icon.png><link rel=icon type=image/svg+xml href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon-16x16.png><link rel=manifest href=https://vectorbt.pro/pvt_41531c19/assets/logo/site.webmanifest><link rel=mask-icon href=https://vectorbt.pro/pvt_41531c19/assets/logo/safari-pinned-tab.svg color=#1e1f22><link rel="shortcut icon" href=https://vectorbt.pro/pvt_41531c19/assets/logo/favicon.ico><meta name=msapplication-TileColor content=#1e1f22><meta name=msapplication-config content=https://vectorbt.pro/pvt_41531c19/assets/logo/browserconfig.xml><meta name=theme-color content=#1e1f22><link href=https://unpkg.com/aos@2.3.4/dist/aos.css rel=stylesheet><script src=https://unpkg.com/aos@2.3.4/dist/aos.js></script><link href=http://fonts.cdnfonts.com/css/uni-neue rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js integrity="sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><link rel=preconnect href=https://fonts.googleapis.com/><link rel=preconnect href=https://fonts.gstatic.com/ crossorigin></head> <body dir=ltr data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#data class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> <i>What's new</i>: New LLM providers, reasoning steps, function calling, YAML & TOML support, and <a href=https://vectorbt.pro/pvt_41531c19/getting-started/release-notes><strong>more</strong></a> <span class="twemoji announce-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m153.6 29.9 16-21.3c4-5.4 10.4-8.6 17.1-8.6C198.4 0 208 9.6 208 21.3v22.1c0 13.1 5.4 25.7 14.9 34.7l84.7 80.9c48.8 46.6 76.4 111.2 76.4 178.7C384 434 306 512 209.7 512H192C86 512 0 426 0 320v-3.8c0-48.8 19.4-95.6 53.9-130.1l3.5-3.5c4.2-4.2 10-6.6 16-6.6 12.5 0 22.6 10.1 22.6 22.6V288c0 35.3 28.7 64 64 64s64-28.7 64-64v-3.9c0-18-7.2-35.3-19.9-48l-38.6-38.6c-24-24-37.5-56.7-37.5-90.7 0-27.7 9-54.8 25.6-76.9"/></svg></span> </div> <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script> </aside> </div> <!-- Determine class according to configuration --> <!-- Header --> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <!-- Link to home --> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-header__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> VectorBT® PRO <span class=md-version> v2025.10.15 </span> <span class=unlock-icon><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M192 32c-35.3 0-64 28.7-64 64v64h192c35.3 0 64 28.7 64 64v224c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64V96c0-70.7 57.3-128 128-128 63.5 0 116.1 46.1 126.2 106.7 2.9 17.4-8.8 33.9-26.3 36.9S258 102.8 255 85.3C250 55.1 223.7 32 192 32m40 328c13.3 0 24-10.7 24-24s-10.7-24-24-24h-80c-13.3 0-24 10.7-24 24s10.7 24 24 24z"/></svg></span> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Data </span> </div> </div> </div> <!-- Color palette --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=custom-dark data-md-color-primary=custom-dark data-md-color-accent=custom-dark aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=custom-light data-md-color-primary=custom-light data-md-color-accent=custom-light aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <!-- Site language selector --> <!-- Button to open search modal --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-tabs__link> Getting started </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-tabs__link> Features </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-tabs__link> Cookbook </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-tabs__link> API </a> </li> <li class=md-tabs__item> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-tabs__link> Terms </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://vectorbt.pro/pvt_41531c19/ title="VectorBT® PRO" class="md-nav__button md-logo" aria-label="VectorBT® PRO" data-md-component=logo> <img src=https://vectorbt.pro/pvt_41531c19/assets/logo/logo.svg alt=logo class=logo> </a> VectorBT® PRO </label> <div class=md-nav__source> <a href=https://github.com/polakowo/vectorbt.pro title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vectorbt.pro </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/ class=md-nav__link> <span class=md-ellipsis> Getting started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/features/overview/ class=md-nav__link> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/tutorials/overview/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/fundamentals/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 7a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2zm0 2h2v2H3m12-.5V9a2 2 0 0 0-2-2H9v10h4a2 2 0 0 0 2-2v-1.5a1.54 1.54 0 0 0-1.5-1.5 1.54 1.54 0 0 0 1.5-1.5M13 15h-2v-2h2zm0-4h-2V9h2m6-2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-1h-2v1h-2V9h2v1h2V9a2 2 0 0 0-2-2Z"/></svg> <span class=md-ellipsis> Fundamentals </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/building-blocks/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18s-.41-.06-.57-.18l-7.9-4.44A.99.99 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18s.41.06.57.18l7.9 4.44c.32.17.53.5.53.88zM12 4.15 6.04 7.5 12 10.85l5.96-3.35zM5 15.91l6 3.38v-6.71L5 9.21zm14 0v-6.7l-6 3.37v6.71z"/></svg> <span class=md-ellipsis> Building blocks </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4 checked> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/ class="md-nav__link md-nav__link--active"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg> <span class=md-ellipsis> Data </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#fetching class=md-nav__link> <span class=md-ellipsis> Fetching </span> </a> <nav class=md-nav aria-label=Fetching> <ul class=md-nav__list> <li class=md-nav__item> <a href=#exception-handling class=md-nav__link> <span class=md-ellipsis> Exception handling </span> </a> </li> <li class=md-nav__item> <a href=#custom-context class=md-nav__link> <span class=md-ellipsis> Custom context </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#alignment class=md-nav__link> <span class=md-ellipsis> Alignment </span> </a> <nav class=md-nav aria-label=Alignment> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nans class=md-nav__link> <span class=md-ellipsis> NaNs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#updating class=md-nav__link> <span class=md-ellipsis> Updating </span> </a> <nav class=md-nav aria-label=Updating> <ul class=md-nav__list> <li class=md-nav__item> <a href=#concatenation class=md-nav__link> <span class=md-ellipsis> Concatenation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#getting class=md-nav__link> <span class=md-ellipsis> Getting </span> </a> <nav class=md-nav aria-label=Getting> <ul class=md-nav__list> <li class=md-nav__item> <a href=#magnet-features class=md-nav__link> <span class=md-ellipsis> Magnet features </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#running class=md-nav__link> <span class=md-ellipsis> Running </span> </a> </li> <li class=md-nav__item> <a href=#features-and-symbols class=md-nav__link> <span class=md-ellipsis> Features and symbols </span> </a> <nav class=md-nav aria-label="Features and symbols"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dicts class=md-nav__link> <span class=md-ellipsis> Dicts </span> </a> </li> <li class=md-nav__item> <a href=#selecting class=md-nav__link> <span class=md-ellipsis> Selecting </span> </a> </li> <li class=md-nav__item> <a href=#renaming class=md-nav__link> <span class=md-ellipsis> Renaming </span> </a> </li> <li class=md-nav__item> <a href=#classes class=md-nav__link> <span class=md-ellipsis> Classes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wrapping class=md-nav__link> <span class=md-ellipsis> Wrapping </span> </a> </li> <li class=md-nav__item> <a href=#merging class=md-nav__link> <span class=md-ellipsis> Merging </span> </a> <nav class=md-nav aria-label=Merging> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subclassing class=md-nav__link> <span class=md-ellipsis> Subclassing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resampling class=md-nav__link> <span class=md-ellipsis> Resampling </span> </a> <nav class=md-nav aria-label=Resampling> <ul class=md-nav__list> <li class=md-nav__item> <a href=#realignment class=md-nav__link> <span class=md-ellipsis> Realignment </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transforming class=md-nav__link> <span class=md-ellipsis> Transforming </span> </a> </li> <li class=md-nav__item> <a href=#analysis class=md-nav__link> <span class=md-ellipsis> Analysis </span> </a> <nav class=md-nav aria-label=Analysis> <ul class=md-nav__list> <li class=md-nav__item> <a href=#indexing class=md-nav__link> <span class=md-ellipsis> Indexing </span> </a> </li> <li class=md-nav__item> <a href=#stats-and-plots class=md-nav__link> <span class=md-ellipsis> Stats and plots </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/local/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 20H4a2 2 0 0 1-2-2V6c0-1.11.89-2 2-2h6l2 2h7a2 2 0 0 1 2 2H4v10l2.14-8h17.07l-2.28 8.5c-.23.87-1.01 1.5-1.93 1.5"/></svg> <span class=md-ellipsis> Local </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/remote/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg> <span class=md-ellipsis> Remote </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/synthetic/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 1-1.26 2.75L15 5l2.74 1.26L19 9l1.25-2.74L23 5l-2.75-1.25M9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5M19 15l-1.26 2.74L15 19l2.74 1.25L19 23l1.25-2.75L23 19l-2.75-1.26"/></svg> <span class=md-ellipsis> Synthetic </span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/scheduling/ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20a7 7 0 0 1-7-7 7 7 0 0 1 7-7 7 7 0 0 1 7 7 7 7 0 0 1-7 7m7.03-12.61 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0-9 9 9 9 0 0 0 9 9c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M11 14h2V8h-2m4-7H9v2h6z"/></svg> <span class=md-ellipsis> Scheduling </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/documentation/indicators/ class=md-nav__link> <span class=md-ellipsis> Indicators </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/documentation/portfolio/ class=md-nav__link> <span class=md-ellipsis> Portfolio </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/to-be-continued/ class=md-nav__link> <span class=md-ellipsis> To be continued... </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/cookbook/overview/ class=md-nav__link> <span class=md-ellipsis> Cookbook </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/api/ class=md-nav__link> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=https://vectorbt.pro/pvt_41531c19/terms/terms-of-use/ class=md-nav__link> <span class=md-ellipsis> Terms </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/overview/ class=md-path__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-path__item> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/ class=md-path__link> <span class=md-ellipsis> Data </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id=data><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg></span> Data<a class=headerlink href=#data title="Permanent link">&para;</a></h1> <p>VBT works with Pandas and NumPy arrays, but where do these arrays come from? Obtaining financial data manually can be challenging, especially when an exchange provides only a single batch of data at a time. In such situations, users need to handle tasks like iterating over time ranges, concatenating results, and aligning indexes and columns themselves. This process becomes even more complex when working with multiple symbols.</p> <p>To simplify data retrieval and management, VBT implements the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class, which streamlines the handling of features (such as OHLC) and symbols (such as "BTC-USD"). This is a semi-abstract class, so you need to create a subclass and define custom logic in a few places to fully access its advanced features. Fortunately, a set of custom data classes is already available, but it is helpful to understand how to create your own data class as well.</p> <p>The following graph illustrates the steps discussed below:</p> <pre class=mermaid><code>flowchart TD;
    dataclass["Data class"]
    fetching["Fetching"]
    pdobjs["Pandas objects"]
    wrapping["Wrapping"]
    dataobjs["Data objects"]
    merging["Merging"]
    alignment["Alignment"]
    dataobj["Data object"]
    updating["Updating"]
    transforming["Transforming"]
    resampling["Resampling"]
    indexing["Indexing"]
    getting["Getting"]
    pdobj["Pandas object"]
    running["Running"]
    output["Output"]

    dataclass --&gt; fetching;
    fetching --&gt; alignment;
    pdobjs --&gt; wrapping;
    wrapping --&gt; alignment;
    dataobjs --&gt; merging;
    merging --&gt; alignment;
    alignment --&gt;|"creates new"| dataobj;
    dataobj --&gt; updating;
    updating --&gt; alignment;
    dataobj --&gt; transforming;
    transforming --&gt; alignment;
    dataobj --&gt; getting;
    getting --&gt; pdobj;
    dataobj --&gt; running;
    running --&gt; output;
    dataobj --&gt; resampling;
    resampling --&gt;|"creates new"| dataobj;
    dataobj --&gt; indexing;
    indexing --&gt;|"creates new"| dataobj;</code></pre> <p>(Reload the page if the diagram does not appear.)</p> <h2 id=fetching>Fetching<a class=headerlink href=#fetching title="Permanent link">&para;</a></h2> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class defines an abstract class method <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> for generating, loading, or fetching data for a single symbol from any data source. You must override and implement this method yourself so that it returns a single (Pandas or NumPy) array based on certain parameters, such as the start date, end date, and frequency.</p> <p>Here is a function that retrieves data for any symbol from Yahoo Finance using <a href=https://github.com/ranaroussi/yfinance>yfinance</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro</span><span class=w> </span><span class=kn>import</span> <span class=o>*</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span><span class=w> </span><span class=nf>get_yf_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=n>period</span><span class=o>=</span><span class=s2>&quot;max&quot;</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=gp>... </span>    <span class=kn>import</span><span class=w> </span><span class=nn>yfinance</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>yf</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=gp>... </span>    <span class=k>if</span> <span class=n>start</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=gp>... </span>        <span class=n>start</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>local_datetime</span><span class=p>(</span><span class=n>start</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=gp>... </span>    <span class=k>if</span> <span class=n>end</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=gp>... </span>        <span class=n>end</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>local_datetime</span><span class=p>(</span><span class=n>end</span><span class=p>)</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=gp>... </span>    <span class=k>return</span> <span class=n>yf</span><span class=o>.</span><span class=n>Ticker</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span><span class=o>.</span><span class=n>history</span><span class=p>(</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=gp>... </span>        <span class=n>period</span><span class=o>=</span><span class=n>period</span><span class=p>,</span> 
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=gp>... </span>        <span class=n>start</span><span class=o>=</span><span class=n>start</span><span class=p>,</span> 
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=gp>... </span>        <span class=n>end</span><span class=o>=</span><span class=n>end</span><span class=p>,</span> 
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=gp>... </span>        <span class=o>**</span><span class=n>kwargs</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=gp>... </span>    <span class=p>)</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>get_yf_symbol</span><span class=p>(</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span><span class=p>)</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=go>Date                                                                            </span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277   </span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=go>2020-01-04 00:00:00+00:00  7345.375488  7427.385742  7309.514160  7410.656738   </span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=go>                                Volume  Dividends  Stock Splits  </span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a><span class=go>Date                                                             </span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=go>2019-12-31 00:00:00+00:00  21167946112        0.0           0.0  </span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=go>2020-01-01 00:00:00+00:00  18565664997        0.0           0.0  </span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=go>2020-01-02 00:00:00+00:00  20802083465        0.0           0.0  </span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=go>2020-01-03 00:00:00+00:00  28111481032        0.0           0.0  </span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a><span class=go>2020-01-04 00:00:00+00:00  18444271275        0.0           0.0  </span>
</span></code></pre></div> <ol> <li>Converts to datetime using <a href=https://vectorbt.pro/pvt_41531c19/api/utils/datetime_/#vectorbtpro.utils.datetime_.to_datetime>to_datetime</a></li> </ol> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Why does the returned data start from <code>2019-12-31</code> instead of <code>2020-01-01</code>? The start and end dates you provide are in your local timezone and are then converted to UTC. For example, in the Europe/Berlin timezone, depending on the time of year, <code>2020-01-01</code> becomes <code>2019-12-31 22:00:00</code> UTC, which is the date Yahoo Finance actually receives. To specify a date directly in UTC, append "UTC": <code>2020-01-01 UTC</code>, or use a proper <a href=https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html>Timestamp</a> instance.</p> </div> <p>Using the Pandas format is convenient for a single symbol, but what if you want data for multiple symbols? Remember, VBT expects you to provide each feature, such as open price or high price, as a separate variable. Each variable should have symbols as columns, which means you would need to fetch every symbol manually and reorganize their data. This can become especially troublesome if the symbols have mismatched indexes or columns.</p> <p>Fortunately, there is a class method called <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.pull>Data.pull</a> that solves most of these challenges around iterating, fetching, and merging symbols. It accepts one or multiple symbols, fetches each using <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a>, collects the data into a dictionary, and passes this dictionary to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.from_data>Data.from_data</a> for further processing and class instantiation.</p> <p>Building on the example, let's subclass <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> and override the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> method to call our <code>get_yf_symbol</code> function:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span><span class=w> </span><span class=nc>YFData</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=p>):</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=gp>... </span>    <span class=nd>@classmethod</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>fetch_symbol</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=gp>... </span>        <span class=k>return</span> <span class=n>get_yf_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You can replace <code>get_yf_symbol</code> with any function that returns array-like data!</p> </div> <p>That's it. <code>YFData</code> is now a fully functional data class capable of pulling data from Yahoo Finance and storing it:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <p>The pulled data is stored in the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.data>Data.data</a> dictionary, with symbols as keys and the values being the Pandas objects returned by <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=go>                                 Open        High         Low       Close  \</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=go>Date                                                                        </span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=go>2019-12-31 00:00:00+00:00  132.612274  133.732681  128.798157  129.610855   </span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=go>2020-01-01 00:00:00+00:00  129.630661  132.835358  129.198288  130.802002   </span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.954910  127.410179   </span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=go>2020-01-03 00:00:00+00:00  127.411263  134.554016  126.490021  134.171707   </span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=go>2020-01-04 00:00:00+00:00  134.168518  136.052719  133.040558  135.069366   </span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=go>                                Volume  Dividends  Stock Splits  </span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=go>Date                                                             </span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=go>2019-12-31 00:00:00+00:00   8936866397        0.0           0.0  </span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=go>2020-01-01 00:00:00+00:00   7935230330        0.0           0.0  </span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=go>2020-01-02 00:00:00+00:00   8032709256        0.0           0.0  </span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=go>2020-01-03 00:00:00+00:00  10476845358        0.0           0.0  </span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=go>2020-01-04 00:00:00+00:00   7430904515        0.0           0.0 </span>
</span></code></pre></div> <h3 id=exception-handling>Exception handling<a class=headerlink href=#exception-handling title="Permanent link">&para;</a></h3> <p>If <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> returns <code>None</code> or an empty Pandas object or NumPy array, the symbol will be skipped entirely. <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.pull>Data.pull</a> will also catch any exception raised in <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> and skip the symbol if the argument <code>skip_on_error</code> is True (it is False by default!). Otherwise, it will abort the procedure.</p> <p>In general, it is the responsibility of <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> to handle issues. If you have many data points to fetch and the fetcher relies on a loop to concatenate different batches of data, the best approach is to show the user a warning whenever an exception occurs and return the data that has been fetched up to the latest available point in time, similar to how this is implemented in <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/binance/#vectorbtpro.data.custom.binance.BinanceData>BinanceData</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/ccxt/#vectorbtpro.data.custom.ccxt.CCXTData>CCXTData</a>. In such cases, VBT will replace missing data points with NaN or drop them entirely, while keeping track of the last index. You can wait until your connection is stable and then re-fetch any missing data with <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.update>Data.update</a>.</p> <h3 id=custom-context>Custom context<a class=headerlink href=#custom-context title="Permanent link">&para;</a></h3> <p>Along with the data, <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> can return a dictionary containing custom keyword arguments that serve as the context for the fetch operation. This context can later be accessed in the symbol dictionary <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.returned_kwargs>Data.returned_kwargs</a>. For example, this context may include information on why the fetch failed, the amount of data left to fetch, or which rows the fetched data represents when reading from a local file (as done in <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/csv/#vectorbtpro.data.custom.csv.CSVData>CSVData</a> when updating data).</p> <p>As an example, let's save the current timestamp:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span><span class=w> </span><span class=nc>YFData</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=p>):</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=gp>... </span>    <span class=nd>@classmethod</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>fetch_symbol</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=gp>... </span>        <span class=n>returned_kwargs</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>timestamp</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>timestamp</span><span class=p>())</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=gp>... </span>        <span class=k>return</span> <span class=n>get_yf_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>),</span> <span class=n>returned_kwargs</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span><span class=p>)</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>returned_kwargs</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=go>symbol_dict({&#39;BTC-USD&#39;: {&#39;timestamp&#39;: Timestamp(&#39;2023-08-28 20:08:50.893763&#39;)}})</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.symbol_dict>symbol_dict</a> is a standard dictionary where information is grouped by symbol.</p> </div> <h2 id=alignment>Alignment<a class=headerlink href=#alignment title="Permanent link">&para;</a></h2> <p>Like most classes that hold data, the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class inherits from <a href=https://vectorbt.pro/pvt_41531c19/documentation/building-blocks/#analyzing>Analyzable</a>, allowing you to perform Pandas indexing directly on the class instance to select rows and columns across all Pandas objects stored within that instance. Performing a single Pandas indexing operation across multiple Pandas objects with different labels is not possible, so what happens if you fetch symbol data from different date ranges or with different columns? Whenever <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.pull>Data.pull</a> passes the (unaligned) data dictionary to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.from_data>Data.from_data</a>, it calls <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.align_data>Data.align_data</a>, which does the following:</p> <ol> <li>Converts any array-like data into a Pandas object.</li> <li>Removes rows with duplicate indices except for the most recent one.</li> <li>Calls <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.prepare_tzaware_index>Data.prepare_tzaware_index</a> to convert each object's index into a timezone-aware index using <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.tz_localize.html>DataFrame.tz_localize</a> and <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.tz_convert.html>DataFrame.tz_convert</a>.</li> <li>Calls <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.align_index>Data.align_index</a> to align the index labels of all objects based on a specific rule. By default, it creates the union of all indexes, sorts the resulting index, and fills missing data points in any object with NaN.</li> <li>Calls <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.align_columns>Data.align_columns</a> to align column labels of all objects using a similar approach to index alignment.</li> <li>Once all objects have the same index and columns, it creates a <a href=https://vectorbt.pro/pvt_41531c19/documentation/building-blocks/#wrapping>wrapper</a>.</li> <li>Finally, it passes all the prepared information to the class constructor for instantiation.</li> </ol> <p>Let's walk through this workflow in practice:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>  <span class=c1># (1)!</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span> 
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=gp>... </span>    <span class=p>})</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=go>UserWarning: Symbols have mismatching index. Setting missing data points to NaN.</span>
</span></code></pre></div> <ol> <li>Use <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.symbol_dict>symbol_dict</a> to specify any argument per symbol.</li> </ol> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=go>Date                                                                            </span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=go>2020-01-03 00:00:00+00:00          NaN          NaN          NaN          NaN   </span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=go>2020-01-04 00:00:00+00:00          NaN          NaN          NaN          NaN   </span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=go>Date                                                              </span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=go>2019-12-31 00:00:00+00:00  2.116795e+10        0.0           0.0  </span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=go>2020-01-01 00:00:00+00:00  1.856566e+10        0.0           0.0  </span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=go>2020-01-02 00:00:00+00:00  2.080208e+10        0.0           0.0  </span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=go>2020-01-03 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=go>2020-01-04 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=go>                                 Open        High         Low       Close  \</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=go>Date                                                                        </span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=go>2019-12-31 00:00:00+00:00         NaN         NaN         NaN         NaN   </span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=go>2020-01-01 00:00:00+00:00         NaN         NaN         NaN         NaN   </span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.954910  127.410179   </span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=go>2020-01-03 00:00:00+00:00  127.411263  134.554016  126.490021  134.171707   </span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=go>2020-01-04 00:00:00+00:00  134.168518  136.052719  133.040558  135.069366   </span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a><span class=go>Date                                                              </span>
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a><span class=go>2019-12-31 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a><span class=go>2020-01-01 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a><span class=go>2020-01-02 00:00:00+00:00  8.032709e+09        0.0           0.0  </span>
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a><span class=go>2020-01-03 00:00:00+00:00  1.047685e+10        0.0           0.0  </span>
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a><span class=go>2020-01-04 00:00:00+00:00  7.430905e+09        0.0           0.0 </span>
</span></code></pre></div> <p>Notice how we now have the same index and columns across all Pandas objects. You can use this data in any VBT function without worrying about indexing errors.</p> <h3 id=nans>NaNs<a class=headerlink href=#nans title="Permanent link">&para;</a></h3> <p>If some rows are present in one symbol and missing in another, VBT will raise a warning with the message "Symbols have mismatching index". By default, any missing rows will be replaced with NaN. To drop these rows or raise an error instead, use the <code>missing_index</code> argument:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span> 
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=gp>... </span>    <span class=n>missing_index</span><span class=o>=</span><span class=s2>&quot;drop&quot;</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=go>UserWarning: Symbols have mismatching index. Dropping missing data points.</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=go>                                 Open         High         Low        Close  \</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=go>Date                                                                          </span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=go>2020-01-02 00:00:00+00:00  7202.55127  7212.155273  6935.27002  6985.470215   </span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=go>                                Volume  Dividends  Stock Splits  </span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=go>Date                                                             </span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=go>2020-01-02 00:00:00+00:00  20802083465        0.0           0.0  </span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=go>                                 Open        High        Low       Close  \</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=go>Date                                                                       </span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.95491  127.410179   </span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=go>                               Volume  Dividends  Stock Splits  </span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=go>Date                                                            </span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=go>2020-01-02 00:00:00+00:00  8032709256        0.0           0.0  </span>
</span></code></pre></div> <h2 id=updating>Updating<a class=headerlink href=#updating title="Permanent link">&para;</a></h2> <p>Updating is a standard fetching operation used to update existing data points or add new ones. It requires specifying the first timestamp or row index of the update and assumes that the data points before this timestamp or row index have not changed.</p> <p>Similarly to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a>, updating must be implemented manually by overriding the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.update_symbol>Data.update_symbol</a> method. Unlike the fetcher, the updater is an <strong>instance</strong> method and can access data fetched earlier. For example, it can access the keyword arguments originally passed to the fetcher, which are available in the symbol dictionary <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_kwargs>Data.fetch_kwargs</a>. These arguments can be used as default arguments, or overridden by any argument passed directly to the updater. Each data instance also has a symbol dictionary <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.last_index>Data.last_index</a>, which holds the last fetched index for each symbol. You can use this index as the starting point for the next update.</p> <p>Let's create a new <code>YFData</code> class that can also perform updates on the stored data:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span><span class=w> </span><span class=nc>YFData</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=p>):</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=gp>... </span>    <span class=nd>@classmethod</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>fetch_symbol</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=gp>... </span>        <span class=k>return</span> <span class=n>get_yf_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=gp>...</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>update_symbol</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=gp>... </span>        <span class=n>defaults</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_fetch_kwargs</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=gp>... </span>        <span class=n>defaults</span><span class=p>[</span><span class=s2>&quot;start&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_last_index</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>  <span class=c1># (2)!</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=gp>... </span>        <span class=n>kwargs</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>merge_dicts</span><span class=p>(</span><span class=n>defaults</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>  <span class=c1># (3)!</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>fetch_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>  <span class=c1># (4)!</span>
</span></code></pre></div> <ol> <li>Get the keyword arguments initially passed to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a> for this specific symbol.</li> <li>Override the default value for the starting date. Note that changing the keys will not affect <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_kwargs>Data.fetch_kwargs</a>, but be careful with mutable values!</li> <li>Override the default arguments with new arguments in <code>kwargs</code> using <a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.merge_dicts>merge_dicts</a>.</li> <li>Pass the final arguments to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_symbol>Data.fetch_symbol</a>.</li> </ol> <p>Once the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.update_symbol>Data.update_symbol</a> method is implemented, we can call the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.update>Data.update</a> method to iterate over each symbol and update its data. Under the hood, this method aligns the index and column labels of all returned Pandas objects, appends the new data to the old data through concatenation along rows, and updates the last index for each symbol for use in the next data update. Finally, it produces a new instance of <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> by using <a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.replace>Configured.replace</a>.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>Updating data never overwrites the existing data instance but always returns a new instance. Remember that most classes in VBT are read-only to enable caching and prevent side effects.</p> </div> <p>First, let's fetch the same data as before:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span> 
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=gp>... </span>    <span class=p>})</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=go>UserWarning: Symbols have mismatching index. Setting missing data points to NaN.</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <p>Even though both DataFrames end with the same date, our <code>YFData</code> instance knows that the <code>BTC-USD</code> symbol is 2 rows behind the <code>ETH-USD</code> symbol:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>last_index</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=go>symbol_dict({</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=go>    &#39;BTC-USD&#39;: Timestamp(&#39;2020-01-02 00:00:00+0000&#39;, tz=&#39;UTC&#39;), </span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=go>    &#39;ETH-USD&#39;: Timestamp(&#39;2020-01-04 00:00:00+0000&#39;, tz=&#39;UTC&#39;)</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=go>})</span>
</span></code></pre></div> <p>We can also access the keyword arguments passed to the initial fetch operation:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>fetch_kwargs</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=go>symbol_dict({</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=go>    &#39;BTC-USD&#39;: {&#39;start&#39;: &#39;2020-01-01&#39;, &#39;end&#39;: &#39;2020-01-03&#39;}, </span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=go>    &#39;ETH-USD&#39;: {&#39;start&#39;: &#39;2020-01-03&#39;, &#39;end&#39;: &#39;2020-01-05&#39;}</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=go>})</span>
</span></code></pre></div> <p>The <code>start</code> argument for each symbol will be replaced by its corresponding entry in <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.last_index>Data.last_index</a>, while the <code>end</code> argument can be overridden by any date you specify during the update.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you do not specify the end date, VBT will update only the latest data point for each symbol.</p> </div> <p>Let's update both symbols up to the same date:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span> <span class=o>=</span> <span class=n>yf_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-06&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=go>Date                                                                            </span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277   </span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=go>2020-01-04 00:00:00+00:00  7345.375488  7427.385742  7309.514160  7410.656738   </span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=go>2020-01-05 00:00:00+00:00  7410.451660  7544.497070  7400.535645  7411.317383   </span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=go>Date                                                              </span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=go>2019-12-31 00:00:00+00:00  2.116795e+10        0.0           0.0  </span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=go>2020-01-01 00:00:00+00:00  1.856566e+10        0.0           0.0  </span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=go>2020-01-02 00:00:00+00:00  2.080208e+10        0.0           0.0  </span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=go>2020-01-03 00:00:00+00:00  2.811148e+10        0.0           0.0  </span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=go>2020-01-04 00:00:00+00:00  1.844427e+10        0.0           0.0  </span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=go>2020-01-05 00:00:00+00:00  1.972507e+10        0.0           0.0  </span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a><span class=go>                                 Open        High         Low       Close  \</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a><span class=go>Date                                                                        </span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a><span class=go>2019-12-31 00:00:00+00:00         NaN         NaN         NaN         NaN   </span>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a><span class=go>2020-01-01 00:00:00+00:00         NaN         NaN         NaN         NaN   </span>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.954910  127.410179   </span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a><span class=go>2020-01-03 00:00:00+00:00  127.411263  134.554016  126.490021  134.171707   </span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a><span class=go>2020-01-04 00:00:00+00:00  134.168518  136.052719  133.040558  135.069366   </span>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a><span class=go>2020-01-05 00:00:00+00:00  135.072098  139.410202  135.045624  136.276779   </span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a>
</span><span id=__span-13-32><a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-13-33><a id=__codelineno-13-33 name=__codelineno-13-33 href=#__codelineno-13-33></a><span class=go>Date                                                              </span>
</span><span id=__span-13-34><a id=__codelineno-13-34 name=__codelineno-13-34 href=#__codelineno-13-34></a><span class=go>2019-12-31 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-13-35><a id=__codelineno-13-35 name=__codelineno-13-35 href=#__codelineno-13-35></a><span class=go>2020-01-01 00:00:00+00:00           NaN        NaN           NaN  </span>
</span><span id=__span-13-36><a id=__codelineno-13-36 name=__codelineno-13-36 href=#__codelineno-13-36></a><span class=go>2020-01-02 00:00:00+00:00  8.032709e+09        0.0           0.0  </span>
</span><span id=__span-13-37><a id=__codelineno-13-37 name=__codelineno-13-37 href=#__codelineno-13-37></a><span class=go>2020-01-03 00:00:00+00:00  1.047685e+10        0.0           0.0  </span>
</span><span id=__span-13-38><a id=__codelineno-13-38 name=__codelineno-13-38 href=#__codelineno-13-38></a><span class=go>2020-01-04 00:00:00+00:00  7.430905e+09        0.0           0.0  </span>
</span><span id=__span-13-39><a id=__codelineno-13-39 name=__codelineno-13-39 href=#__codelineno-13-39></a><span class=go>2020-01-05 00:00:00+00:00  7.526675e+09        0.0           0.0 </span>
</span></code></pre></div> <ol> <li>Same date for both symbols.</li> </ol> <p>Each symbol has been updated separately based on its <code>last_index</code> value. The <code>BTC-USD</code> symbol has received new rows from <code>2020-01-02</code> to <code>2020-01-05</code>, while the <code>ETH-USD</code> symbol has received new rows only from <code>2020-01-04</code> to <code>2020-01-05</code>. Now, both symbols are synced up to the same ending date:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span><span class=o>.</span><span class=n>last_index</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=go>symbol_dict({</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=go>    &#39;BTC-USD&#39;: Timestamp(&#39;2020-01-05 00:00:00+0000&#39;, tz=&#39;UTC&#39;), </span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=go>    &#39;ETH-USD&#39;: Timestamp(&#39;2020-01-05 00:00:00+0000&#39;, tz=&#39;UTC&#39;)</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=go>})</span>
</span></code></pre></div> <p>If the last index of the data update falls before the current <code>last_index</code> (meaning you want to update data in the middle), all data after the new last index will be removed:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span> <span class=o>=</span> <span class=n>yf_data_updated</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-02&quot;</span><span class=p>)</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=go>Date                                                                            </span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=go>Date                                                              </span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=go>2019-12-31 00:00:00+00:00  2.116795e+10        0.0           0.0  </span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=go>2020-01-01 00:00:00+00:00  1.856566e+10        0.0           0.0 </span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_updated</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=go>                                 Open        High         Low       Close  \</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=go>Date                                                                        </span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=go>2019-12-31 00:00:00+00:00  132.612274  133.732681  128.798157  129.610855   </span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=go>2020-01-01 00:00:00+00:00  129.630661  132.835358  129.198288  130.802002   </span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=go>Date                                                              </span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=go>2019-12-31 00:00:00+00:00  8.936866e+09        0.0           0.0  </span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=go>2020-01-01 00:00:00+00:00  7.935230e+09        0.0           0.0  </span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The last data point of an update is treated as the most up-to-date, so no previously stored data can come after it.</p> </div> <h3 id=concatenation>Concatenation<a class=headerlink href=#concatenation title="Permanent link">&para;</a></h3> <p>By default, the returned data instance contains all data: the old data concatenated with the new data. To return only the updated data, disable <code>concat</code>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_new</span> <span class=o>=</span> <span class=n>yf_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-06&quot;</span><span class=p>,</span> <span class=n>concat</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_new</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=go>Date                                                                            </span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277   </span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=go>2020-01-04 00:00:00+00:00  7345.375488  7427.385742  7309.514160  7410.656738   </span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=go>2020-01-05 00:00:00+00:00  7410.451660  7544.497070  7400.535645  7411.317383   </span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=go>Date                                                              </span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=go>2020-01-02 00:00:00+00:00  2.080208e+10        0.0           0.0  </span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=go>2020-01-03 00:00:00+00:00  2.811148e+10        0.0           0.0  </span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=go>2020-01-04 00:00:00+00:00  1.844427e+10        0.0           0.0  </span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=go>2020-01-05 00:00:00+00:00  1.972507e+10        0.0           0.0  </span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_new</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=go>                                 Open        High         Low       Close  \</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=go>Date                                                                        </span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.954910  127.410179   </span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=go>2020-01-03 00:00:00+00:00  127.411263  134.554016  126.490021  134.171707   </span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=go>2020-01-04 00:00:00+00:00  134.168518  136.052719  133.040558  135.069366   </span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=go>2020-01-05 00:00:00+00:00  135.072098  139.410202  135.045624  136.276779   </span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=go>                                 Volume  Dividends  Stock Splits  </span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a><span class=go>Date                                                              </span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a><span class=go>2020-01-02 00:00:00+00:00  8.032709e+09        0.0           0.0  </span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=go>2020-01-03 00:00:00+00:00  1.047685e+10        0.0           0.0  </span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a><span class=go>2020-01-04 00:00:00+00:00  7.430905e+09        0.0           0.0  </span>
</span><span id=__span-16-31><a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a><span class=go>2020-01-05 00:00:00+00:00  7.526675e+09        0.0           0.0  </span>
</span></code></pre></div> <p>The returned data instance skips two timestamps: <code>2019-12-31</code> and <code>2020-01-01</code>, since these were not changed during that update. Even though the symbol <code>ETH-USD</code> only received new rows from <code>2020-01-04</code> to <code>2020-01-05</code>, it also contains the old data for <code>2020-01-02</code> and <code>2020-01-03</code>. Why is that? Those timestamps were updated in the <code>BTC-USD</code> dataset, and because the index must be aligned across all symbols, some old data is included to avoid setting NaNs.</p> <h2 id=getting>Getting<a class=headerlink href=#getting title="Permanent link">&para;</a></h2> <p>After data is fetched and a new <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> instance is created, accessing the data is straightforward using the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.data>Data.data</a> dictionary or the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.get>Data.get</a> method.</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <p>Get all features for one symbol:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>symbols</span><span class=o>=</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>)</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=go>Date                                                                            </span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277   </span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=go>2020-01-04 00:00:00+00:00  7345.375488  7427.385742  7309.514160  7410.656738   </span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=go>                                Volume  Dividends  Stock Splits  </span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=go>Date                                                             </span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=go>2019-12-31 00:00:00+00:00  21167946112        0.0           0.0  </span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=go>2020-01-01 00:00:00+00:00  18565664997        0.0           0.0  </span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=go>2020-01-02 00:00:00+00:00  20802083465        0.0           0.0  </span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=go>2020-01-03 00:00:00+00:00  28111481032        0.0           0.0  </span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=go>2020-01-04 00:00:00+00:00  18444271275        0.0           0.0  </span>
</span></code></pre></div> <p>Get specific features for one symbol:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>features</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;High&quot;</span><span class=p>,</span> <span class=s2>&quot;Low&quot;</span><span class=p>],</span> <span class=n>symbols</span><span class=o>=</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>)</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=go>                                  High          Low</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=go>Date                                               </span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=go>2019-12-31 00:00:00+00:00  7335.290039  7169.777832</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=go>2020-01-01 00:00:00+00:00  7254.330566  7174.944336</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=go>2020-01-02 00:00:00+00:00  7212.155273  6935.270020</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=go>2020-01-03 00:00:00+00:00  7413.715332  6914.996094</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=go>2020-01-04 00:00:00+00:00  7427.385742  7309.514160</span>
</span></code></pre></div> <p>Get one feature for all symbols:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>features</span><span class=o>=</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=go>symbol                         BTC-USD     ETH-USD</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=go>Date                                              </span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=go>2019-12-31 00:00:00+00:00  7193.599121  129.610855</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316  130.802002</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215  127.410179</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=go>2020-01-03 00:00:00+00:00  7344.884277  134.171707</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=go>2020-01-04 00:00:00+00:00  7410.656738  135.069366</span>
</span></code></pre></div> <p>Notice how symbols are now columns in the returned DataFrame? This is the format widely used in VBT.</p> <p>Get multiple features for multiple symbols:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>open_price</span><span class=p>,</span> <span class=n>close_price</span> <span class=o>=</span> <span class=n>yf_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>features</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;Open&quot;</span><span class=p>,</span> <span class=s2>&quot;Close&quot;</span><span class=p>])</span>  <span class=c1># (1)!</span>
</span></code></pre></div> <ol> <li>Tuple with DataFrames, one per feature.</li> </ol> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>As you may have noticed, VBT returns different formats depending on whether there is one or multiple features or symbols included in your data instance. To produce a consistent format regardless of the number of features or symbols, pass <code>features</code> or <code>symbols</code> as a list or another collection.</p> <p>For example, calling <code>yf_data.get(features="Close")</code> when there is only one symbol will return a Series instead of a DataFrame. To ensure VBT always returns a DataFrame, pass <code>features=["Close"]</code>.</p> </div> <h3 id=magnet-features>Magnet features<a class=headerlink href=#magnet-features title="Permanent link">&para;</a></h3> <p>Magnet features are features with case-insensitive names that the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class can detect and query. These include static features such as OHLCV, as well as those that can be computed dynamically, like VWAP, HLC/3, OHLC/4, and returns. Each feature is also associated with an instance property that returns that feature for all symbols in a data instance. For example, to get the close price and returns:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=go>symbol                         BTC-USD     ETH-USD</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=go>Date                                              </span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=go>2019-12-31 00:00:00+00:00  7193.599121  129.610855</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316  130.802002</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215  127.410179</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=go>2020-01-03 00:00:00+00:00  7344.884277  134.171707</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=go>2020-01-04 00:00:00+00:00  7410.656738  135.069366</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>returns</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=go>symbol                      BTC-USD   ETH-USD</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=go>Date                                         </span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=go>2019-12-31 00:00:00+00:00  0.000000  0.000000</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=go>2020-01-01 00:00:00+00:00  0.000914  0.009190</span>
</span><span id=__span-22-15><a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=go>2020-01-02 00:00:00+00:00 -0.029819 -0.025931</span>
</span><span id=__span-22-16><a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a><span class=go>2020-01-03 00:00:00+00:00  0.051452  0.053069</span>
</span><span id=__span-22-17><a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=go>2020-01-04 00:00:00+00:00  0.008955  0.006690</span>
</span></code></pre></div> <h2 id=running>Running<a class=headerlink href=#running title="Permanent link">&para;</a></h2> <p>Thanks to the clear structure of magnet features, we can use them when passing data to many functions across VBT. Since most functions do not accept the <code>data</code> instance directly, but expect features such as <code>close</code> to be provided separately, there is a need for a method that can recognize what a function requires and feed the data accordingly. The <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.run>Data.run</a> method serves this purpose: it accepts a function, parses its arguments, and if it recognizes a magnet feature, it forwards it as needed. This is especially helpful for quickly running indicators, which are automatically recognized by their names:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;sma&quot;</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=go>&lt;vectorbtpro.indicators.factory.talib.SMA at 0x7ff75218b5b0&gt;</span>
</span></code></pre></div> <p>When there are multiple third-party libraries with the same indicator name, it is a good idea to provide a prefix with the library name to avoid confusion:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;talib_sma&quot;</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=go>&lt;vectorbtpro.indicators.factory.talib.SMA at 0x7ff752111070&gt;</span>
</span></code></pre></div> <p>This method also accepts the names of all simulation methods available in <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio>Portfolio</a>, such as <a href=https://vectorbt.pro/pvt_41531c19/api/portfolio/base/#vectorbtpro.portfolio.base.Portfolio.from_holding>Portfolio.from_holding</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;from_holding&quot;</span><span class=p>)</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=go>&lt;vectorbtpro.portfolio.base.Portfolio at 0x7ff767e18970&gt;</span>
</span></code></pre></div> <h2 id=features-and-symbols>Features and symbols<a class=headerlink href=#features-and-symbols title="Permanent link">&para;</a></h2> <p>The <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class provides various dictionaries that hold data for each symbol, as well as methods to help manipulate that data.</p> <p>You can view the list of features and symbols using the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.symbols>Data.features</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.symbols>Data.symbols</a> properties, respectively:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>features</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=go>[&#39;Open&#39;, &#39;High&#39;, &#39;Low&#39;, &#39;Close&#39;, &#39;Volume&#39;, &#39;Dividends&#39;, &#39;Stock Splits&#39;]</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>symbols</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=go>[&#39;BTC-USD&#39;, &#39;ETH-USD&#39;]</span>
</span></code></pre></div> <p>There is also a <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.single_key>Data.single_key</a> flag, which is True if the instance holds only one symbol of data (or one feature, if the instance is feature-oriented). This affects <a href=#getting>Getting</a>, as discussed in the hints above.</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>single_key</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=go>False</span>
</span></code></pre></div> <h3 id=dicts>Dicts<a class=headerlink href=#dicts title="Permanent link">&para;</a></h3> <p>Each data instance contains at least five dictionaries:</p> <ol> <li><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.data>Data.data</a> with the Pandas objects.</li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.classes>Data.classes</a> with the classes.</li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.fetch_kwargs>Data.fetch_kwargs</a> with the keyword arguments passed to the fetcher.</li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.returned_kwargs>Data.returned_kwargs</a> with the keyword arguments returned by the fetcher.</li> <li><a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.last_index>Data.last_index</a> with the last fetched index.</li> </ol> <p>Each dictionary is a regular dictionary of either the type <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.symbol_dict>symbol_dict</a> (mostly when the instance is symbol-oriented) or <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.feature_dict>feature_dict</a> (mostly when the instance is feature-oriented).</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>last_index</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=go>Timestamp(&#39;2020-01-04 00:00:00+0000&#39;, tz=&#39;UTC&#39;)</span>
</span></code></pre></div> <div class="admonition important"> <p class=admonition-title>Important</p> <p>Do not change the values of the above dictionaries in-place. Whenever you work with keyword arguments, make sure to create a new dict after selecting a symbol: <code>dict(data.fetch_kwargs[symbol])</code>. This will not change the parent dict if you want to modify the keyword arguments for some task.</p> </div> <h3 id=selecting>Selecting<a class=headerlink href=#selecting title="Permanent link">&para;</a></h3> <p>You can select one or more symbols using <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.select>Data.select</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>)</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=go>&lt;__main__.YFData at 0x7ff6a97f4b38&gt;</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>select</span><span class=p>(</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=go>                                  Open         High          Low        Close  \</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=go>Date                                                                            </span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=go>2019-12-31 00:00:00+00:00  7294.438965  7335.290039  7169.777832  7193.599121   </span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316   </span>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215   </span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277   </span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=go>2020-01-04 00:00:00+00:00  7345.375488  7427.385742  7309.514160  7410.656738   </span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=go>                                Volume  Dividends  Stock Splits  </span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=go>Date                                                             </span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a><span class=go>2019-12-31 00:00:00+00:00  21167946112        0.0           0.0  </span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a><span class=go>2020-01-01 00:00:00+00:00  18565664997        0.0           0.0  </span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=go>2020-01-02 00:00:00+00:00  20802083465        0.0           0.0  </span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a><span class=go>2020-01-03 00:00:00+00:00  28111481032        0.0           0.0  </span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=go>2020-01-04 00:00:00+00:00  18444271275        0.0           0.0  </span>
</span></code></pre></div> <p>The operation above creates a new <code>YFData</code> instance with only one symbol, <code>BTC-USD</code>.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Updating the data in a child instance will not affect the parent instance it was copied from because updating creates a new Pandas object. However, changing the data in-place will also change it in the parent instance. To make both instances fully independent, pass <code>copy_mode_="deep"</code> (see <a href=https://vectorbt.pro/pvt_41531c19/api/utils/config/#vectorbtpro.utils.config.Configured.replace>Configured.replace</a>).</p> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If the instance is feature-oriented, this method applies to features instead of symbols.</p> </div> <h3 id=renaming>Renaming<a class=headerlink href=#renaming title="Permanent link">&para;</a></h3> <p>You can rename symbols using <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.rename>Data.rename</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>rename</span><span class=p>({</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=gp>... </span>    <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;BTC/USD&quot;</span><span class=p>,</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=gp>... </span>    <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;ETH/USD&quot;</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=gp>... </span><span class=p>})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=go>symbol                         BTC/USD     ETH/USD</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=go>Date                                              </span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=go>2019-12-31 00:00:00+00:00  7193.599121  129.610855</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316  130.802002</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215  127.410179</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=go>2020-01-03 00:00:00+00:00  7344.884277  134.171707</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=go>2020-01-04 00:00:00+00:00  7410.656738  135.069366</span>
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Renaming symbols may (and often will) break their updating. Use this only for getting.</p> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If the instance is feature-oriented, this method applies to features instead of symbols.</p> </div> <h3 id=classes>Classes<a class=headerlink href=#classes title="Permanent link">&para;</a></h3> <p>Classes are helpful when you want to introduce another level of abstraction over symbols, such as dividing symbols into industries and sectors. This lets you analyze symbols within their classes and also study entire classes. Classes can be provided to the fetcher using the <code>classes</code> argument. They must be specified per symbol, unless there is only one class to apply to all symbols. In the end, they will be converted into a (multi-)index and stacked on top of symbol columns when you get the symbol wrapper using <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.from_data.get_symbol_wrapper>Data.get_symbol_wrapper</a>. Each class can be provided as a string (which will be stored under the class name <code>symbol_class</code>), or as a dictionary with class names as keys and their corresponding class values as values.</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>cls_yfdata</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;META&quot;</span><span class=p>,</span> <span class=s2>&quot;GOOGL&quot;</span><span class=p>,</span> <span class=s2>&quot;NFLX&quot;</span><span class=p>,</span> <span class=s2>&quot;BAC&quot;</span><span class=p>,</span> <span class=s2>&quot;WFC&quot;</span><span class=p>,</span> <span class=s2>&quot;TLT&quot;</span><span class=p>,</span> <span class=s2>&quot;SHV&quot;</span><span class=p>],</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=gp>... </span>    <span class=n>classes</span><span class=o>=</span><span class=p>[</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Financial&quot;</span><span class=p>),</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Financial&quot;</span><span class=p>),</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Treasury&quot;</span><span class=p>),</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=gp>... </span>        <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Treasury&quot;</span><span class=p>),</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=gp>... </span>    <span class=p>],</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2010-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=gp>... </span>    <span class=n>missing_columns</span><span class=o>=</span><span class=s2>&quot;nan&quot;</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a><span class=gp>&gt;&gt;&gt; </span><span class=n>cls_yfdata</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a><span class=go>class1                         Equity                                     \</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a><span class=go>class2                     Technology                          Financial   </span>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=go>symbol                           META       GOOGL        NFLX        BAC   </span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a><span class=go>Date                                                                       </span>
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a><span class=go>2010-01-04 00:00:00-05:00         NaN   15.684434    7.640000  12.977036   </span>
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21 href=#__codelineno-31-21></a><span class=go>2010-01-05 00:00:00-05:00         NaN   15.615365    7.358571  13.398854   </span>
</span><span id=__span-31-22><a id=__codelineno-31-22 name=__codelineno-31-22 href=#__codelineno-31-22></a><span class=go>2010-01-06 00:00:00-05:00         NaN   15.221722    7.617143  13.555999   </span>
</span><span id=__span-31-23><a id=__codelineno-31-23 name=__codelineno-31-23 href=#__codelineno-31-23></a><span class=go>...                               ...         ...         ...        ...   </span>
</span><span id=__span-31-24><a id=__codelineno-31-24 name=__codelineno-31-24 href=#__codelineno-31-24></a><span class=go>2023-08-24 00:00:00-04:00  286.750000  129.779999  406.929993  28.620001   </span>
</span><span id=__span-31-25><a id=__codelineno-31-25 name=__codelineno-31-25 href=#__codelineno-31-25></a><span class=go>2023-08-25 00:00:00-04:00  285.500000  129.880005  416.029999  28.500000   </span>
</span><span id=__span-31-26><a id=__codelineno-31-26 name=__codelineno-31-26 href=#__codelineno-31-26></a><span class=go>2023-08-28 00:00:00-04:00  290.260010  131.009995  418.059998  28.764999   </span>
</span><span id=__span-31-27><a id=__codelineno-31-27 name=__codelineno-31-27 href=#__codelineno-31-27></a>
</span><span id=__span-31-28><a id=__codelineno-31-28 name=__codelineno-31-28 href=#__codelineno-31-28></a><span class=go>class1                               Fixed Income              </span>
</span><span id=__span-31-29><a id=__codelineno-31-29 name=__codelineno-31-29 href=#__codelineno-31-29></a><span class=go>class2                                   Treasury              </span>
</span><span id=__span-31-30><a id=__codelineno-31-30 name=__codelineno-31-30 href=#__codelineno-31-30></a><span class=go>symbol                           WFC          TLT         SHV  </span>
</span><span id=__span-31-31><a id=__codelineno-31-31 name=__codelineno-31-31 href=#__codelineno-31-31></a><span class=go>Date                                                           </span>
</span><span id=__span-31-32><a id=__codelineno-31-32 name=__codelineno-31-32 href=#__codelineno-31-32></a><span class=go>2010-01-04 00:00:00-05:00  19.073046    62.717960   99.920975  </span>
</span><span id=__span-31-33><a id=__codelineno-31-33 name=__codelineno-31-33 href=#__codelineno-31-33></a><span class=go>2010-01-05 00:00:00-05:00  19.596645    63.123013   99.884712  </span>
</span><span id=__span-31-34><a id=__codelineno-31-34 name=__codelineno-31-34 href=#__codelineno-31-34></a><span class=go>2010-01-06 00:00:00-05:00  19.624567    62.278038   99.893806  </span>
</span><span id=__span-31-35><a id=__codelineno-31-35 name=__codelineno-31-35 href=#__codelineno-31-35></a><span class=go>...                              ...          ...         ...  </span>
</span><span id=__span-31-36><a id=__codelineno-31-36 name=__codelineno-31-36 href=#__codelineno-31-36></a><span class=go>2023-08-24 00:00:00-04:00  41.430000    94.910004  110.389999  </span>
</span><span id=__span-31-37><a id=__codelineno-31-37 name=__codelineno-31-37 href=#__codelineno-31-37></a><span class=go>2023-08-25 00:00:00-04:00  41.230000    95.220001  110.389999  </span>
</span><span id=__span-31-38><a id=__codelineno-31-38 name=__codelineno-31-38 href=#__codelineno-31-38></a><span class=go>2023-08-28 00:00:00-04:00  41.880001    95.320000  110.400002  </span>
</span><span id=__span-31-39><a id=__codelineno-31-39 name=__codelineno-31-39 href=#__codelineno-31-39></a>
</span><span id=__span-31-40><a id=__codelineno-31-40 name=__codelineno-31-40 href=#__codelineno-31-40></a><span class=go>[3436 rows x 7 columns]</span>
</span></code></pre></div> <p>In addition to providing classes to the fetcher, you can also replace them in any existing data instance, which will return a new data instance:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_cls_yfdata</span> <span class=o>=</span> <span class=n>cls_yfdata</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=gp>... </span>    <span class=n>classes</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=gp>... </span>        <span class=s2>&quot;META&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=gp>... </span>        <span class=s2>&quot;GOOGL&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=gp>... </span>        <span class=s2>&quot;NFLX&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Technology&quot;</span><span class=p>),</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=gp>... </span>        <span class=s2>&quot;BAC&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Financial&quot;</span><span class=p>),</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=gp>... </span>        <span class=s2>&quot;WFC&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Equity&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Financial&quot;</span><span class=p>),</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=gp>... </span>        <span class=s2>&quot;TLT&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Treasury&quot;</span><span class=p>),</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=gp>... </span>        <span class=s2>&quot;SHV&quot;</span><span class=p>:</span> <span class=nb>dict</span><span class=p>(</span><span class=n>class1</span><span class=o>=</span><span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span> <span class=n>class2</span><span class=o>=</span><span class=s2>&quot;Treasury&quot;</span><span class=p>),</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=gp>... </span>    <span class=p>})</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <p>You can also use <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.update_classes>Data.update_classes</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_cls_yfdata</span> <span class=o>=</span> <span class=n>cls_yfdata</span><span class=o>.</span><span class=n>update_classes</span><span class=p>(</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=gp>... </span>    <span class=n>class1</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=gp>... </span>        <span class=s2>&quot;META&quot;</span><span class=p>:</span> <span class=s2>&quot;Equity&quot;</span><span class=p>,</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=gp>... </span>        <span class=s2>&quot;GOOGL&quot;</span><span class=p>:</span> <span class=s2>&quot;Equity&quot;</span><span class=p>,</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=gp>... </span>        <span class=s2>&quot;NFLX&quot;</span><span class=p>:</span> <span class=s2>&quot;Equity&quot;</span><span class=p>,</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=gp>... </span>        <span class=s2>&quot;BAC&quot;</span><span class=p>:</span> <span class=s2>&quot;Equity&quot;</span><span class=p>,</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=gp>... </span>        <span class=s2>&quot;WFC&quot;</span><span class=p>:</span> <span class=s2>&quot;Equity&quot;</span><span class=p>,</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=gp>... </span>        <span class=s2>&quot;TLT&quot;</span><span class=p>:</span> <span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=gp>... </span>        <span class=s2>&quot;SHV&quot;</span><span class=p>:</span> <span class=s2>&quot;Fixed Income&quot;</span><span class=p>,</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=gp>... </span>    <span class=n>class2</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=gp>... </span>        <span class=s2>&quot;META&quot;</span><span class=p>:</span> <span class=s2>&quot;Technology&quot;</span><span class=p>,</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=gp>... </span>        <span class=s2>&quot;GOOGL&quot;</span><span class=p>:</span> <span class=s2>&quot;Technology&quot;</span><span class=p>,</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=gp>... </span>        <span class=s2>&quot;NFLX&quot;</span><span class=p>:</span> <span class=s2>&quot;Technology&quot;</span><span class=p>,</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=gp>... </span>        <span class=s2>&quot;BAC&quot;</span><span class=p>:</span> <span class=s2>&quot;Financial&quot;</span><span class=p>,</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=gp>... </span>        <span class=s2>&quot;WFC&quot;</span><span class=p>:</span> <span class=s2>&quot;Financial&quot;</span><span class=p>,</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=gp>... </span>        <span class=s2>&quot;TLT&quot;</span><span class=p>:</span> <span class=s2>&quot;Treasury&quot;</span><span class=p>,</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=gp>... </span>        <span class=s2>&quot;SHV&quot;</span><span class=p>:</span> <span class=s2>&quot;Treasury&quot;</span><span class=p>,</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=gp>... </span>    <span class=p>})</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If the instance is feature-oriented and the dictionary with classes is of type <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.feature_dict>feature_dict</a>, the classes will be applied to features instead of symbols.</p> </div> <h2 id=wrapping>Wrapping<a class=headerlink href=#wrapping title="Permanent link">&para;</a></h2> <p>You do not need data instances to work with VBT, since the main objects VBT operates on are Pandas and NumPy arrays. However, it is often much more convenient to have all your data contained within the same <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> container. This allows data to be managed (aligned, resampled, transformed, etc.) in a standardized way. To wrap any custom Pandas object with a <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> class, you can use the class method <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.from_data>Data.from_data</a>. This method can take either a single Pandas object (which will be stored under the symbol <code>symbol</code>), a symbol dictionary with multiple Pandas objects (one per symbol), or a feature dictionary with multiple Pandas objects (one per feature).</p> <p>The Series or DataFrame to be wrapped typically has columns representing features, such as OHLC, rather than symbols like <code>BTCUSDT</code>. For example:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>btc_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=gp>... </span>    <span class=s2>&quot;Open&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>7194.89</span><span class=p>,</span> <span class=mf>7202.55</span><span class=p>,</span> <span class=mf>6984.42</span><span class=p>],</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=gp>... </span>    <span class=s2>&quot;High&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>7254.33</span><span class=p>,</span> <span class=mf>7212.15</span><span class=p>,</span> <span class=mf>7413.71</span><span class=p>],</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=gp>... </span>    <span class=s2>&quot;Low&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>7174.94</span><span class=p>,</span> <span class=mf>6935.27</span><span class=p>,</span> <span class=mf>6985.47</span><span class=p>],</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=gp>... </span>    <span class=s2>&quot;Close&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>7200.17</span><span class=p>,</span> <span class=mf>6985.47</span><span class=p>,</span> <span class=mf>7344.88</span><span class=p>]</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=gp>... </span><span class=p>},</span> <span class=n>index</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> <span class=n>periods</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>btc_df</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=go>               Open     High      Low    Close</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=go>2020-01-01  7194.89  7254.33  7174.94  7200.17</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=go>2020-01-02  7202.55  7212.15  6935.27  6985.47</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=go>2020-01-03  6984.42  7413.71  6985.47  7344.88</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=gp>&gt;&gt;&gt; </span><span class=n>my_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span><span class=n>btc_df</span><span class=p>)</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>my_data</span><span class=o>.</span><span class=n>hlc3</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=go>2020-01-01 00:00:00+00:00    7209.813333</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=go>2020-01-02 00:00:00+00:00    7044.296667</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=go>2020-01-03 00:00:00+00:00    7248.020000</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=go>Freq: D, dtype: float64</span>
</span></code></pre></div> <p>You can also wrap multiple Pandas objects keyed by symbol:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>eth_df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=gp>... </span>    <span class=s2>&quot;Open&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>127.41</span><span class=p>,</span> <span class=mf>134.16</span><span class=p>,</span> <span class=mf>135.07</span><span class=p>],</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=gp>... </span>    <span class=s2>&quot;High&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>134.55</span><span class=p>,</span> <span class=mf>136.05</span><span class=p>,</span> <span class=mf>139.41</span><span class=p>],</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=gp>... </span>    <span class=s2>&quot;Low&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>126.49</span><span class=p>,</span> <span class=mf>133.04</span><span class=p>,</span> <span class=mf>135.04</span><span class=p>],</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=gp>... </span>    <span class=s2>&quot;Close&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>134.17</span><span class=p>,</span> <span class=mf>135.06</span><span class=p>,</span> <span class=mf>136.27</span><span class=p>]</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=gp>... </span><span class=p>},</span> <span class=n>index</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>date_range</span><span class=p>(</span><span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span> <span class=n>periods</span><span class=o>=</span><span class=mi>3</span><span class=p>))</span>  <span class=c1># (1)!</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>eth_df</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=go>              Open    High     Low   Close</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=go>2020-01-03  127.41  134.55  126.49  134.17</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=go>2020-01-04  134.16  136.05  133.04  135.06</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=go>2020-01-05  135.07  139.41  135.04  136.27</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a><span class=gp>&gt;&gt;&gt; </span><span class=n>my_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=o>.</span><span class=n>from_data</span><span class=p>({</span><span class=s2>&quot;BTCUSDT&quot;</span><span class=p>:</span> <span class=n>btc_df</span><span class=p>,</span> <span class=s2>&quot;ETHUSDT&quot;</span><span class=p>:</span> <span class=n>eth_df</span><span class=p>})</span>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>my_data</span><span class=o>.</span><span class=n>hlc3</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a><span class=go>symbol                         BTCUSDT     ETHUSDT</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=go>2020-01-01 00:00:00+00:00  7209.813333         NaN</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a><span class=go>2020-01-02 00:00:00+00:00  7044.296667         NaN</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a><span class=go>2020-01-03 00:00:00+00:00  7248.020000  131.736667</span>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a><span class=go>2020-01-04 00:00:00+00:00          NaN  134.716667</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a><span class=go>2020-01-05 00:00:00+00:00          NaN  136.906667</span>
</span></code></pre></div> <ol> <li>Use different dates to demonstrate alignment.</li> </ol> <p>If your data has symbols as columns, enable <code>columns_are_symbols</code>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>hlc3_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span><span class=n>my_data</span><span class=o>.</span><span class=n>hlc3</span><span class=p>,</span> <span class=n>columns_are_symbols</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>hlc3_data</span><span class=o>.</span><span class=n>get</span><span class=p>()</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=go>symbol                         BTCUSDT     ETHUSDT</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=go>2020-01-01 00:00:00+00:00  7209.813333         NaN</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=go>2020-01-02 00:00:00+00:00  7044.296667         NaN</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=go>2020-01-03 00:00:00+00:00  7248.020000  131.736667</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=go>2020-01-04 00:00:00+00:00          NaN  134.716667</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=go>2020-01-05 00:00:00+00:00          NaN  136.906667</span>
</span></code></pre></div> <p>In this case, the instance will become feature-oriented. This means the DataFrame above will be stored in a <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.feature_dict>feature_dict</a>, and the behavior of symbols and features will be swapped across many methods. To make the instance symbol-oriented as in most examples, also pass <code>invert_data=True</code>.</p> <h2 id=merging>Merging<a class=headerlink href=#merging title="Permanent link">&para;</a></h2> <p>As you may have already noticed, the process of aligning data is logically separated from the process of fetching data. This allows you to merge and align any data retrospectively.</p> <p>Instead of storing and managing all symbols as one monolithic entity, you can handle them separately and merge them into a single data instance only when needed. This approach is especially useful when symbols are distributed across multiple data classes, such as when mixing remote and local data sources. For this, you can use the class method <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.merge>Data.merge</a>, which takes two or more data instances, merges their information, and forwards the merged result to <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.from_data>Data.from_data</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_btc</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=gp>... </span>    <span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_eth</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=gp>... </span>    <span class=s2>&quot;ETH-USD&quot;</span><span class=p>,</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>yf_data_btc</span><span class=p>,</span> <span class=n>yf_data_eth</span><span class=p>)</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_yf_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=go>symbol                         BTC-USD     ETH-USD</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a><span class=go>Date                                              </span>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=go>2019-12-31 00:00:00+00:00  7193.599121         NaN</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316         NaN</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215  127.410179</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=go>2020-01-03 00:00:00+00:00          NaN  134.171707</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a><span class=go>2020-01-04 00:00:00+00:00          NaN  135.069366</span>
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a><span class=go>UserWarning: Symbols have mismatching index. Setting missing data points to NaN.</span>
</span></code></pre></div> <p>The advantage of this method is that it not only merges different symbols across various data instances, but it can also merge Pandas objects for the same symbol.</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_btc1</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=gp>... </span>    <span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_btc2</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=gp>... </span>    <span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-05&quot;</span><span class=p>,</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-07&quot;</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data_eth</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a><span class=gp>... </span>    <span class=s2>&quot;ETH-USD&quot;</span><span class=p>,</span>
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-06&quot;</span><span class=p>,</span>
</span><span id=__span-38-14><a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-08&quot;</span>
</span><span id=__span-38-15><a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-38-16><a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>yf_data_btc1</span><span class=p>,</span> <span class=n>yf_data_btc2</span><span class=p>,</span> <span class=n>yf_data_eth</span><span class=p>)</span>
</span><span id=__span-38-17><a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_yf_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-38-18><a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a><span class=go>symbol                         BTC-USD     ETH-USD</span>
</span><span id=__span-38-19><a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a><span class=go>Date                                              </span>
</span><span id=__span-38-20><a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a><span class=go>2019-12-31 00:00:00+00:00  7193.599121         NaN</span>
</span><span id=__span-38-21><a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316         NaN</span>
</span><span id=__span-38-22><a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215         NaN</span>
</span><span id=__span-38-23><a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a><span class=go>2020-01-04 00:00:00+00:00  7410.656738         NaN</span>
</span><span id=__span-38-24><a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a><span class=go>2020-01-05 00:00:00+00:00  7411.317383  136.276779</span>
</span><span id=__span-38-25><a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a><span class=go>2020-01-06 00:00:00+00:00  7769.219238  144.304153</span>
</span><span id=__span-38-26><a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a><span class=go>2020-01-07 00:00:00+00:00          NaN  143.543991</span>
</span></code></pre></div> <h3 id=subclassing>Subclassing<a class=headerlink href=#subclassing title="Permanent link">&para;</a></h3> <p>We used <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> on the class <code>YFData</code>, which automatically creates an instance of that class. Once you have an instance of <code>YFData</code>, you can update the data just as before. But what if the data instances you want to merge come from different data classes? If you used <code>YFData</code> to merge <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/ccxt/#vectorbtpro.data.custom.ccxt.CCXTData>CCXTData</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/binance/#vectorbtpro.data.custom.binance.BinanceData>BinanceData</a> instances, you would no longer be able to update the data objects, since the method <code>YFData.update_symbol</code> is implemented specifically for symbols supported by Yahoo Finance.</p> <p>In this case, you can either use <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a>, which will raise an error if you attempt to update, or create a subclass to handle updates using different data providers. This is fairly easy if you know which symbol belongs to which data class; simply call the appropriate <code>fetch_symbol</code> or <code>update_symbol</code> method:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>bn_data_btc</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>BinanceData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=gp>... </span>    <span class=s2>&quot;BTCUSDT&quot;</span><span class=p>,</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-04&quot;</span><span class=p>)</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=gp>&gt;&gt;&gt; </span><span class=n>bn_data_btc</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=go>Open time</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=go>2020-01-01 00:00:00+00:00    7200.85</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=go>2020-01-02 00:00:00+00:00    6965.71</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=go>2020-01-03 00:00:00+00:00    7344.96</span>
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=go>Freq: D, Name: Close, dtype: float64</span>
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=gp>&gt;&gt;&gt; </span><span class=n>ccxt_data_eth</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>CCXTData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a><span class=gp>... </span>    <span class=s2>&quot;ETH/USDT&quot;</span><span class=p>,</span>
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span>
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-06&quot;</span><span class=p>)</span>
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>ccxt_data_eth</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a><span class=go>Open time</span>
</span><span id=__span-39-18><a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a><span class=go>2020-01-03 00:00:00+00:00    134.35</span>
</span><span id=__span-39-19><a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a><span class=go>2020-01-04 00:00:00+00:00    134.20</span>
</span><span id=__span-39-20><a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a><span class=go>2020-01-05 00:00:00+00:00    135.37</span>
</span><span id=__span-39-21><a id=__codelineno-39-21 name=__codelineno-39-21 href=#__codelineno-39-21></a><span class=go>Freq: D, Name: Close, dtype: float64</span>
</span><span id=__span-39-22><a id=__codelineno-39-22 name=__codelineno-39-22 href=#__codelineno-39-22></a>
</span><span id=__span-39-23><a id=__codelineno-39-23 name=__codelineno-39-23 href=#__codelineno-39-23></a><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span><span class=w> </span><span class=nc>MergedData</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=p>):</span>
</span><span id=__span-39-24><a id=__codelineno-39-24 name=__codelineno-39-24 href=#__codelineno-39-24></a><span class=gp>... </span>    <span class=nd>@classmethod</span>
</span><span id=__span-39-25><a id=__codelineno-39-25 name=__codelineno-39-25 href=#__codelineno-39-25></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>fetch_symbol</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-39-26><a id=__codelineno-39-26 name=__codelineno-39-26 href=#__codelineno-39-26></a><span class=gp>... </span>        <span class=k>if</span> <span class=n>symbol</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;BN_&quot;</span><span class=p>):</span>
</span><span id=__span-39-27><a id=__codelineno-39-27 name=__codelineno-39-27 href=#__codelineno-39-27></a><span class=gp>... </span>            <span class=k>return</span> <span class=n>vbt</span><span class=o>.</span><span class=n>BinanceData</span><span class=o>.</span><span class=n>fetch_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>[</span><span class=mi>3</span><span class=p>:],</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-39-28><a id=__codelineno-39-28 name=__codelineno-39-28 href=#__codelineno-39-28></a><span class=gp>... </span>        <span class=k>if</span> <span class=n>symbol</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;CCXT_&quot;</span><span class=p>):</span>
</span><span id=__span-39-29><a id=__codelineno-39-29 name=__codelineno-39-29 href=#__codelineno-39-29></a><span class=gp>... </span>            <span class=k>return</span> <span class=n>vbt</span><span class=o>.</span><span class=n>CCXTData</span><span class=o>.</span><span class=n>fetch_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>[</span><span class=mi>5</span><span class=p>:],</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-39-30><a id=__codelineno-39-30 name=__codelineno-39-30 href=#__codelineno-39-30></a><span class=gp>... </span>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown symbol &#39;</span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
</span><span id=__span-39-31><a id=__codelineno-39-31 name=__codelineno-39-31 href=#__codelineno-39-31></a><span class=gp>...</span>
</span><span id=__span-39-32><a id=__codelineno-39-32 name=__codelineno-39-32 href=#__codelineno-39-32></a><span class=gp>... </span>    <span class=k>def</span><span class=w> </span><span class=nf>update_symbol</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span><span id=__span-39-33><a id=__codelineno-39-33 name=__codelineno-39-33 href=#__codelineno-39-33></a><span class=gp>... </span>        <span class=n>fetch_kwargs</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_fetch_kwargs</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>
</span><span id=__span-39-34><a id=__codelineno-39-34 name=__codelineno-39-34 href=#__codelineno-39-34></a><span class=gp>... </span>        <span class=n>fetch_kwargs</span><span class=p>[</span><span class=s2>&quot;start&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>select_last_index</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>
</span><span id=__span-39-35><a id=__codelineno-39-35 name=__codelineno-39-35 href=#__codelineno-39-35></a><span class=gp>... </span>        <span class=n>kwargs</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>merge_dicts</span><span class=p>(</span><span class=n>fetch_kwargs</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-39-36><a id=__codelineno-39-36 name=__codelineno-39-36 href=#__codelineno-39-36></a><span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>fetch_symbol</span><span class=p>(</span><span class=n>symbol</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span><span id=__span-39-37><a id=__codelineno-39-37 name=__codelineno-39-37 href=#__codelineno-39-37></a>
</span><span id=__span-39-38><a id=__codelineno-39-38 name=__codelineno-39-38 href=#__codelineno-39-38></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_data</span> <span class=o>=</span> <span class=n>MergedData</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span>
</span><span id=__span-39-39><a id=__codelineno-39-39 name=__codelineno-39-39 href=#__codelineno-39-39></a><span class=gp>... </span>    <span class=n>bn_data_btc</span><span class=p>,</span>
</span><span id=__span-39-40><a id=__codelineno-39-40 name=__codelineno-39-40 href=#__codelineno-39-40></a><span class=gp>... </span>    <span class=n>ccxt_data_eth</span><span class=p>,</span>
</span><span id=__span-39-41><a id=__codelineno-39-41 name=__codelineno-39-41 href=#__codelineno-39-41></a><span class=gp>... </span>    <span class=n>rename</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-39-42><a id=__codelineno-39-42 name=__codelineno-39-42 href=#__codelineno-39-42></a><span class=gp>... </span>        <span class=s2>&quot;BTCUSDT&quot;</span><span class=p>:</span> <span class=s2>&quot;BN_BTCUSDT&quot;</span><span class=p>,</span>
</span><span id=__span-39-43><a id=__codelineno-39-43 name=__codelineno-39-43 href=#__codelineno-39-43></a><span class=gp>... </span>        <span class=s2>&quot;ETH/USDT&quot;</span><span class=p>:</span> <span class=s2>&quot;CCXT_ETH/USDT&quot;</span>
</span><span id=__span-39-44><a id=__codelineno-39-44 name=__codelineno-39-44 href=#__codelineno-39-44></a><span class=gp>... </span>    <span class=p>},</span>
</span><span id=__span-39-45><a id=__codelineno-39-45 name=__codelineno-39-45 href=#__codelineno-39-45></a><span class=gp>... </span>    <span class=n>missing_columns</span><span class=o>=</span><span class=s2>&quot;drop&quot;</span>
</span><span id=__span-39-46><a id=__codelineno-39-46 name=__codelineno-39-46 href=#__codelineno-39-46></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-39-47><a id=__codelineno-39-47 name=__codelineno-39-47 href=#__codelineno-39-47></a><span class=go>UserWarning: Symbols have mismatching index. Setting missing data points to NaN.</span>
</span><span id=__span-39-48><a id=__codelineno-39-48 name=__codelineno-39-48 href=#__codelineno-39-48></a><span class=go>UserWarning: Symbols have mismatching columns. Dropping missing data points.</span>
</span><span id=__span-39-49><a id=__codelineno-39-49 name=__codelineno-39-49 href=#__codelineno-39-49></a>
</span><span id=__span-39-50><a id=__codelineno-39-50 name=__codelineno-39-50 href=#__codelineno-39-50></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_data</span> <span class=o>=</span> <span class=n>merged_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-07&quot;</span><span class=p>)</span>
</span><span id=__span-39-51><a id=__codelineno-39-51 name=__codelineno-39-51 href=#__codelineno-39-51></a><span class=gp>&gt;&gt;&gt; </span><span class=n>merged_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-39-52><a id=__codelineno-39-52 name=__codelineno-39-52 href=#__codelineno-39-52></a><span class=go>symbol                     BN_BTCUSDT  CCXT_ETH/USDT</span>
</span><span id=__span-39-53><a id=__codelineno-39-53 name=__codelineno-39-53 href=#__codelineno-39-53></a><span class=go>Open time                                           </span>
</span><span id=__span-39-54><a id=__codelineno-39-54 name=__codelineno-39-54 href=#__codelineno-39-54></a><span class=go>2020-01-01 00:00:00+00:00     7200.85            NaN</span>
</span><span id=__span-39-55><a id=__codelineno-39-55 name=__codelineno-39-55 href=#__codelineno-39-55></a><span class=go>2020-01-02 00:00:00+00:00     6965.71            NaN</span>
</span><span id=__span-39-56><a id=__codelineno-39-56 name=__codelineno-39-56 href=#__codelineno-39-56></a><span class=go>2020-01-03 00:00:00+00:00     7344.96         134.35</span>
</span><span id=__span-39-57><a id=__codelineno-39-57 name=__codelineno-39-57 href=#__codelineno-39-57></a><span class=go>2020-01-04 00:00:00+00:00     7354.11         134.20</span>
</span><span id=__span-39-58><a id=__codelineno-39-58 name=__codelineno-39-58 href=#__codelineno-39-58></a><span class=go>2020-01-05 00:00:00+00:00     7358.75         135.37</span>
</span><span id=__span-39-59><a id=__codelineno-39-59 name=__codelineno-39-59 href=#__codelineno-39-59></a><span class=go>2020-01-06 00:00:00+00:00     7758.00         144.15</span>
</span></code></pre></div> <p>We have just created a flexible data class that can fetch, update, and manage symbols from multiple data providers. Great!</p> <h2 id=resampling>Resampling<a class=headerlink href=#resampling title="Permanent link">&para;</a></h2> <p>As a subclass of <a href=https://vectorbt.pro/pvt_41531c19/api/base/wrapping/#vectorbtpro.base.wrapping.Wrapping>Wrapping</a>, each data instance stores the normalized metadata of all Pandas objects stored within that instance. This metadata can be used to resample (i.e., change the time frame of) all Pandas objects at once. Since many data classes, such as <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/ccxt/#vectorbtpro.data.custom.ccxt.CCXTData>CCXTData</a>, have a fixed feature layout, you can define the resampling function for each feature in a special configuration called the "feature config" (stored under <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.feature_config>Data.feature_config</a>), and bind that config to the class itself for use by all instances. Similar to field configs in <a href=https://vectorbt.pro/pvt_41531c19/api/records/base/#vectorbtpro.records.base.Records>Records</a>, this config can be attached to the entire data class or to any of its instances. Whenever a new instance is created, the class config is copied so that rewriting it will not affect the original class config.</p> <p>Here is what the feature config of <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/binance/#vectorbtpro.data.custom.binance.BinanceData>BinanceData</a> looks like:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>vbt</span><span class=o>.</span><span class=n>pprint</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>BinanceData</span><span class=o>.</span><span class=n>feature_config</span><span class=p>)</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=go>HybridConfig({</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=go>    &#39;Quote volume&#39;: dict(</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=go>        resample_func=&lt;function BinanceData.&lt;lambda&gt; at 0x7ff7648d7280&gt;</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=go>    ),</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=go>    &#39;Taker base volume&#39;: dict(</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=go>        resample_func=&lt;function BinanceData.&lt;lambda&gt; at 0x7ff7648d7310&gt;</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=go>    ),</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=go>    &#39;Taker quote volume&#39;: dict(</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=go>        resample_func=&lt;function BinanceData.&lt;lambda&gt; at 0x7ff7648d73a0&gt;</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=go>    )</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=go>})</span>
</span></code></pre></div> <p>You might be wondering where the resampling functions are for all the OHLCV features. Those features are universal and are recognized and resampled automatically.</p> <p>Now, let's resample the entire daily BTC/USD data from Yahoo Finance to a monthly frequency:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>full_yf_data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>ms_yf_data</span> <span class=o>=</span> <span class=n>full_yf_data</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s2>&quot;M&quot;</span><span class=p>)</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>ms_yf_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=go>Date</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=go>2014-09-01 00:00:00+00:00      386.944000</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=go>2014-10-01 00:00:00+00:00      338.321014</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=go>2014-11-01 00:00:00+00:00      378.046997</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=go>                                      ...     </span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=go>2023-06-01 00:00:00+00:00    30477.251953</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=go>2023-07-01 00:00:00+00:00    29230.111328</span>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=go>2023-08-01 00:00:00+00:00    25995.177734</span>
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a><span class=go>Freq: MS, Name: Close, Length: 108, dtype: float64</span>
</span></code></pre></div> <ol> <li>Use the built-in Yahoo Finance class, which already knows how to resample features such as dividends.</li> </ol> <p>Since VBT works just as well with custom target indexes as with built-in frequencies, you can provide a custom index for resampling:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>resampler</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Resampler</span><span class=o>.</span><span class=n>from_date_range</span><span class=p>(</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=gp>... </span>    <span class=n>full_yf_data</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>index</span><span class=p>,</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=n>full_yf_data</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=n>full_yf_data</span><span class=o>.</span><span class=n>wrapper</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>],</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=gp>... </span>    <span class=n>freq</span><span class=o>=</span><span class=s2>&quot;Y&quot;</span><span class=p>,</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=gp>... </span>    <span class=n>silence_warnings</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=gp>&gt;&gt;&gt; </span><span class=n>y_yf_data</span> <span class=o>=</span> <span class=n>full_yf_data</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=n>resampler</span><span class=p>)</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=gp>&gt;&gt;&gt; </span><span class=n>y_yf_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=go>2014-12-31 00:00:00+00:00      426.619995</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=go>2015-12-31 00:00:00+00:00      961.237976</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=go>2016-12-31 00:00:00+00:00    12952.200195</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=go>2017-12-31 00:00:00+00:00     3865.952637</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=go>2018-12-31 00:00:00+00:00     7292.995117</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=go>2019-12-31 00:00:00+00:00    28840.953125</span>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a><span class=go>2020-12-31 00:00:00+00:00    47178.125000</span>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=go>2021-12-31 00:00:00+00:00    39194.972656</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a><span class=go>Freq: A-DEC, Name: Close, dtype: float64</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>When providing a custom index, VBT will aggregate all values after each index entry. The last entry aggregates all values up to infinity. See <a href=https://vectorbt.pro/pvt_41531c19/api/generic/accessors/#vectorbtpro.generic.accessors.GenericAccessor.resample_to_index>GenericAccessor.resample_to_index</a>.</p> </div> <p>If a data class does not have a fixed feature layout, such as <a href=https://vectorbt.pro/pvt_41531c19/api/data/custom/hdf/#vectorbtpro.data.custom.hdf.HDFData>HDFData</a>, you need to adapt the feature config to each <strong>data instance</strong> rather than to the entire data class. For example, if you convert <code>bn_data_btc</code> to a generic <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> instance:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span><span class=n>bn_data_btc</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>single_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s2>&quot;M&quot;</span><span class=p>)</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=go>ValueError: Cannot resample feature &#39;Quote volume&#39;. Specify resample_func in feature_config.</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>vbt</span><span class=o>.</span><span class=n>BinanceData</span><span class=o>.</span><span class=n>feature_config</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=gp>... </span>    <span class=n>data_btc</span><span class=o>.</span><span class=n>feature_config</span><span class=p>[</span><span class=n>k</span><span class=p>]</span> <span class=o>=</span> <span class=n>v</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s2>&quot;M&quot;</span><span class=p>)</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=go>&lt;vectorbtpro.data.base.Data at 0x7fc0dfce1630&gt;</span>
</span></code></pre></div> <p>You can also perform this with a single copy operation using <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.use_feature_config_of>Data.use_feature_config_of</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Data</span><span class=o>.</span><span class=n>from_data</span><span class=p>(</span><span class=n>bn_data_btc</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=n>single_key</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span><span class=o>.</span><span class=n>use_feature_config_of</span><span class=p>(</span><span class=n>vbt</span><span class=o>.</span><span class=n>BinanceData</span><span class=p>)</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data_btc</span><span class=o>.</span><span class=n>resample</span><span class=p>(</span><span class=s2>&quot;M&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=go>Open time</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=go>2020-01-01 00:00:00+00:00    7344.96</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=go>Freq: MS, Name: Close, dtype: float64</span>
</span></code></pre></div> <h3 id=realignment>Realignment<a class=headerlink href=#realignment title="Permanent link">&para;</a></h3> <p>Just like resampling, realignment also changes the data frequency, but unlike resampling, it does not aggregate the data. Instead, it includes only the most recent data point available at each step in the target index. It uses <a href=https://vectorbt.pro/pvt_41531c19/api/generic/accessors/#vectorbtpro.generic.accessors.GenericAccessor.realign_opening>GenericAccessor.realign_opening</a> for "open" and <a href=https://vectorbt.pro/pvt_41531c19/api/generic/accessors/#vectorbtpro.generic.accessors.GenericAccessor.realign_closing>GenericAccessor.realign_closing</a> for all other features. There are two common use cases for realignment: aligning multiple symbols from different time zones to a single index, and upsampling data. Let's align symbols with different timings:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;AAPL&quot;</span><span class=p>],</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-01-04&quot;</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=go>symbol                         BTC-USD       AAPL</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=go>Date                                             </span>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316        NaN</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215        NaN</span>
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a><span class=go>2020-01-02 05:00:00+00:00          NaN  73.249016</span>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a><span class=go>2020-01-03 00:00:00+00:00  7344.884277        NaN</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a><span class=go>2020-01-03 05:00:00+00:00          NaN  72.536888</span>
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a>
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_index</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>index</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span><span class=s2>&quot;D&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>drop_duplicates</span><span class=p>()</span>
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_data</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>realign</span><span class=p>(</span><span class=n>new_index</span><span class=p>,</span> <span class=n>ffill</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_data</span><span class=o>.</span><span class=n>close</span>
</span><span id=__span-45-18><a id=__codelineno-45-18 name=__codelineno-45-18 href=#__codelineno-45-18></a><span class=go>symbol                         BTC-USD       AAPL</span>
</span><span id=__span-45-19><a id=__codelineno-45-19 name=__codelineno-45-19 href=#__codelineno-45-19></a><span class=go>Date                                             </span>
</span><span id=__span-45-20><a id=__codelineno-45-20 name=__codelineno-45-20 href=#__codelineno-45-20></a><span class=go>2020-01-01 00:00:00+00:00  7200.174316        NaN</span>
</span><span id=__span-45-21><a id=__codelineno-45-21 name=__codelineno-45-21 href=#__codelineno-45-21></a><span class=go>2020-01-02 00:00:00+00:00  6985.470215        NaN</span>
</span><span id=__span-45-22><a id=__codelineno-45-22 name=__codelineno-45-22 href=#__codelineno-45-22></a><span class=go>2020-01-03 00:00:00+00:00  7344.884277  73.249016</span>
</span><span id=__span-45-23><a id=__codelineno-45-23 name=__codelineno-45-23 href=#__codelineno-45-23></a><span class=go>2020-01-04 00:00:00+00:00          NaN  72.536888</span>
</span></code></pre></div> <h2 id=transforming>Transforming<a class=headerlink href=#transforming title="Permanent link">&para;</a></h2> <p>The main challenge in transforming any data is that each symbol must have the same index and columns, since we need to concatenate them into one Pandas object later. Therefore, any transformation must be applied to each symbol in the same way. To enforce this, the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.transform>Data.transform</a> method concatenates the data across all symbols and features into a single large DataFrame and passes it to a UDF for transformation. After the transformation, the method splits the result back into multiple smaller Pandas objects, one per symbol, aligns them, creates a new data wrapper based on the aligned index and columns, and finally initializes a new data instance.</p> <p>Let's drop any row that contains at least one NaN:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>full_yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>([</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>])</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>full_yf_data</span><span class=o>.</span><span class=n>close</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=go>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=go>DatetimeIndex: 3268 entries, 2014-09-17 00:00:00+00:00 to 2023-08-28 00:00:00+00:00</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=go>Freq: D</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=go>Data columns (total 2 columns):</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=go> #   Column   Non-Null Count  Dtype  </span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=go>---  ------   --------------  -----  </span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=go> 0   BTC-USD  3268 non-null   float64</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=go> 1   ETH-USD  2119 non-null   float64</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=go>dtypes: float64(2)</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=go>memory usage: 76.6 KB</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_full_yf_data</span> <span class=o>=</span> <span class=n>full_yf_data</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=k>lambda</span> <span class=n>df</span><span class=p>:</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>())</span>
</span><span id=__span-46-15><a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a><span class=gp>&gt;&gt;&gt; </span><span class=n>new_full_yf_data</span><span class=o>.</span><span class=n>close</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span><span id=__span-46-16><a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a><span class=go>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
</span><span id=__span-46-17><a id=__codelineno-46-17 name=__codelineno-46-17 href=#__codelineno-46-17></a><span class=go>DatetimeIndex: 2119 entries, 2017-11-09 00:00:00+00:00 to 2023-08-28 00:00:00+00:00</span>
</span><span id=__span-46-18><a id=__codelineno-46-18 name=__codelineno-46-18 href=#__codelineno-46-18></a><span class=go>Freq: D</span>
</span><span id=__span-46-19><a id=__codelineno-46-19 name=__codelineno-46-19 href=#__codelineno-46-19></a><span class=go>Data columns (total 2 columns):</span>
</span><span id=__span-46-20><a id=__codelineno-46-20 name=__codelineno-46-20 href=#__codelineno-46-20></a><span class=go> #   Column   Non-Null Count  Dtype  </span>
</span><span id=__span-46-21><a id=__codelineno-46-21 name=__codelineno-46-21 href=#__codelineno-46-21></a><span class=go>---  ------   --------------  -----  </span>
</span><span id=__span-46-22><a id=__codelineno-46-22 name=__codelineno-46-22 href=#__codelineno-46-22></a><span class=go> 0   BTC-USD  2119 non-null   float64</span>
</span><span id=__span-46-23><a id=__codelineno-46-23 name=__codelineno-46-23 href=#__codelineno-46-23></a><span class=go> 1   ETH-USD  2119 non-null   float64</span>
</span><span id=__span-46-24><a id=__codelineno-46-24 name=__codelineno-46-24 href=#__codelineno-46-24></a><span class=go>dtypes: float64(2)</span>
</span><span id=__span-46-25><a id=__codelineno-46-25 name=__codelineno-46-25 href=#__codelineno-46-25></a><span class=go>memory usage: 49.7 KB</span>
</span></code></pre></div> <p>You can also choose to pass only one feature or one symbol at a time by setting <code>per_feature=True</code> and <code>per_symbol=True</code>, respectively. By enabling both arguments at once, you can instruct VBT to pass only one feature and symbol combination as a Pandas Series at a time.</p> <h2 id=analysis>Analysis<a class=headerlink href=#analysis title="Permanent link">&para;</a></h2> <p>Each data class is a subclass of <a href=https://vectorbt.pro/pvt_41531c19/documentation/building-blocks/#analyzing>Analyzable</a>, making it both analyzable and indexable.</p> <h3 id=indexing>Indexing<a class=headerlink href=#indexing title="Permanent link">&para;</a></h3> <p>You can use Pandas indexing on a data instance to select rows and columns across all fetched Pandas objects. Supported operations include <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iloc.html><code>iloc</code></a>, <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html><code>loc</code></a>, <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.xs.html><code>xs</code></a>, and <a href=https://pandas.pydata.org/docs/user_guide/indexing.html#basics><code>[]</code></a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span> <span class=o>=</span> <span class=n>yf_data</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>:</span><span class=s2>&quot;2020-01-03&quot;</span><span class=p>]</span>  <span class=c1># (1)!</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=go>&lt;__main__.YFData at 0x7fa9a0012396&gt;</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span> <span class=o>=</span> <span class=n>sub_yf_data</span><span class=p>[[</span><span class=s2>&quot;Open&quot;</span><span class=p>,</span> <span class=s2>&quot;High&quot;</span><span class=p>,</span> <span class=s2>&quot;Low&quot;</span><span class=p>,</span> <span class=s2>&quot;Close&quot;</span><span class=p>]]</span>  <span class=c1># (2)!</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=go>&lt;__main__.YFData at 0x7fa9a0032358&gt;</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=go>                                  Open         High          Low        Close</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=go>Date                                                                         </span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=go>2020-01-01 00:00:00+00:00  7194.892090  7254.330566  7174.944336  7200.174316</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a><span class=go>2020-01-02 00:00:00+00:00  7202.551270  7212.155273  6935.270020  6985.470215</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=go>2020-01-03 00:00:00+00:00  6984.428711  7413.715332  6914.996094  7344.884277</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a>
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sub_yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span>
</span><span id=__span-47-17><a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=go>                                 Open        High         Low       Close</span>
</span><span id=__span-47-18><a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a><span class=go>Date                                                                     </span>
</span><span id=__span-47-19><a id=__codelineno-47-19 name=__codelineno-47-19 href=#__codelineno-47-19></a><span class=go>2020-01-01 00:00:00+00:00  129.630661  132.835358  129.198288  130.802002</span>
</span><span id=__span-47-20><a id=__codelineno-47-20 name=__codelineno-47-20 href=#__codelineno-47-20></a><span class=go>2020-01-02 00:00:00+00:00  130.820038  130.820038  126.954910  127.410179</span>
</span><span id=__span-47-21><a id=__codelineno-47-21 name=__codelineno-47-21 href=#__codelineno-47-21></a><span class=go>2020-01-03 00:00:00+00:00  127.411263  134.554016  126.490021  134.171707</span>
</span></code></pre></div> <ol> <li>Select rows (in <code>loc</code>, the second date is inclusive!). Returns a new data instance.</li> <li>Select columns. Returns a new data instance.</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Do not try to select symbols this way. This notation is reserved for rows and columns only. Use <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.select>Data.select</a> instead.</p> </div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If the instance is feature-oriented, this method will apply to features rather than symbols.</p> </div> <h3 id=stats-and-plots>Stats and plots<a class=headerlink href=#stats-and-plots title="Permanent link">&para;</a></h3> <p>As with every <a href=https://vectorbt.pro/pvt_41531c19/api/generic/analyzable/#vectorbtpro.generic.analyzable.Analyzable>Analyzable</a> instance, you can compute and plot various properties of the data stored in the instance.</p> <p>Very often, simply calling <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.info.html>DataFrame.info</a> and <a href=https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.describe.html>DataFrame.describe</a> on any stored Series or DataFrame is enough to print a concise summary:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=gp>... </span>    <span class=p>}),</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=n>vbt</span><span class=o>.</span><span class=n>symbol_dict</span><span class=p>({</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=gp>... </span>        <span class=s2>&quot;BTC-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-03&quot;</span><span class=p>,</span> 
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=gp>... </span>        <span class=s2>&quot;ETH-USD&quot;</span><span class=p>:</span> <span class=s2>&quot;2020-01-05&quot;</span>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a><span class=gp>... </span>    <span class=p>})</span>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=go>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=go>DatetimeIndex: 5 entries, 2019-12-31 00:00:00+00:00 to 2020-01-04 00:00:00+00:00</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=go>Freq: D</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=go>Data columns (total 7 columns):</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=go> #   Column        Non-Null Count  Dtype  </span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=go>---  ------        --------------  -----  </span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=go> 0   Open          3 non-null      float64</span>
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a><span class=go> 1   High          3 non-null      float64</span>
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=go> 2   Low           3 non-null      float64</span>
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a><span class=go> 3   Close         3 non-null      float64</span>
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a><span class=go> 4   Volume        3 non-null      float64</span>
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a><span class=go> 5   Dividends     3 non-null      float64</span>
</span><span id=__span-49-14><a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a><span class=go> 6   Stock Splits  3 non-null      float64</span>
</span><span id=__span-49-15><a id=__codelineno-49-15 name=__codelineno-49-15 href=#__codelineno-49-15></a><span class=go>dtypes: float64(7)</span>
</span><span id=__span-49-16><a id=__codelineno-49-16 name=__codelineno-49-16 href=#__codelineno-49-16></a><span class=go>memory usage: 320.0 bytes</span>
</span><span id=__span-49-17><a id=__codelineno-49-17 name=__codelineno-49-17 href=#__codelineno-49-17></a>
</span><span id=__span-49-18><a id=__codelineno-49-18 name=__codelineno-49-18 href=#__codelineno-49-18></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>describe</span><span class=p>()</span>
</span><span id=__span-49-19><a id=__codelineno-49-19 name=__codelineno-49-19 href=#__codelineno-49-19></a><span class=go>              Open         High          Low        Close        Volume  \</span>
</span><span id=__span-49-20><a id=__codelineno-49-20 name=__codelineno-49-20 href=#__codelineno-49-20></a><span class=go>count     3.000000     3.000000     3.000000     3.000000  3.000000e+00   </span>
</span><span id=__span-49-21><a id=__codelineno-49-21 name=__codelineno-49-21 href=#__codelineno-49-21></a><span class=go>mean   7230.627441  7267.258626  7093.330729  7126.414551  2.017856e+10   </span>
</span><span id=__span-49-22><a id=__codelineno-49-22 name=__codelineno-49-22 href=#__codelineno-49-22></a><span class=go>std      55.394933    62.577102   136.908963   122.105641  1.408740e+09   </span>
</span><span id=__span-49-23><a id=__codelineno-49-23 name=__codelineno-49-23 href=#__codelineno-49-23></a><span class=go>min    7194.892090  7212.155273  6935.270020  6985.470215  1.856566e+10   </span>
</span><span id=__span-49-24><a id=__codelineno-49-24 name=__codelineno-49-24 href=#__codelineno-49-24></a><span class=go>25%    7198.721680  7233.242920  7052.523926  7089.534668  1.968387e+10   </span>
</span><span id=__span-49-25><a id=__codelineno-49-25 name=__codelineno-49-25 href=#__codelineno-49-25></a><span class=go>50%    7202.551270  7254.330566  7169.777832  7193.599121  2.080208e+10   </span>
</span><span id=__span-49-26><a id=__codelineno-49-26 name=__codelineno-49-26 href=#__codelineno-49-26></a><span class=go>75%    7248.495117  7294.810303  7172.361084  7196.886719  2.098501e+10   </span>
</span><span id=__span-49-27><a id=__codelineno-49-27 name=__codelineno-49-27 href=#__codelineno-49-27></a><span class=go>max    7294.438965  7335.290039  7174.944336  7200.174316  2.116795e+10   </span>
</span><span id=__span-49-28><a id=__codelineno-49-28 name=__codelineno-49-28 href=#__codelineno-49-28></a>
</span><span id=__span-49-29><a id=__codelineno-49-29 name=__codelineno-49-29 href=#__codelineno-49-29></a><span class=go>       Dividends  Stock Splits  </span>
</span><span id=__span-49-30><a id=__codelineno-49-30 name=__codelineno-49-30 href=#__codelineno-49-30></a><span class=go>count        3.0           3.0  </span>
</span><span id=__span-49-31><a id=__codelineno-49-31 name=__codelineno-49-31 href=#__codelineno-49-31></a><span class=go>mean         0.0           0.0  </span>
</span><span id=__span-49-32><a id=__codelineno-49-32 name=__codelineno-49-32 href=#__codelineno-49-32></a><span class=go>std          0.0           0.0  </span>
</span><span id=__span-49-33><a id=__codelineno-49-33 name=__codelineno-49-33 href=#__codelineno-49-33></a><span class=go>min          0.0           0.0  </span>
</span><span id=__span-49-34><a id=__codelineno-49-34 name=__codelineno-49-34 href=#__codelineno-49-34></a><span class=go>25%          0.0           0.0  </span>
</span><span id=__span-49-35><a id=__codelineno-49-35 name=__codelineno-49-35 href=#__codelineno-49-35></a><span class=go>50%          0.0           0.0  </span>
</span><span id=__span-49-36><a id=__codelineno-49-36 name=__codelineno-49-36 href=#__codelineno-49-36></a><span class=go>75%          0.0           0.0  </span>
</span><span id=__span-49-37><a id=__codelineno-49-37 name=__codelineno-49-37 href=#__codelineno-49-37></a><span class=go>max          0.0           0.0  </span>
</span></code></pre></div> <p>But since any data instance can capture multiple symbols, <a href=https://vectorbt.pro/pvt_41531c19/api/generic/stats_builder/#vectorbtpro.generic.stats_builder.StatsBuilderMixin.stats>StatsBuilderMixin.stats</a> can also provide information about symbols:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>stats</span><span class=p>()</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=go>Start                   2019-12-31 00:00:00+00:00</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a><span class=go>End                     2020-01-04 00:00:00+00:00</span>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=go>Period                            5 days 00:00:00</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a><span class=go>Total Symbols                                   2</span>
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a><span class=go>Null Counts: BTC-USD                           14</span>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a><span class=go>Null Counts: ETH-USD                           14</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a><span class=go>Name: agg_stats, dtype: object</span>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>stats</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s2>&quot;Volume&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a><span class=go>Start                   2019-12-31 00:00:00+00:00</span>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a><span class=go>End                     2020-01-04 00:00:00+00:00</span>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=go>Period                            5 days 00:00:00</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a><span class=go>Total Symbols                                   2</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a><span class=go>Null Counts: BTC-USD                            2</span>
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a><span class=go>Null Counts: ETH-USD                            2</span>
</span><span id=__span-50-17><a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a><span class=go>Name: Volume, dtype: object</span>
</span></code></pre></div> <ol> <li>Print stats for the <code>Volume</code> column only.</li> </ol> <p>To plot the data, use the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.plot>Data.plot</a> method. This method produces an OHLC(V) chart when the Pandas object is a DataFrame with standard price features and a line chart otherwise. The OHLC(V) chart can plot only one symbol of data, while the line chart can plot only one feature of data. You can specify both using the <code>symbol</code> and <code>feature</code> arguments, respectively.</p> <p>Because different symbols often have different starting values, you can use the <code>base</code> argument to rebase the time series so they start from the same point on the chart:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span> <span class=o>=</span> <span class=n>YFData</span><span class=o>.</span><span class=n>pull</span><span class=p>(</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=gp>... </span>    <span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>,</span> <span class=s2>&quot;ETH-USD&quot;</span><span class=p>],</span> 
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=gp>... </span>    <span class=n>start</span><span class=o>=</span><span class=s2>&quot;2020-01-01&quot;</span><span class=p>,</span> 
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=gp>... </span>    <span class=n>end</span><span class=o>=</span><span class=s2>&quot;2020-06-01&quot;</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=gp>... </span><span class=p>)</span>
</span></code></pre></div> <p> <div class="progress progress-100plus candystripe candystripe-animate"> <div class=progress-bar style=width:100.00%> <p class=progress-label>Symbol 2/2</p> </div> </div> </p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s2>&quot;Close&quot;</span><span class=p>,</span> <span class=n>base</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span></code></pre></div> <ol> <li>Since our data is symbol-oriented, <code>column</code> here is an alias for <code>feature</code>.</li> </ol> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plot_base.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plot_base.dark.svg#only-dark></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This works only for line traces, since we cannot plot multiple OHLC(V) traces on the same chart.</p> </div> <p>As with most things, you can achieve the same result by chaining simple commands:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=p>[</span><span class=s2>&quot;Close&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>()</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>rebase</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>()</span>  <span class=c1># (1)!</span>
</span></code></pre></div> <ol> <li>This uses <a href=https://vectorbt.pro/pvt_41531c19/api/generic/accessors/#vectorbtpro.generic.accessors.GenericAccessor.rebase>GenericAccessor.rebase</a> and <a href=https://vectorbt.pro/pvt_41531c19/api/generic/accessors/#vectorbtpro.generic.accessors.GenericAccessor.plot>GenericAccessor.plot</a>.</li> </ol> <p>Additionally, <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data>Data</a> can display a subplot for each symbol using <a href=https://vectorbt.pro/pvt_41531c19/api/generic/plots_builder/#vectorbtpro.generic.plots_builder.PlotsBuilderMixin.plots>PlotsBuilderMixin.plots</a>, which internally uses <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.plot>Data.plot</a>:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>plots</span><span class=p>()</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></code></pre></div> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots.dark.svg#only-dark></p> <p>By specifying a column, you can plot one feature per symbol of data:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>plots</span><span class=p>(</span><span class=n>column</span><span class=o>=</span><span class=s2>&quot;Close&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></code></pre></div> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_column.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_column.dark.svg#only-dark></p> <p>You can select one or more symbols by passing them through the <code>template_context</code> dictionary:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=gp>&gt;&gt;&gt; </span><span class=n>yf_data</span><span class=o>.</span><span class=n>plots</span><span class=p>(</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=s2>&quot;Close&quot;</span><span class=p>,</span> 
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=gp>... </span>    <span class=n>template_context</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>symbols</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>])</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=gp>... </span><span class=p>)</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></code></pre></div> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_symbol.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_symbol.dark.svg#only-dark></p> <p>If you review the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.subplots>Data.subplots</a> config, you will see that only one subplot is defined as a template. During the resolution phase, the template is evaluated and the subplot is expanded into multiple subplots—one for each symbol—each with the name <code>plot</code>, prefixed by its index in the expansion. For illustration, let's change the colors of both lines and plot their moving averages:</p> <div class="language-pycon highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span><span class=w> </span><span class=nn>vectorbtpro.utils.colors</span><span class=w> </span><span class=kn>import</span> <span class=n>adjust_opacity</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=gp>&gt;&gt;&gt; </span><span class=n>fig</span> <span class=o>=</span> <span class=n>yf_data</span><span class=o>.</span><span class=n>plots</span><span class=p>(</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=gp>... </span>    <span class=n>column</span><span class=o>=</span><span class=s2>&quot;Close&quot;</span><span class=p>,</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=gp>... </span>    <span class=n>subplot_settings</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=gp>... </span>        <span class=n>plot_0</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>line_color</span><span class=o>=</span><span class=s2>&quot;mediumslateblue&quot;</span><span class=p>)),</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=gp>... </span>        <span class=n>plot_1</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>line_color</span><span class=o>=</span><span class=s2>&quot;limegreen&quot;</span><span class=p>))</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=gp>... </span>    <span class=p>)</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span> <span class=o>=</span> <span class=n>vbt</span><span class=o>.</span><span class=n>talib</span><span class=p>(</span><span class=s2>&quot;SMA&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>yf_data</span><span class=o>.</span><span class=n>close</span><span class=p>,</span> <span class=n>vbt</span><span class=o>.</span><span class=n>Default</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>  <span class=c1># (1)!</span>
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span><span class=p>[</span><span class=s2>&quot;BTC-USD&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>real</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s2>&quot;SMA(10)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span>
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a><span class=gp>... </span>    <span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>line_color</span><span class=o>=</span><span class=n>adjust_opacity</span><span class=p>(</span><span class=s2>&quot;mediumslateblue&quot;</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>)),</span>
</span><span id=__span-57-13><a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a><span class=gp>... </span>    <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>row</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>  <span class=c1># (2)!</span>
</span><span id=__span-57-14><a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a><span class=gp>... </span>    <span class=n>fig</span><span class=o>=</span><span class=n>fig</span>
</span><span id=__span-57-15><a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-57-16><a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a><span class=gp>&gt;&gt;&gt; </span><span class=n>sma</span><span class=p>[</span><span class=s2>&quot;ETH-USD&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>real</span><span class=o>.</span><span class=n>rename</span><span class=p>(</span><span class=s2>&quot;SMA(10)&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>vbt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span>
</span><span id=__span-57-17><a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a><span class=gp>... </span>    <span class=n>trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>line_color</span><span class=o>=</span><span class=n>adjust_opacity</span><span class=p>(</span><span class=s2>&quot;limegreen&quot;</span><span class=p>,</span> <span class=mf>0.7</span><span class=p>)),</span>
</span><span id=__span-57-18><a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a><span class=gp>... </span>    <span class=n>add_trace_kwargs</span><span class=o>=</span><span class=nb>dict</span><span class=p>(</span><span class=n>row</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>col</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-57-19><a id=__codelineno-57-19 name=__codelineno-57-19 href=#__codelineno-57-19></a><span class=gp>... </span>    <span class=n>fig</span><span class=o>=</span><span class=n>fig</span>
</span><span id=__span-57-20><a id=__codelineno-57-20 name=__codelineno-57-20 href=#__codelineno-57-20></a><span class=gp>... </span><span class=p>)</span>
</span><span id=__span-57-21><a id=__codelineno-57-21 name=__codelineno-57-21 href=#__codelineno-57-21></a><span class=gp>&gt;&gt;&gt; </span><span class=n>fig</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></code></pre></div> <ol> <li>Hide the <code>timeperiod</code> parameter from the column hierarchy by wrapping it with <a href=https://vectorbt.pro/pvt_41531c19/api/base/reshaping/#vectorbtpro.base.reshaping.Default>Default</a>.</li> <li>Specify which subplot to plot this SMA on.</li> </ol> <p><img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_colors.light.svg#only-light> <img alt class=iimg loading=lazy src=https://vectorbt.pro/pvt_41531c19/assets/images/documentation/data/plots_colors.dark.svg#only-dark></p> <p>If you are up for a challenge, try subclassing the <code>YFData</code> class and overriding the <a href=https://vectorbt.pro/pvt_41531c19/api/data/base/#vectorbtpro.data.base.Data.plot>Data.plot</a> method so that it also computes and plots the SMA over the time series. This would make the plotting process very flexible, as you could display the SMA for every feature and symbol without worrying about the subplot's position or other details.</p> <p><a class=md-button href=https://vectorbt.pro/pvt_41531c19/assets/jupytext/documentation/data/index.py.txt target=blank_><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19.14 7.5A2.86 2.86 0 0 1 22 10.36v3.78A2.86 2.86 0 0 1 19.14 17H12c0 .39.32.96.71.96H17v1.68a2.86 2.86 0 0 1-2.86 2.86H9.86A2.86 2.86 0 0 1 7 19.64v-3.75a2.85 2.85 0 0 1 2.86-2.85h5.25a2.85 2.85 0 0 0 2.85-2.86V7.5zm-4.28 11.79c-.4 0-.72.3-.72.89s.32.71.72.71a.71.71 0 0 0 .71-.71c0-.59-.32-.89-.71-.89m-10-1.79A2.86 2.86 0 0 1 2 14.64v-3.78A2.86 2.86 0 0 1 4.86 8H12c0-.39-.32-.96-.71-.96H7V5.36A2.86 2.86 0 0 1 9.86 2.5h4.28A2.86 2.86 0 0 1 17 5.36v3.75a2.85 2.85 0 0 1-2.86 2.85H8.89a2.85 2.85 0 0 0-2.85 2.86v2.68zM9.14 5.71c.4 0 .72-.3.72-.89s-.32-.71-.72-.71c-.39 0-.71.12-.71.71s.32.89.71.89"/></svg></span> Python code</a></p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=https://vectorbt.pro/pvt_41531c19/documentation/building-blocks/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Building blocks"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Building blocks </div> </div> </a> <a href=https://vectorbt.pro/pvt_41531c19/documentation/data/local/ class="md-footer__link md-footer__link--next" aria-label="Next: Local"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Local </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021-2025 Oleg Polakow. All rights reserved. </div> </div> <div class=md-social> <a href=https://www.linkedin.com/in/polakowo target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/polakowo target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.prune", "navigation.path", "navigation.footer", "search.suggest", "search.share", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "content.tabs.link", "toc.follow", "toc.integrate", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.26099bd0.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=https://vectorbt.pro/pvt_41531c19/assets/javascripts/bundle.9d1edc04.min.js></script> <script src=https://vectorbt.pro/pvt_41531c19/assets/scripts/extra.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js></script> </body> 
<!-- Mirrored from vectorbt.pro/pvt_41531c19/documentation/data/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Nov 2025 03:46:43 GMT -->
</html>